import{c as j,r as s,j as t,e as g}from"./index-GLrqEWvZ.js";import{U as w}from"./UserPageLayout-D_nUOe2R.js";import{W as b}from"./WallPost-Bjj0hfds.js";import"./useConfirm-r4lu6ZEG.js";import"./ConfirmDialog-Ol20coub.js";import"./useAlert-NXgLQgpe.js";const P="_feedPage_9b2wr_3",A="_header_9b2wr_17",C="_title_9b2wr_29",L="_loading_9b2wr_45",U="_error_9b2wr_47",B="_retryButton_9b2wr_77",E="_emptyState_9b2wr_109",S="_emptyIcon_9b2wr_121",W="_emptyHint_9b2wr_143",I="_findFriendsButton_9b2wr_155",F="_postsList_9b2wr_191",k="_postWrapper_9b2wr_205",H="_postAuthor_9b2wr_231",$="_authorLink_9b2wr_243",R="_avatarContainer_9b2wr_269",O="_authorAvatar_9b2wr_285",q="_avatarPlaceholder_9b2wr_301",z="_authorName_9b2wr_327",a={feedPage:P,header:A,title:C,loading:L,error:U,retryButton:B,emptyState:E,emptyIcon:S,emptyHint:W,findFriendsButton:I,postsList:F,postWrapper:k,postAuthor:H,authorLink:$,avatarContainer:R,authorAvatar:O,avatarPlaceholder:q,authorName:z},T=()=>{const{user:n}=j(e=>e.auth),[l,x]=s.useState([]),[y,N]=s.useState(!0),[h,p]=s.useState(null),o=async()=>{var e,c;if(n)try{p(null);const r=await g.get(`/feed/${n.id}`);x(r.data)}catch(r){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–µ–Ω—Ç—ã:",r),p(((c=(e=r.response)==null?void 0:e.data)==null?void 0:c.error)||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ª–µ–Ω—Ç—É")}finally{N(!1)}};s.useEffect(()=>{o()},[n]),s.useEffect(()=>{const e=setInterval(()=>{o()},3e4);return()=>clearInterval(e)},[n]);const f=()=>{o()};return t.jsx(w,{children:t.jsxs("div",{className:a.feedPage,children:[t.jsx("div",{className:a.header,children:t.jsx("h1",{className:a.title,children:"üì∞ –õ–µ–Ω—Ç–∞ –¥—Ä—É–∑–µ–π"})}),y&&l.length===0?t.jsx("div",{className:a.loading,children:t.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –ª–µ–Ω—Ç—ã..."})}):h?t.jsxs("div",{className:a.error,children:[t.jsxs("p",{children:["‚ùå ",h]}),t.jsx("button",{className:a.retryButton,onClick:o,children:"–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞"})]}):l.length===0?t.jsxs("div",{className:a.emptyState,children:[t.jsx("p",{className:a.emptyIcon,children:"üì≠"}),t.jsx("h2",{children:"–õ–µ–Ω—Ç–∞ –ø—É—Å—Ç–∞"}),t.jsx("p",{className:a.emptyHint,children:"–î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–¥–µ—Å—å"}),t.jsx("a",{href:"/friends",className:a.findFriendsButton,children:"–ù–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π"})]}):t.jsx("div",{className:a.postsList,children:l.map(e=>{var r,m,u,_;const c=(r=e.content)==null?void 0:r.startsWith("üì¢ –û–±—ä—è–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:");return t.jsxs("div",{className:a.postWrapper,children:[!c&&t.jsx("div",{className:a.postAuthor,children:t.jsxs("a",{href:`/user/${e.userId}`,className:a.authorLink,children:[t.jsx("div",{className:a.avatarContainer,children:(m=e.author)!=null&&m.avatarUrl?t.jsx("img",{src:e.author.avatarUrl.startsWith("http")?e.author.avatarUrl:`http://localhost:1313${e.author.avatarUrl}`,alt:e.author.displayName,className:a.authorAvatar,onError:i=>{var v;console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞:",i.target.src),i.target.style.display="none";const d=document.createElement("div");d.className=a.avatarPlaceholder,d.textContent=(((v=e.author)==null?void 0:v.displayName)||"U").charAt(0).toUpperCase(),i.target.parentElement.appendChild(d)}}):t.jsx("div",{className:a.avatarPlaceholder,children:(((u=e.author)==null?void 0:u.displayName)||"U").charAt(0).toUpperCase()})}),t.jsx("span",{className:a.authorName,children:((_=e.author)==null?void 0:_.displayName)||"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"})]})}),t.jsx(b,{post:e,isOwnProfile:!1,onReactionChange:f})]},e.id)})})]})})};export{T as default};
//# sourceMappingURL=FeedPage-DrSYJrkB.js.map
