{"version":3,"file":"mediaSlice-Cc1A5Hw2.js","sources":["../../src/store/slices/mediaSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api, { APIError, NetworkError } from '../../services/api';\r\n\r\nexport const searchMedia = createAsyncThunk(\r\n  'media/search',\r\n  async ({ query, filters }, { rejectWithValue }) => {\r\n    try {\r\n      const response = await api.get('/media/search', { params: { query, ...filters } });\r\n      return response.data;\r\n    } catch (error) {\r\n      if (error instanceof APIError) {\r\n        return rejectWithValue(error.data || error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        return rejectWithValue({ message: error.message });\r\n      }\r\n      return rejectWithValue({ message: 'Неизвестная ошибка' });\r\n    }\r\n  }\r\n);\r\n\r\nexport const getMediaDetails = createAsyncThunk(\r\n  'media/getDetails',\r\n  async ({ type, id }, { rejectWithValue }) => {\r\n    try {\r\n      const response = await api.get(`/media/${type}/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      if (error instanceof APIError) {\r\n        return rejectWithValue(error.data || error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        return rejectWithValue({ message: error.message });\r\n      }\r\n      return rejectWithValue({ message: 'Неизвестная ошибка' });\r\n    }\r\n  }\r\n);\r\n\r\nconst mediaSlice = createSlice({\r\n  name: 'media',\r\n  initialState: {\r\n    searchResults: [],\r\n    searchQuery: '',\r\n    selectedMedia: null,\r\n    loading: false,\r\n    error: null\r\n  },\r\n  reducers: {\r\n    clearSearch: (state) => {\r\n      state.searchResults = [];\r\n      state.searchQuery = '';\r\n    },\r\n    setSearchQuery: (state, action) => {\r\n      state.searchQuery = action.payload;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(searchMedia.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(searchMedia.fulfilled, (state, action) => {\r\n        state.searchResults = action.payload;\r\n        state.loading = false;\r\n      })\r\n      .addCase(searchMedia.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n      .addCase(getMediaDetails.fulfilled, (state, action) => {\r\n        state.selectedMedia = action.payload;\r\n      });\r\n  }\r\n});\r\n\r\nexport const { clearSearch, setSearchQuery } = mediaSlice.actions;\r\nexport default mediaSlice.reducer;\r\n"],"names":["searchMedia","createAsyncThunk","query","filters","rejectWithValue","api","error","APIError","NetworkError","getMediaDetails","type","id","mediaSlice","createSlice","state","action","builder","clearSearch","setSearchQuery"],"mappings":"+DAGY,MAACA,EAAcC,EACzB,eACA,MAAO,CAAE,MAAAC,EAAO,QAAAC,GAAW,CAAE,gBAAAC,CAAe,IAAO,CACjD,GAAI,CAEF,OADiB,MAAMC,EAAI,IAAI,gBAAiB,CAAE,OAAQ,CAAE,MAAAH,EAAO,GAAGC,CAAO,CAAE,CAAE,GACjE,IAClB,OAASG,EAAO,CACd,OAAIA,aAAiBC,EACZH,EAAgBE,EAAM,MAAQA,EAAM,OAAO,EACzCA,aAAiBE,EACnBJ,EAAgB,CAAE,QAASE,EAAM,OAAO,CAAE,EAE5CF,EAAgB,CAAE,QAAS,oBAAoB,CAAE,CAC1D,CACF,CACF,EAEaK,EAAkBR,EAC7B,mBACA,MAAO,CAAE,KAAAS,EAAM,GAAAC,GAAM,CAAE,gBAAAP,CAAe,IAAO,CAC3C,GAAI,CAEF,OADiB,MAAMC,EAAI,IAAI,UAAUK,CAAI,IAAIC,CAAE,EAAE,GACrC,IAClB,OAASL,EAAO,CACd,OAAIA,aAAiBC,EACZH,EAAgBE,EAAM,MAAQA,EAAM,OAAO,EACzCA,aAAiBE,EACnBJ,EAAgB,CAAE,QAASE,EAAM,OAAO,CAAE,EAE5CF,EAAgB,CAAE,QAAS,oBAAoB,CAAE,CAC1D,CACF,CACF,EAEMQ,EAAaC,EAAY,CAC7B,KAAM,QACN,aAAc,CACZ,cAAe,CAAA,EACf,YAAa,GACb,cAAe,KACf,QAAS,GACT,MAAO,IACX,EACE,SAAU,CACR,YAAcC,GAAU,CACtBA,EAAM,cAAgB,GACtBA,EAAM,YAAc,EACtB,EACA,eAAgB,CAACA,EAAOC,IAAW,CACjCD,EAAM,YAAcC,EAAO,OAC7B,CACJ,EACE,cAAgBC,GAAY,CAC1BA,EACG,QAAQhB,EAAY,QAAUc,GAAU,CACvCA,EAAM,QAAU,EAClB,CAAC,EACA,QAAQd,EAAY,UAAW,CAACc,EAAOC,IAAW,CACjDD,EAAM,cAAgBC,EAAO,QAC7BD,EAAM,QAAU,EAClB,CAAC,EACA,QAAQd,EAAY,SAAU,CAACc,EAAOC,IAAW,CAChDD,EAAM,QAAU,GAChBA,EAAM,MAAQC,EAAO,OACvB,CAAC,EACA,QAAQN,EAAgB,UAAW,CAACK,EAAOC,IAAW,CACrDD,EAAM,cAAgBC,EAAO,OAC/B,CAAC,CACL,CACF,CAAC,EAEY,CAAE,YAAAE,EAAa,eAAAC,CAAc,EAAKN,EAAW"}