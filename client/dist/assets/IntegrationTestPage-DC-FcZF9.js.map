{"version":3,"file":"IntegrationTestPage-DC-FcZF9.js","sources":["../../src/pages/IntegrationTestPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport api from '../services/api';\r\nimport styles from './IntegrationTestPage.module.css';\r\n\r\n/**\r\n * –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Frontend –∏ Backend\r\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ API endpoints\r\n */\r\nconst IntegrationTestPage = () => {\r\n  const [results, setResults] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const addResult = (endpoint, status, message, data = null) => {\r\n    setResults(prev => [...prev, {\r\n      endpoint,\r\n      status,\r\n      message,\r\n      data,\r\n      timestamp: new Date().toLocaleTimeString()\r\n    }]);\r\n  };\r\n\r\n  const clearResults = () => {\r\n    setResults([]);\r\n  };\r\n\r\n  // –¢–µ—Å—Ç 1: Health check\r\n  const testHealthCheck = async () => {\r\n    try {\r\n      const response = await api.get('/health');\r\n      addResult('GET /api/health', 'success', '–°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç', response.data);\r\n    } catch (error) {\r\n      addResult('GET /api/health', 'error', error.message);\r\n    }\r\n  };\r\n\r\n  // –¢–µ—Å—Ç 2: Auth - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (–±–µ–∑ —Ç–æ–∫–µ–Ω–∞)\r\n  const testAuthSession = async () => {\r\n    try {\r\n      const response = await api.get('/auth/session');\r\n      addResult('GET /api/auth/session', 'success', '–°–µ—Å—Å–∏—è –ø–æ–ª—É—á–µ–Ω–∞', response.data);\r\n    } catch (error) {\r\n      addResult('GET /api/auth/session', 'error', error.message);\r\n    }\r\n  };\r\n\r\n  // –¢–µ—Å—Ç 3: Media - –ø–æ–∏—Å–∫\r\n  const testMediaSearch = async () => {\r\n    try {\r\n      const response = await api.get('/media/search', {\r\n        params: { query: '–ú–∞—Ç—Ä–∏—Ü–∞', type: 'movie' }\r\n      });\r\n      addResult('GET /api/media/search', 'success', `–ù–∞–π–¥–µ–Ω–æ ${response.data.results?.length || 0} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤`, response.data);\r\n    } catch (error) {\r\n      addResult('GET /api/media/search', 'error', error.message);\r\n    }\r\n  };\r\n\r\n  // –¢–µ—Å—Ç 4: Lists - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)\r\n  const testGetLists = async () => {\r\n    try {\r\n      const response = await api.get('/lists');\r\n      addResult('GET /api/lists', 'success', `–ü–æ–ª—É—á–µ–Ω–æ ${response.data.length || 0} —Å–ø–∏—Å–∫–æ–≤`, response.data);\r\n    } catch (error) {\r\n      addResult('GET /api/lists', 'error', error.message);\r\n    }\r\n  };\r\n\r\n  // –¢–µ—Å—Ç 5: Watchlist - –ø–æ–ª—É—á–µ–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)\r\n  const testGetWatchlist = async () => {\r\n    try {\r\n      const response = await api.get('/watchlist');\r\n      addResult('GET /api/watchlist', 'success', `–ü–æ–ª—É—á–µ–Ω–æ ${response.data.length || 0} —ç–ª–µ–º–µ–Ω—Ç–æ–≤`, response.data);\r\n    } catch (error) {\r\n      addResult('GET /api/watchlist', 'error', error.message);\r\n    }\r\n  };\r\n\r\n  // –¢–µ—Å—Ç 6: Users - –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\r\n  const testSearchUsers = async () => {\r\n    try {\r\n      const response = await api.get('/users/search', {\r\n        params: { query: 'test' }\r\n      });\r\n      addResult('GET /api/users/search', 'success', `–ù–∞–π–¥–µ–Ω–æ ${response.data.length || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π`, response.data);\r\n    } catch (error) {\r\n      addResult('GET /api/users/search', 'error', error.message);\r\n    }\r\n  };\r\n\r\n  // –¢–µ—Å—Ç 7: Notifications - –ø–æ–ª—É—á–µ–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)\r\n  const testGetNotifications = async () => {\r\n    try {\r\n      const response = await api.get('/notifications');\r\n      addResult('GET /api/notifications', 'success', `–ü–æ–ª—É—á–µ–Ω–æ ${response.data.length || 0} —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π`, response.data);\r\n    } catch (error) {\r\n      addResult('GET /api/notifications', 'error', error.message);\r\n    }\r\n  };\r\n\r\n  // –¢–µ—Å—Ç 8: CORS - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤\r\n  const testCORS = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:1313/api/health', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      const data = await response.json();\r\n      addResult('CORS Test', 'success', 'CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ', data);\r\n    } catch (error) {\r\n      addResult('CORS Test', 'error', error.message);\r\n    }\r\n  };\r\n\r\n  // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤\r\n  const runAllTests = async () => {\r\n    setLoading(true);\r\n    clearResults();\r\n    \r\n    await testHealthCheck();\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n    \r\n    await testCORS();\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n    \r\n    await testMediaSearch();\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n    \r\n    await testAuthSession();\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n    \r\n    await testGetLists();\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n    \r\n    await testGetWatchlist();\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n    \r\n    await testSearchUsers();\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n    \r\n    await testGetNotifications();\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.header}>\r\n        <h1>üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Frontend ‚Üî Backend</h1>\r\n        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö API endpoints</p>\r\n      </div>\r\n\r\n      <div className={styles.controls}>\r\n        <button \r\n          onClick={runAllTests} \r\n          disabled={loading}\r\n          className={styles.btnPrimary}\r\n        >\r\n          {loading ? '‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...' : '‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã'}\r\n        </button>\r\n        <button \r\n          onClick={clearResults}\r\n          className={styles.btnSecondary}\r\n        >\r\n          üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã\r\n        </button>\r\n      </div>\r\n\r\n      <div className={styles.individualTests}>\r\n        <h3>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:</h3>\r\n        <div className={styles.testButtons}>\r\n          <button onClick={testHealthCheck}>Health Check</button>\r\n          <button onClick={testCORS}>CORS Test</button>\r\n          <button onClick={testMediaSearch}>Media Search</button>\r\n          <button onClick={testAuthSession}>Auth Session</button>\r\n          <button onClick={testGetLists}>Get Lists</button>\r\n          <button onClick={testGetWatchlist}>Get Watchlist</button>\r\n          <button onClick={testSearchUsers}>Search Users</button>\r\n          <button onClick={testGetNotifications}>Get Notifications</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.results}>\r\n        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ ({results.length}):</h3>\r\n        {results.length === 0 ? (\r\n          <p className={styles.noResults}>–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã.</p>\r\n        ) : (\r\n          <div className={styles.resultsList}>\r\n            {results.map((result, index) => (\r\n              <div \r\n                key={index} \r\n                className={`${styles.resultItem} ${styles[result.status]}`}\r\n              >\r\n                <div className={styles.resultHeader}>\r\n                  <span className={styles.endpoint}>{result.endpoint}</span>\r\n                  <span className={styles.timestamp}>{result.timestamp}</span>\r\n                  <span className={styles.status}>\r\n                    {result.status === 'success' ? '‚úÖ' : '‚ùå'}\r\n                  </span>\r\n                </div>\r\n                <div className={styles.resultMessage}>{result.message}</div>\r\n                {result.data && (\r\n                  <details className={styles.resultData}>\r\n                    <summary>–î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞</summary>\r\n                    <pre>{JSON.stringify(result.data, null, 2)}</pre>\r\n                  </details>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className={styles.info}>\r\n        <h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h3>\r\n        <ul>\r\n          <li>‚úÖ –ó–µ–ª–µ–Ω—ã–µ —Ç–µ—Å—Ç—ã - —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã</li>\r\n          <li>‚ùå –ö—Ä–∞—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã - –æ—à–∏–±–∫–∞ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è endpoints, —Ç—Ä–µ–±—É—é—â–∏—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)</li>\r\n          <li>üîí Endpoints —Å –∑–∞–º–∫–æ–º —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram</li>\r\n          <li>üåê CORS —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É cross-origin –∑–∞–ø—Ä–æ—Å–æ–≤</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IntegrationTestPage;\r\n"],"names":["IntegrationTestPage","results","setResults","useState","loading","setLoading","addResult","endpoint","status","message","data","prev","clearResults","testHealthCheck","response","api","error","testAuthSession","testMediaSearch","_a","testGetLists","testGetWatchlist","testSearchUsers","testGetNotifications","testCORS","runAllTests","resolve","jsxs","styles","jsx","result","index"],"mappings":"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"}