{"version":3,"file":"MediaDetailPage-D_RjRUYB.js","sources":["../../src/components/Media/EpisodeTracker.jsx","../../src/components/Media/RatingSelector.jsx","../../src/pages/MediaDetailPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport styles from './EpisodeTracker.module.css';\r\n\r\n/**\r\n * Компонент для отслеживания просмотренных серий сериала\r\n * Позволяет отмечать сезоны и серии как просмотренные\r\n */\r\nconst EpisodeTracker = ({ \r\n  seriesId, \r\n  seasons = [], \r\n  currentProgress = [], \r\n  onMarkWatched \r\n}) => {\r\n  const [expandedSeason, setExpandedSeason] = useState(null);\r\n\r\n  // Проверка, просмотрена ли серия\r\n  const isEpisodeWatched = (seasonNumber, episodeNumber) => {\r\n    return currentProgress.some(\r\n      p => p.seasonNumber === seasonNumber && p.episodeNumber === episodeNumber\r\n    );\r\n  };\r\n\r\n  // Получение последней просмотренной серии в сезоне\r\n  const getLastWatchedEpisode = (seasonNumber) => {\r\n    const seasonProgress = currentProgress\r\n      .filter(p => p.seasonNumber === seasonNumber)\r\n      .sort((a, b) => b.episodeNumber - a.episodeNumber);\r\n    \r\n    return seasonProgress.length > 0 ? seasonProgress[0].episodeNumber : 0;\r\n  };\r\n\r\n  // Подсчет просмотренных серий в сезоне\r\n  const getWatchedCount = (seasonNumber) => {\r\n    return currentProgress.filter(p => p.seasonNumber === seasonNumber).length;\r\n  };\r\n\r\n  // Переключение раскрытия сезона\r\n  const toggleSeason = (seasonNumber) => {\r\n    setExpandedSeason(expandedSeason === seasonNumber ? null : seasonNumber);\r\n  };\r\n\r\n  // Обработка клика на серию\r\n  const handleEpisodeClick = (seasonNumber, episodeNumber) => {\r\n    if (onMarkWatched) {\r\n      onMarkWatched(seasonNumber, episodeNumber);\r\n    }\r\n  };\r\n\r\n  // Отметить все серии сезона как просмотренные\r\n  const markSeasonWatched = (season) => {\r\n    if (!onMarkWatched) return;\r\n    \r\n    for (let ep = 1; ep <= season.episodeCount; ep++) {\r\n      if (!isEpisodeWatched(season.seasonNumber, ep)) {\r\n        onMarkWatched(season.seasonNumber, ep);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!seasons || seasons.length === 0) {\r\n    return (\r\n      <div className={styles.emptyState}>\r\n        <p>Информация о сезонах недоступна</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.episodeTracker}>\r\n      <h3 className={styles.title}>Прогресс просмотра</h3>\r\n      \r\n      <div className={styles.seasonsList}>\r\n        {seasons.map((season) => {\r\n          const watchedCount = getWatchedCount(season.seasonNumber);\r\n          const isExpanded = expandedSeason === season.seasonNumber;\r\n          const lastWatched = getLastWatchedEpisode(season.seasonNumber);\r\n          const progress = (watchedCount / season.episodeCount) * 100;\r\n\r\n          return (\r\n            <div key={season.seasonNumber} className={styles.seasonItem}>\r\n              <div \r\n                className={styles.seasonHeader}\r\n                onClick={() => toggleSeason(season.seasonNumber)}\r\n              >\r\n                <div className={styles.seasonInfo}>\r\n                  <h4 className={styles.seasonTitle}>\r\n                    {season.name || `Сезон ${season.seasonNumber}`}\r\n                  </h4>\r\n                  <span className={styles.seasonProgress}>\r\n                    {watchedCount} / {season.episodeCount} серий\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className={styles.seasonActions}>\r\n                  {watchedCount < season.episodeCount && (\r\n                    <button\r\n                      className={styles.markAllButton}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        markSeasonWatched(season);\r\n                      }}\r\n                      title=\"Отметить все серии\"\r\n                    >\r\n                      ✓ Все\r\n                    </button>\r\n                  )}\r\n                  <span className={styles.expandIcon}>\r\n                    {isExpanded ? '▼' : '▶'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Прогресс-бар */}\r\n              <div className={styles.progressBar}>\r\n                <div \r\n                  className={styles.progressFill}\r\n                  style={{ width: `${progress}%` }}\r\n                />\r\n              </div>\r\n\r\n              {/* Список серий */}\r\n              {isExpanded && (\r\n                <div className={styles.episodesList}>\r\n                  {Array.from({ length: season.episodeCount }, (_, i) => i + 1).map((episodeNumber) => {\r\n                    const watched = isEpisodeWatched(season.seasonNumber, episodeNumber);\r\n                    \r\n                    return (\r\n                      <button\r\n                        key={episodeNumber}\r\n                        className={`${styles.episodeButton} ${watched ? styles.watched : ''}`}\r\n                        onClick={() => handleEpisodeClick(season.seasonNumber, episodeNumber)}\r\n                        title={`Серия ${episodeNumber}`}\r\n                      >\r\n                        <span className={styles.episodeNumber}>{episodeNumber}</span>\r\n                        {watched && <span className={styles.checkmark}>✓</span>}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n\r\n              {/* Информация о последней просмотренной серии */}\r\n              {!isExpanded && lastWatched > 0 && (\r\n                <div className={styles.lastWatched}>\r\n                  Последняя: серия {lastWatched}\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EpisodeTracker;\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { addRating } from '../../store/slices/listsSlice';\r\nimport styles from './RatingSelector.module.css';\r\n\r\n/**\r\n * Компонент для выбора рейтинга от 1 до 10\r\n * При выставлении оценки автоматически создается запись на стене\r\n */\r\nconst RatingSelector = ({ media, currentRating = null, onRatingSet }) => {\r\n  const dispatch = useDispatch();\r\n  const [hoveredRating, setHoveredRating] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Обработка выбора рейтинга\r\n  const handleRatingClick = async (rating) => {\r\n    if (isSubmitting) return;\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      // Отправляем рейтинг на сервер\r\n      await dispatch(addRating({\r\n        tmdbId: media.tmdbId,\r\n        mediaType: media.mediaType,\r\n        rating\r\n      })).unwrap();\r\n\r\n      // Вызываем callback если передан\r\n      if (onRatingSet) {\r\n        onRatingSet(rating);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка при сохранении рейтинга:', error);\r\n      // Можно добавить отображение ошибки пользователю\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Определяем какой рейтинг показывать (текущий, наведенный или null)\r\n  const displayRating = hoveredRating || currentRating;\r\n\r\n  return (\r\n    <div className={styles.ratingSelector}>\r\n      <div className={styles.ratingLabel}>\r\n        Ваша оценка: {displayRating ? `${displayRating}/10` : 'не оценено'}\r\n      </div>\r\n      \r\n      <div className={styles.ratingButtons}>\r\n        {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((rating) => (\r\n          <button\r\n            key={rating}\r\n            className={`${styles.ratingButton} ${\r\n              displayRating && rating <= displayRating ? styles.active : ''\r\n            } ${currentRating === rating ? styles.selected : ''}`}\r\n            onClick={() => handleRatingClick(rating)}\r\n            onMouseEnter={() => setHoveredRating(rating)}\r\n            onMouseLeave={() => setHoveredRating(null)}\r\n            disabled={isSubmitting}\r\n            title={`Оценить на ${rating}`}\r\n          >\r\n            {rating}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {isSubmitting && (\r\n        <div className={styles.loadingIndicator}>\r\n          Сохранение...\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RatingSelector;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAppDispatch } from '../hooks/useAppDispatch';\r\nimport { useAppSelector } from '../hooks/useAppSelector';\r\nimport { getMediaDetails } from '../store/slices/mediaSlice';\r\nimport { \r\n  fetchLists, \r\n  addToList, \r\n  addToWatchlist,\r\n  fetchEpisodeProgress,\r\n  markEpisodeWatched\r\n} from '../store/slices/listsSlice';\r\nimport { EpisodeTracker, RatingSelector } from '../components/Media';\r\nimport styles from './MediaDetailPage.module.css';\r\n\r\n/**\r\n * Детальная страница медиа-контента\r\n * Отображает полную информацию о фильме/сериале\r\n * Позволяет добавлять в списки, оценивать, отслеживать прогресс\r\n */\r\nconst MediaDetailPage = () => {\r\n  const { mediaType, mediaId } = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useAppDispatch();\r\n\r\n  const { selectedMedia, loading: mediaLoading } = useAppSelector((state) => state.media);\r\n  const { customLists, episodeProgress, ratings } = useAppSelector((state) => state.lists);\r\n  const { user } = useAppSelector((state) => state.auth);\r\n\r\n  const [selectedListId, setSelectedListId] = useState('');\r\n  const [showListSelector, setShowListSelector] = useState(false);\r\n\r\n  // Загрузка данных при монтировании\r\n  useEffect(() => {\r\n    if (mediaType && mediaId) {\r\n      dispatch(getMediaDetails({ type: mediaType, id: mediaId }));\r\n      dispatch(fetchLists());\r\n      \r\n      // Для сериалов загружаем прогресс\r\n      if (mediaType === 'tv') {\r\n        dispatch(fetchEpisodeProgress(mediaId));\r\n      }\r\n    }\r\n  }, [dispatch, mediaType, mediaId]);\r\n\r\n  // Обработка добавления в список\r\n  const handleAddToList = async () => {\r\n    if (!selectedListId || !selectedMedia) return;\r\n\r\n    try {\r\n      await dispatch(addToList({\r\n        listId: selectedListId,\r\n        media: {\r\n          tmdbId: selectedMedia.id,\r\n          mediaType: selectedMedia.media_type || mediaType\r\n        }\r\n      })).unwrap();\r\n      \r\n      setShowListSelector(false);\r\n      setSelectedListId('');\r\n      alert('Добавлено в список!');\r\n    } catch (error) {\r\n      alert('Ошибка при добавлении в список');\r\n    }\r\n  };\r\n\r\n  // Обработка добавления в watchlist\r\n  const handleAddToWatchlist = async () => {\r\n    if (!selectedMedia) return;\r\n\r\n    try {\r\n      await dispatch(addToWatchlist({\r\n        tmdbId: selectedMedia.id,\r\n        mediaType: selectedMedia.media_type || mediaType\r\n      })).unwrap();\r\n      \r\n      alert('Добавлено в список желаемого!');\r\n    } catch (error) {\r\n      alert('Ошибка при добавлении в watchlist');\r\n    }\r\n  };\r\n\r\n  // Обработка отметки серии\r\n  const handleMarkWatched = async (seasonNumber, episodeNumber) => {\r\n    if (!selectedMedia) return;\r\n\r\n    try {\r\n      await dispatch(markEpisodeWatched({\r\n        tmdbId: selectedMedia.id,\r\n        seasonNumber,\r\n        episodeNumber\r\n      })).unwrap();\r\n    } catch (error) {\r\n      console.error('Ошибка при отметке серии:', error);\r\n    }\r\n  };\r\n\r\n  if (mediaLoading || !selectedMedia) {\r\n    return (\r\n      <div className={styles.loading}>\r\n        <p>Загрузка...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const backdropUrl = selectedMedia.backdrop_path\r\n    ? `https://image.tmdb.org/t/p/original${selectedMedia.backdrop_path}`\r\n    : null;\r\n\r\n  const posterUrl = selectedMedia.poster_path\r\n    ? `https://image.tmdb.org/t/p/w500${selectedMedia.poster_path}`\r\n    : '/default-poster.png';\r\n\r\n  const releaseYear = selectedMedia.release_date || selectedMedia.first_air_date\r\n    ? new Date(selectedMedia.release_date || selectedMedia.first_air_date).getFullYear()\r\n    : null;\r\n\r\n  // Фильтруем списки по типу медиа\r\n  const relevantLists = customLists.filter(\r\n    list => list.mediaType === (selectedMedia.media_type || mediaType)\r\n  );\r\n\r\n  const currentProgress = episodeProgress[mediaId] || [];\r\n  \r\n  // Получаем текущий рейтинг пользователя\r\n  const currentRating = ratings[mediaId] || null;\r\n\r\n  return (\r\n    <div className={styles.mediaDetailPage}>\r\n      {/* Фоновое изображение */}\r\n      {backdropUrl && (\r\n        <div \r\n          className={styles.backdrop}\r\n          style={{ backgroundImage: `url(${backdropUrl})` }}\r\n        />\r\n      )}\r\n\r\n      <div className={styles.content}>\r\n        <button className={styles.backButton} onClick={() => navigate(-1)}>\r\n          ← Назад\r\n        </button>\r\n\r\n        <div className={styles.mainInfo}>\r\n          {/* Постер */}\r\n          <div className={styles.posterSection}>\r\n            <img src={posterUrl} alt={selectedMedia.title || selectedMedia.name} className={styles.poster} />\r\n          </div>\r\n\r\n          {/* Информация */}\r\n          <div className={styles.infoSection}>\r\n            <h1 className={styles.title}>\r\n              {selectedMedia.title || selectedMedia.name}\r\n            </h1>\r\n\r\n            {selectedMedia.original_title && selectedMedia.original_title !== selectedMedia.title && (\r\n              <p className={styles.originalTitle}>\r\n                {selectedMedia.original_title || selectedMedia.original_name}\r\n              </p>\r\n            )}\r\n\r\n            <div className={styles.meta}>\r\n              <span className={styles.type}>\r\n                {(selectedMedia.media_type || mediaType) === 'movie' ? 'Фильм' : 'Сериал'}\r\n              </span>\r\n              {releaseYear && (\r\n                <>\r\n                  <span className={styles.separator}>•</span>\r\n                  <span>{releaseYear}</span>\r\n                </>\r\n              )}\r\n              {selectedMedia.vote_average > 0 && (\r\n                <>\r\n                  <span className={styles.separator}>•</span>\r\n                  <span className={styles.rating}>\r\n                    ★ {selectedMedia.vote_average.toFixed(1)}\r\n                  </span>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {selectedMedia.overview && (\r\n              <p className={styles.overview}>{selectedMedia.overview}</p>\r\n            )}\r\n\r\n            {/* Действия */}\r\n            <div className={styles.actions}>\r\n              <button \r\n                className={styles.actionButton}\r\n                onClick={() => setShowListSelector(!showListSelector)}\r\n              >\r\n                + Добавить в список\r\n              </button>\r\n\r\n              <button \r\n                className={styles.actionButton}\r\n                onClick={handleAddToWatchlist}\r\n              >\r\n                + В список желаемого\r\n              </button>\r\n            </div>\r\n\r\n            {/* Селектор списка */}\r\n            {showListSelector && (\r\n              <div className={styles.selector}>\r\n                <select \r\n                  value={selectedListId}\r\n                  onChange={(e) => setSelectedListId(e.target.value)}\r\n                  className={styles.select}\r\n                >\r\n                  <option value=\"\">Выберите список</option>\r\n                  {relevantLists.map(list => (\r\n                    <option key={list.id} value={list.id}>\r\n                      {list.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <button \r\n                  className={styles.confirmButton}\r\n                  onClick={handleAddToList}\r\n                  disabled={!selectedListId}\r\n                >\r\n                  Добавить\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Компонент рейтинга */}\r\n            <RatingSelector\r\n              media={{\r\n                tmdbId: selectedMedia.id,\r\n                mediaType: selectedMedia.media_type || mediaType,\r\n                title: selectedMedia.title || selectedMedia.name\r\n              }}\r\n              currentRating={currentRating}\r\n              onRatingSet={(rating) => {\r\n                alert(`Оценка ${rating}/10 сохранена и добавлена на стену!`);\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Трекер серий для сериалов */}\r\n        {(selectedMedia.media_type || mediaType) === 'tv' && selectedMedia.seasons && (\r\n          <div className={styles.episodeSection}>\r\n            <EpisodeTracker\r\n              seriesId={selectedMedia.id}\r\n              seasons={selectedMedia.seasons}\r\n              currentProgress={currentProgress}\r\n              onMarkWatched={handleMarkWatched}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaDetailPage;\r\n"],"names":["EpisodeTracker","seriesId","seasons","currentProgress","onMarkWatched","expandedSeason","setExpandedSeason","useState","isEpisodeWatched","seasonNumber","episodeNumber","p","getLastWatchedEpisode","seasonProgress","a","b","getWatchedCount","toggleSeason","handleEpisodeClick","markSeasonWatched","season","ep","jsx","styles","jsxs","watchedCount","isExpanded","lastWatched","progress","e","_","i","watched","RatingSelector","media","currentRating","onRatingSet","dispatch","useDispatch","hoveredRating","setHoveredRating","isSubmitting","setIsSubmitting","handleRatingClick","rating","addRating","error","displayRating","MediaDetailPage","mediaType","mediaId","useParams","navigate","useNavigate","useAppDispatch","selectedMedia","mediaLoading","useAppSelector","state","customLists","episodeProgress","ratings","user","selectedListId","setSelectedListId","showListSelector","setShowListSelector","useEffect","getMediaDetails","fetchLists","fetchEpisodeProgress","handleAddToList","addToList","handleAddToWatchlist","addToWatchlist","handleMarkWatched","markEpisodeWatched","backdropUrl","posterUrl","releaseYear","relevantLists","list","Fragment"],"mappings":"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"}