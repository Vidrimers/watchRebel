import{j as e,b as C,a as R,c as b,r as d,s as T,D as y,E as P,y as B}from"./index-CEQTVQWV.js";const E="_avatarContainer_qjq6q_1",U="_avatarImage_qjq6q_21",D="_avatarPlaceholder_qjq6q_33",u={avatarContainer:E,avatarImage:U,avatarPlaceholder:D,"avatar-small":"_avatar-small_qjq6q_57","avatar-medium":"_avatar-medium_qjq6q_69","avatar-large":"_avatar-large_qjq6q_81","avatar-xlarge":"_avatar-xlarge_qjq6q_93"},A="_banIndicator_1l2eb_1",S="_badge_1l2eb_33",F="_permanentBan_1l2eb_57",M="_postBan_1l2eb_67",Q="_details_1l2eb_77",W="_reason_1l2eb_99",z="_expires_1l2eb_121",p={banIndicator:A,badge:S,permanentBan:F,postBan:M,details:Q,reason:W,expires:z};function K({user:a}){if(!a)return null;const s=a.isBlocked,i=a.postBanUntil&&new Date(a.postBanUntil)>new Date;if(!s&&!i)return null;const _=h=>{const o=new Date(h),m=o-new Date;return m<60*60*1e3?`Ñ‡ÐµÑ€ÐµÐ· ${Math.floor(m/6e4)} Ð¼Ð¸Ð½`:m<24*60*60*1e3?`Ñ‡ÐµÑ€ÐµÐ· ${Math.floor(m/36e5)} Ñ‡`:m<7*24*60*60*1e3?`Ñ‡ÐµÑ€ÐµÐ· ${Math.floor(m/864e5)} Ð´Ð½`:o.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return e.jsxs("div",{className:p.banIndicator,children:[e.jsx("div",{className:`${p.badge} ${s?p.permanentBan:p.postBan}`,children:s?"â›” Ð—ÐÐ‘ÐÐÐ•Ð":"ðŸš« ÐŸÐžÐ¡Ð¢Ð« Ð—ÐÐŸÐ Ð•Ð©Ð•ÐÐ«"}),a.banReason&&e.jsxs("div",{className:p.details,children:[e.jsxs("div",{className:p.reason,children:[e.jsx("strong",{children:"ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:"})," ",a.banReason]}),i&&!s&&a.postBanUntil&&e.jsxs("div",{className:p.expires,children:[e.jsx("strong",{children:"Ð”Ð¾:"})," ",_(a.postBanUntil)]})]})]})}const Y=({user:a,size:s="medium",className:i="",showBanIndicator:_=!1})=>{var o;const h=u[`avatar-${s}`];return e.jsxs("div",{className:`${u.avatarContainer} ${h} ${i}`,children:[a!=null&&a.avatarUrl?e.jsx("img",{src:a.avatarUrl,alt:a.displayName||"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ",className:u.avatarImage}):e.jsx("div",{className:u.avatarPlaceholder,children:((o=a==null?void 0:a.displayName)==null?void 0:o.charAt(0).toUpperCase())||"?"}),_&&e.jsx(K,{user:a})]})},O="_errorInline_118it_211",G="_errorInlineIcon_118it_235",H="_errorInlineText_118it_243",J="_errorInlineClose_118it_251",j={errorInline:O,errorInlineIcon:G,errorInlineText:H,errorInlineClose:J},V=({error:a,onClose:s})=>{if(!a)return null;const i=typeof a=="string"?a:a.message||a.error||"ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°";return e.jsxs("div",{className:j.errorInline,role:"alert",children:[e.jsx("span",{className:j.errorInlineIcon,children:"âš ï¸"}),e.jsx("span",{className:j.errorInlineText,children:i}),s&&e.jsx("button",{onClick:s,className:j.errorInlineClose,"aria-label":"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",children:"Ã—"})]})},X="_searchContainer_15wdw_3",Z="_searchInput_15wdw_17",ee="_searchPreview_15wdw_61",ae="_previewLoading_15wdw_91",se="_previewEmpty_15wdw_105",ne="_previewList_15wdw_119",te="_previewItem_15wdw_133",re="_userResult_15wdw_165",ie="_userAvatar_15wdw_177",oe="_userInfo_15wdw_191",ce="_userName_15wdw_203",le="_userType_15wdw_215",de="_mediaResult_15wdw_227",me="_mediaPoster_15wdw_239",_e="_mediaInfo_15wdw_253",he="_mediaTitle_15wdw_265",pe="_mediaType_15wdw_277",ve="_previewFooter_15wdw_289",t={searchContainer:X,searchInput:Z,searchPreview:ee,previewLoading:ae,previewEmpty:se,previewList:ne,previewItem:te,userResult:re,userAvatar:ie,userInfo:oe,userName:ce,userType:le,mediaResult:de,mediaPoster:me,mediaInfo:_e,mediaTitle:he,mediaType:pe,previewFooter:ve},fe=()=>{const a=C(),s=R(),{searchResults:i,loading:_,error:h}=b(n=>n.media),[o,g]=d.useState(""),[m,c]=d.useState(!1),[w,k]=d.useState(""),x=d.useRef(null),f=d.useRef(null);d.useEffect(()=>(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{k(o)},300),()=>{f.current&&clearTimeout(f.current)}),[o]),d.useEffect(()=>{w.trim().length>0?(a(T({query:w,filters:{}})),c(!0)):c(!1)},[w,a]),d.useEffect(()=>{const n=v=>{x.current&&!x.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[]);const L=n=>{const v=n.target.value;g(v),a(P(v)),h&&a(y())},$=n=>{n.key==="Enter"&&o.trim()&&(c(!1),s(`/search?q=${encodeURIComponent(o)}`))},q=n=>{c(!1),n.type==="user"?s(`/user/${n.data.id}`):s(`/media/${n.data.mediaType}/${n.data.tmdbId}`)},I=Array.isArray(i)?i.slice(0,5):[];return e.jsxs("div",{className:t.searchContainer,ref:x,children:[e.jsx("input",{type:"text",placeholder:"ÐŸÐ¾Ð¸ÑÐº Ñ„Ð¸Ð»ÑŒÐ¼Ð¾Ð², ÑÐµÑ€Ð¸Ð°Ð»Ð¾Ð², Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹...",className:t.searchInput,value:o,onChange:L,onKeyDown:$,onFocus:()=>o.trim()&&c(!0)}),m&&o.trim()&&e.jsxs("div",{className:t.searchPreview,children:[h&&e.jsx("div",{className:t.previewError,children:e.jsx(V,{error:h,onClose:()=>a(y())})}),_?e.jsx("div",{className:t.previewLoading,children:e.jsx("span",{children:"ÐŸÐ¾Ð¸ÑÐº..."})}):I.length>0?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:t.previewList,children:I.map((n,v)=>e.jsx("li",{className:t.previewItem,onClick:()=>q(n),children:n.type==="user"?e.jsxs("div",{className:t.userResult,children:[e.jsx("img",{src:n.data.avatarUrl||"/default-avatar.png",alt:n.data.displayName,className:t.userAvatar}),e.jsxs("div",{className:t.userInfo,children:[e.jsx("span",{className:t.userName,children:n.data.displayName}),e.jsx("span",{className:t.userType,children:"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ"})]})]}):e.jsxs("div",{className:t.mediaResult,children:[e.jsx("img",{src:n.data.posterPath?`https://image.tmdb.org/t/p/w92${n.data.posterPath}`:"/default-poster.png",alt:n.data.title,className:t.mediaPoster}),e.jsxs("div",{className:t.mediaInfo,children:[e.jsx("span",{className:t.mediaTitle,children:n.data.title}),e.jsx("span",{className:t.mediaType,children:n.data.mediaType==="movie"?"Ð¤Ð¸Ð»ÑŒÐ¼":"Ð¡ÐµÑ€Ð¸Ð°Ð»"})]})]})},`${n.type}-${n.data.id||n.data.tmdbId}-${v}`))}),i.length>5&&e.jsxs("div",{className:t.previewFooter,onClick:()=>{c(!1),s(`/search?q=${encodeURIComponent(o)}`)},children:["ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð²ÑÐµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ (",i.length,")"]})]}):e.jsx("div",{className:t.previewEmpty,children:e.jsx("span",{children:"ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾"})})]})]})},ue="_badge_1nn9d_1",je={badge:ue},we=()=>{const a=C(),{unreadCount:s,loading:i}=b(_=>_.notifications);return d.useEffect(()=>{a(B())},[a]),s===0?null:e.jsx("span",{className:je.badge,"aria-label":`${s} Ð½ÐµÐ¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹`,children:s>99?"99+":s})},xe="_sidebar_t7jfw_3",Ne="_narrow_t7jfw_31",ge="_userInfo_t7jfw_41",Ie="_navLink_t7jfw_49",ye="_notificationsLink_t7jfw_51",Ce="_settingsLink_t7jfw_53",be="_userName_t7jfw_101",ke="_navigation_t7jfw_119",Le="_navList_t7jfw_133",$e="_navItem_t7jfw_151",qe="_notificationsContainer_t7jfw_191",Re="_settingsContainer_t7jfw_261",r={sidebar:xe,narrow:Ne,userInfo:ge,navLink:Ie,notificationsLink:ye,settingsLink:Ce,userName:be,navigation:ke,navList:Le,navItem:$e,notificationsContainer:qe,settingsContainer:Re},Te=({user:a,narrow:s=!1})=>e.jsxs("aside",{className:`${r.sidebar} ${s?r.narrow:""}`,children:[!s&&e.jsx(fe,{}),a&&e.jsxs("div",{className:r.userInfo,children:[e.jsx(Y,{user:a,size:s?"small":"medium"}),!s&&e.jsx("h2",{className:r.userName,children:a.displayName})]}),e.jsx("nav",{className:r.navigation,children:e.jsxs("ul",{className:r.navList,children:[e.jsx("li",{className:r.navItem,children:e.jsxs("a",{href:"/lists?type=movie",className:r.navLink,title:"ÐœÐ¾Ð¸ Ñ„Ð¸Ð»ÑŒÐ¼Ñ‹",children:["ðŸŽ¬ ",!s&&"ÐœÐ¾Ð¸ Ñ„Ð¸Ð»ÑŒÐ¼Ñ‹"]})}),e.jsx("li",{className:r.navItem,children:e.jsxs("a",{href:"/lists?type=tv",className:r.navLink,title:"ÐœÐ¾Ð¸ ÑÐµÑ€Ð¸Ð°Ð»Ñ‹",children:["ðŸ“º ",!s&&"ÐœÐ¾Ð¸ ÑÐµÑ€Ð¸Ð°Ð»Ñ‹"]})}),e.jsx("li",{className:r.navItem,children:e.jsxs("a",{href:"/watchlist",className:r.navLink,title:"Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¶ÐµÐ»Ð°ÐµÐ¼Ð¾Ð³Ð¾",children:["â­ ",!s&&"Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¶ÐµÐ»Ð°ÐµÐ¼Ð¾Ð³Ð¾"]})}),e.jsx("li",{className:r.navItem,children:e.jsxs("a",{href:"/friends",className:r.navLink,title:"Ð”Ñ€ÑƒÐ·ÑŒÑ",children:["ðŸ‘¥ ",!s&&"Ð”Ñ€ÑƒÐ·ÑŒÑ"]})})]})}),e.jsx("div",{className:r.notificationsContainer,children:e.jsxs("a",{href:"/notifications",className:r.notificationsLink,title:"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ",children:["ðŸ”” ",!s&&"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ",e.jsx(we,{})]})}),e.jsx("div",{className:r.settingsContainer,children:e.jsxs("a",{href:"/settings",className:r.settingsLink,title:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",children:["âš™ï¸ ",!s&&"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"]})})]}),Pe="_footer_195rk_3",Be="_footerContent_195rk_17",Ee="_copyright_195rk_35",Ue="_links_195rk_49",De="_link_195rk_49",Ae="_separator_195rk_87",l={footer:Pe,footerContent:Be,copyright:Ee,links:Ue,link:De,separator:Ae},Se=()=>{const a=new Date().getFullYear();return e.jsx("footer",{className:l.footer,children:e.jsxs("div",{className:l.footerContent,children:[e.jsxs("p",{className:l.copyright,children:["Â© ",a," watchRebel. Ð¡Ð¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐµÑ‚ÑŒ Ð´Ð»Ñ Ð»ÑŽÐ±Ð¸Ñ‚ÐµÐ»ÐµÐ¹ ÐºÐ¸Ð½Ð¾."]}),e.jsxs("div",{className:l.links,children:[e.jsx("a",{href:"/about",className:l.link,children:"Ðž Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ"}),e.jsx("span",{className:l.separator,children:"â€¢"}),e.jsx("a",{href:"/privacy",className:l.link,children:"ÐšÐ¾Ð½Ñ„Ð¸Ð´ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ"}),e.jsx("span",{className:l.separator,children:"â€¢"}),e.jsx("a",{href:"/terms",className:l.link,children:"Ð£ÑÐ»Ð¾Ð²Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ"})]})]})})},Fe="_pageContainer_pdvjh_3",Me="_contentWrapper_pdvjh_19",Qe="_mainContent_pdvjh_41",N={pageContainer:Fe,contentWrapper:Me,mainContent:Qe},ze=({children:a,user:s,narrowSidebar:i=!1})=>e.jsxs("div",{className:N.pageContainer,children:[e.jsxs("div",{className:N.contentWrapper,children:[e.jsx("main",{className:N.mainContent,children:a}),e.jsx(Te,{user:s,narrow:i})]}),e.jsx(Se,{})]});export{ze as U,Y as a};
//# sourceMappingURL=UserPageLayout-CtsYCYaS.js.map
