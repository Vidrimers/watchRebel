import{b as H,u as L,c as x,r as h,w as C,m as S,j as e,p as B}from"./index-4ubAi2p8.js";import{U as I}from"./UserPageLayout-DMyqoeev.js";import{M}from"./MediaCard-CBfeFXmC.js";const P="_watchlistPage_xm84q_1",w="_pageHeader_xm84q_9",k="_pageTitle_xm84q_27",W="_filterButtons_xm84q_43",$="_filterButton_xm84q_43",G="_active_xm84q_97",A="_countInfo_xm84q_111",E="_loadingContainer_xm84q_143",F="_errorMessage_xm84q_145",U="_errorContainer_xm84q_181",D="_emptyState_xm84q_201",R="_emptyIcon_xm84q_217",z="_emptyTitle_xm84q_229",J="_emptyHint_xm84q_243",K="_mediaGrid_xm84q_257",Q="_mediaCardWrapper_xm84q_271",V="_moveButton_xm84q_279",X="_modalOverlay_xm84q_329",Y="_modal_xm84q_329",Z="_modalHeader_xm84q_403",ee="_modalTitle_xm84q_419",te="_modalClose_xm84q_433",se="_modalContent_xm84q_477",ae="_modalSubtitle_xm84q_489",ne="_listOptions_xm84q_503",le="_listOption_xm84q_503",ie="_listOptionName_xm84q_553",oe="_listOptionCount_xm84q_565",ce="_noLists_xm84q_583",re="_noListsHint_xm84q_605",t={watchlistPage:P,pageHeader:w,pageTitle:k,filterButtons:W,filterButton:$,active:G,countInfo:A,loadingContainer:E,errorMessage:F,errorContainer:U,emptyState:D,emptyIcon:R,emptyTitle:z,emptyHint:J,mediaGrid:K,mediaCardWrapper:Q,moveButton:V,modalOverlay:X,modal:Y,modalHeader:Z,modalTitle:ee,modalClose:te,modalContent:se,modalSubtitle:ae,listOptions:ne,listOption:le,listOptionName:ie,listOptionCount:oe,noLists:ce,noListsHint:re},pe=()=>{const i=H(),[N,f]=L(),{user:y,isAuthenticated:r}=x(s=>s.auth),{watchlist:u,customLists:q,loading:d,error:c}=x(s=>s.lists),{episodeProgress:j}=x(s=>s.lists),o=N.get("type")||"all",[O,m]=h.useState(!1),[a,_]=h.useState(null);h.useEffect(()=>{r&&(i(C()),i(S()))},[r,i]);const l=o==="all"?u:u.filter(s=>s.mediaType===o),p=s=>{f(s==="all"?{}:{type:s})},T=s=>{_(s),m(!0)},b=async s=>{if(a)try{await i(B({listId:s,media:{tmdbId:a.tmdbId,mediaType:a.mediaType}})).unwrap(),m(!1),_(null),i(C())}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –≤ —Å–ø–∏—Å–æ–∫:",n)}},v=()=>{m(!1),_(null)},g=a?q.filter(s=>s.mediaType===a.mediaType):[];return r?e.jsx(I,{user:y,children:e.jsxs("div",{className:t.watchlistPage,children:[e.jsxs("div",{className:t.pageHeader,children:[e.jsx("h1",{className:t.pageTitle,children:"–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–µ–º–æ–≥–æ"}),e.jsxs("div",{className:t.filterButtons,children:[e.jsx("button",{className:`${t.filterButton} ${o==="all"?t.active:""}`,onClick:()=>p("all"),children:"–í—Å–µ"}),e.jsx("button",{className:`${t.filterButton} ${o==="movie"?t.active:""}`,onClick:()=>p("movie"),children:"üé¨ –§–∏–ª—å–º—ã"}),e.jsx("button",{className:`${t.filterButton} ${o==="tv"?t.active:""}`,onClick:()=>p("tv"),children:"üì∫ –°–µ—Ä–∏–∞–ª—ã"})]})]}),!d&&!c&&e.jsx("div",{className:t.countInfo,children:e.jsxs("p",{children:[l.length," "," ",l.length===1?"—ç–ª–µ–º–µ–Ω—Ç":l.length>1&&l.length<5?"—ç–ª–µ–º–µ–Ω—Ç–∞":"—ç–ª–µ–º–µ–Ω—Ç–æ–≤"]})}),d&&e.jsx("div",{className:t.loadingContainer,children:e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∂–µ–ª–∞–µ–º–æ–≥–æ..."})}),c&&e.jsx("div",{className:t.errorMessage,children:e.jsxs("p",{children:["–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ",c.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"]})}),!d&&!c&&e.jsx(e.Fragment,{children:l.length===0?e.jsxs("div",{className:t.emptyState,children:[e.jsx("div",{className:t.emptyIcon,children:"üìã"}),e.jsx("p",{className:t.emptyTitle,children:"–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–µ–º–æ–≥–æ –ø—É—Å—Ç"}),e.jsx("p",{className:t.emptyHint,children:"–î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"})]}):e.jsx("div",{className:t.mediaGrid,children:l.map(s=>{var n;return e.jsxs("div",{className:t.mediaCardWrapper,children:[e.jsx(M,{media:s,showProgress:s.mediaType==="tv",progress:(n=j[s.tmdbId])==null?void 0:n[j[s.tmdbId].length-1]}),e.jsx("button",{className:t.moveButton,onClick:()=>T(s),title:"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",children:"‚Üí –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫"})]},s.tmdbId)})})}),O&&a&&e.jsx("div",{className:t.modalOverlay,onClick:v,children:e.jsxs("div",{className:t.modal,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:t.modalHeader,children:[e.jsx("h2",{className:t.modalTitle,children:"–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫"}),e.jsx("button",{className:t.modalClose,onClick:v,children:"√ó"})]}),e.jsxs("div",{className:t.modalContent,children:[e.jsxs("p",{className:t.modalSubtitle,children:['–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å "',a.title,'" –≤:']}),g.length===0?e.jsxs("div",{className:t.noLists,children:[e.jsxs("p",{children:["–£ –≤–∞—Å –Ω–µ—Ç —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è ",a.mediaType==="movie"?"—Ñ–∏–ª—å–º–æ–≤":"—Å–µ—Ä–∏–∞–ª–æ–≤"]}),e.jsx("p",{className:t.noListsHint,children:'–°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ú–æ–∏ —Å–ø–∏—Å–∫–∏"'})]}):e.jsx("div",{className:t.listOptions,children:g.map(s=>{var n;return e.jsxs("button",{className:t.listOption,onClick:()=>b(s.id),children:[e.jsx("span",{className:t.listOptionName,children:s.name}),e.jsxs("span",{className:t.listOptionCount,children:[((n=s.items)==null?void 0:n.length)||0," —ç–ª–µ–º–µ–Ω—Ç–æ–≤"]})]},s.id)})})]})]})})]})}):e.jsx("div",{className:t.errorContainer,children:e.jsx("p",{children:"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"})})};export{pe as default};
//# sourceMappingURL=WatchlistPage-BfQzGk7G.js.map
