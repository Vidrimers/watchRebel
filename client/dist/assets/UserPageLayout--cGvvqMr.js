import{j as e,b as $,a as P,c as L,r as _,s as E,L as b,M as A,A as w,N as I}from"./index-BDVNw2dN.js";const D="_avatarContainer_qjq6q_1",S="_avatarImage_qjq6q_21",W="_avatarPlaceholder_qjq6q_33",x={avatarContainer:D,avatarImage:S,avatarPlaceholder:W,"avatar-small":"_avatar-small_qjq6q_57","avatar-medium":"_avatar-medium_qjq6q_69","avatar-large":"_avatar-large_qjq6q_81","avatar-xlarge":"_avatar-xlarge_qjq6q_93"},F="_banIndicator_1l2eb_1",M="_badge_1l2eb_33",Q="_permanentBan_1l2eb_57",z="_postBan_1l2eb_67",K="_details_1l2eb_77",Y="_reason_1l2eb_99",O="_expires_1l2eb_121",p={banIndicator:F,badge:M,permanentBan:Q,postBan:z,details:K,reason:Y,expires:O};function G({user:a}){if(!a)return null;const s=a.isBlocked,i=a.postBanUntil&&new Date(a.postBanUntil)>new Date;if(!s&&!i)return null;const d=h=>{const o=new Date(h),c=o-new Date;return c<60*60*1e3?`Ñ‡ÐµÑ€ÐµÐ· ${Math.floor(c/6e4)} Ð¼Ð¸Ð½`:c<24*60*60*1e3?`Ñ‡ÐµÑ€ÐµÐ· ${Math.floor(c/36e5)} Ñ‡`:c<7*24*60*60*1e3?`Ñ‡ÐµÑ€ÐµÐ· ${Math.floor(c/864e5)} Ð´Ð½`:o.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return e.jsxs("div",{className:p.banIndicator,children:[e.jsx("div",{className:`${p.badge} ${s?p.permanentBan:p.postBan}`,children:s?"â›” Ð—ÐÐ‘ÐÐÐ•Ð":"ðŸš« ÐŸÐžÐ¡Ð¢Ð« Ð—ÐÐŸÐ Ð•Ð©Ð•ÐÐ«"}),a.banReason&&e.jsxs("div",{className:p.details,children:[e.jsxs("div",{className:p.reason,children:[e.jsx("strong",{children:"ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:"})," ",a.banReason]}),i&&!s&&a.postBanUntil&&e.jsxs("div",{className:p.expires,children:[e.jsx("strong",{children:"Ð”Ð¾:"})," ",d(a.postBanUntil)]})]})]})}const H=({user:a,size:s="medium",className:i="",showBanIndicator:d=!1})=>{var c;const h=x[`avatar-${s}`],v=a!=null&&a.avatarUrl?a.avatarUrl.startsWith("/uploads/")?`http://localhost:1313${a.avatarUrl}`:a.avatarUrl:null;return e.jsxs("div",{className:`${x.avatarContainer} ${h} ${i}`,children:[v?e.jsx("img",{src:v,alt:a.displayName||"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ",className:x.avatarImage}):e.jsx("div",{className:x.avatarPlaceholder,children:((c=a==null?void 0:a.displayName)==null?void 0:c.charAt(0).toUpperCase())||"?"}),d&&e.jsx(G,{user:a})]})},J="_errorInline_118it_211",V="_errorInlineIcon_118it_235",X="_errorInlineText_118it_243",Z="_errorInlineClose_118it_251",j={errorInline:J,errorInlineIcon:V,errorInlineText:X,errorInlineClose:Z},ee=({error:a,onClose:s})=>{if(!a)return null;const i=typeof a=="string"?a:a.message||a.error||"ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°";return e.jsxs("div",{className:j.errorInline,role:"alert",children:[e.jsx("span",{className:j.errorInlineIcon,children:"âš ï¸"}),e.jsx("span",{className:j.errorInlineText,children:i}),s&&e.jsx("button",{onClick:s,className:j.errorInlineClose,"aria-label":"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",children:"Ã—"})]})},ae="_searchContainer_1h2ou_3",se="_searchInputWrapper_1h2ou_17",te="_searchInput_1h2ou_17",ne="_searchButton_1h2ou_57",re="_searchPreview_1h2ou_131",ie="_previewLoading_1h2ou_161",oe="_previewEmpty_1h2ou_175",ce="_previewList_1h2ou_189",le="_previewItem_1h2ou_203",de="_userResult_1h2ou_235",me="_userAvatar_1h2ou_247",_e="_userInfo_1h2ou_261",he="_userName_1h2ou_273",pe="_userType_1h2ou_285",ue="_mediaResult_1h2ou_297",ve="_mediaPoster_1h2ou_309",fe="_mediaInfo_1h2ou_323",xe="_mediaTitle_1h2ou_335",je="_mediaType_1h2ou_347",ge="_previewFooter_1h2ou_359",r={searchContainer:ae,searchInputWrapper:se,searchInput:te,searchButton:ne,searchPreview:re,previewLoading:ie,previewEmpty:oe,previewList:ce,previewItem:le,userResult:de,userAvatar:me,userInfo:_e,userName:he,userType:pe,mediaResult:ue,mediaPoster:ve,mediaInfo:fe,mediaTitle:xe,mediaType:je,previewFooter:ge},Ne=()=>{const a=$(),s=P(),{searchResults:i,loading:d,error:h}=L(t=>t.media),[o,v]=_.useState(""),[c,l]=_.useState(!1),[g,q]=_.useState(""),N=_.useRef(null),f=_.useRef(null);_.useEffect(()=>(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{q(o)},300),()=>{f.current&&clearTimeout(f.current)}),[o]),_.useEffect(()=>{g.trim().length>0?(a(E({query:g,filters:{}})),l(!0)):l(!1)},[g,a]),_.useEffect(()=>{const t=u=>{N.current&&!N.current.contains(u.target)&&l(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const B=t=>{const u=t.target.value;v(u),a(A(u)),h&&a(b())},R=t=>{t.key==="Enter"&&o.trim()&&(l(!1),s(`/search?q=${encodeURIComponent(o)}`))},T=t=>{l(!1),t.type==="user"?s(`/user/${t.data.id}`):s(`/media/${t.data.mediaType}/${t.data.tmdbId}`)},C=Array.isArray(i)?i.slice(0,5):[],U=()=>{l(!1),o.trim()?s(`/search?q=${encodeURIComponent(o)}`):s("/search")};return e.jsxs("div",{className:r.searchContainer,ref:N,children:[e.jsxs("div",{className:r.searchInputWrapper,children:[e.jsx("input",{type:"text",placeholder:"ÐŸÐ¾Ð¸ÑÐº",className:r.searchInput,value:o,onChange:B,onKeyDown:R,onFocus:()=>o.trim()&&l(!0)}),e.jsx("button",{className:r.searchButton,onClick:U,title:"ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº","aria-label":"ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº",children:"ðŸ”"})]}),c&&o.trim()&&e.jsxs("div",{className:r.searchPreview,children:[h&&e.jsx("div",{className:r.previewError,children:e.jsx(ee,{error:h,onClose:()=>a(b())})}),d?e.jsx("div",{className:r.previewLoading,children:e.jsx("span",{children:"ÐŸÐ¾Ð¸ÑÐº..."})}):C.length>0?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:r.previewList,children:C.map((t,u)=>{var k;return e.jsx("li",{className:r.previewItem,onClick:()=>T(t),children:t.type==="user"?e.jsxs("div",{className:r.userResult,children:[e.jsx("img",{src:(k=t.data.avatarUrl)!=null&&k.startsWith("/uploads/")?`http://localhost:1313${t.data.avatarUrl}`:t.data.avatarUrl||"/default-avatar.png",alt:t.data.displayName,className:r.userAvatar}),e.jsxs("div",{className:r.userInfo,children:[e.jsx("span",{className:r.userName,children:t.data.displayName}),e.jsx("span",{className:r.userType,children:"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ"})]})]}):e.jsxs("div",{className:r.mediaResult,children:[e.jsx("img",{src:t.data.posterPath?`https://image.tmdb.org/t/p/w92${t.data.posterPath}`:"/default-poster.png",alt:t.data.title,className:r.mediaPoster}),e.jsxs("div",{className:r.mediaInfo,children:[e.jsx("span",{className:r.mediaTitle,children:t.data.title}),e.jsx("span",{className:r.mediaType,children:t.data.mediaType==="movie"?"Ð¤Ð¸Ð»ÑŒÐ¼":"Ð¡ÐµÑ€Ð¸Ð°Ð»"})]})]})},`${t.type}-${t.data.id||t.data.tmdbId}-${u}`)})}),i.length>5&&e.jsxs("div",{className:r.previewFooter,onClick:()=>{l(!1),s(`/search?q=${encodeURIComponent(o)}`)},children:["ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð²ÑÐµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ (",i.length,")"]})]}):e.jsx("div",{className:r.previewEmpty,children:e.jsx("span",{children:"ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾"})})]})]})},Ie="_badge_1nn9d_1",ye={badge:Ie},Ce=()=>{const a=$(),{unreadCount:s,loading:i}=L(d=>d.notifications);return _.useEffect(()=>{a(w());const d=setInterval(()=>{a(w())},3e4);return()=>clearInterval(d)},[a]),s===0?null:e.jsx("span",{className:ye.badge,"aria-label":`${s} Ð½ÐµÐ¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹`,children:s>99?"99+":s})},ke="_sidebar_g0stl_3",be="_narrow_g0stl_31",we="_userInfo_g0stl_41",$e="_navLink_g0stl_49",Le="_notificationsLink_g0stl_51",qe="_settingsLink_g0stl_53",Be="_userName_g0stl_101",Re="_navigation_g0stl_119",Te="_navList_g0stl_135",Ue="_navItem_g0stl_153",Pe="_notificationsContainer_g0stl_193",Ee="_settingsContainer_g0stl_265",n={sidebar:ke,narrow:be,userInfo:we,navLink:$e,notificationsLink:Le,settingsLink:qe,userName:Be,navigation:Re,navList:Te,navItem:Ue,notificationsContainer:Pe,settingsContainer:Ee},Ae=({user:a,narrow:s=!1})=>e.jsxs("aside",{className:`${n.sidebar} ${s?n.narrow:""}`,children:[!s&&e.jsx(Ne,{}),a&&e.jsxs("div",{className:n.userInfo,children:[e.jsx(H,{user:a,size:s?"small":"medium"}),!s&&e.jsx("h2",{className:n.userName,children:a.displayName})]}),e.jsx("nav",{className:n.navigation,children:e.jsxs("ul",{className:n.navList,children:[e.jsx("li",{className:n.navItem,children:e.jsxs("a",{href:"/",className:n.navLink,title:"Ð“Ð»Ð°Ð²Ð½Ð°Ñ",children:["ðŸ  ",!s&&"Ð“Ð»Ð°Ð²Ð½Ð°Ñ"]})}),e.jsx("li",{className:n.navItem,children:e.jsxs("a",{href:"/messages",className:n.navLink,title:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ",children:["ðŸ’¬ ",!s&&"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ"]})}),e.jsx("li",{className:n.navItem,children:e.jsxs("a",{href:"/lists?type=movie",className:n.navLink,title:"ÐœÐ¾Ð¸ Ñ„Ð¸Ð»ÑŒÐ¼Ñ‹",children:["ðŸŽ¬ ",!s&&"ÐœÐ¾Ð¸ Ñ„Ð¸Ð»ÑŒÐ¼Ñ‹"]})}),e.jsx("li",{className:n.navItem,children:e.jsxs("a",{href:"/lists?type=tv",className:n.navLink,title:"ÐœÐ¾Ð¸ ÑÐµÑ€Ð¸Ð°Ð»Ñ‹",children:["ðŸ“º ",!s&&"ÐœÐ¾Ð¸ ÑÐµÑ€Ð¸Ð°Ð»Ñ‹"]})}),e.jsx("li",{className:n.navItem,children:e.jsxs("a",{href:"/watchlist",className:n.navLink,title:"Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¶ÐµÐ»Ð°ÐµÐ¼Ð¾Ð³Ð¾",children:["â­ ",!s&&"Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¶ÐµÐ»Ð°ÐµÐ¼Ð¾Ð³Ð¾"]})}),e.jsx("li",{className:n.navItem,children:e.jsxs("a",{href:"/friends",className:n.navLink,title:"Ð”Ñ€ÑƒÐ·ÑŒÑ",children:["ðŸ‘¥ ",!s&&"Ð”Ñ€ÑƒÐ·ÑŒÑ"]})})]})}),e.jsx("div",{className:n.notificationsContainer,children:e.jsxs("a",{href:"/notifications",className:n.notificationsLink,title:"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ",children:["ðŸ”” ",!s&&"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ",e.jsx(Ce,{})]})}),e.jsx("div",{className:n.settingsContainer,children:e.jsxs("a",{href:"/settings",className:n.settingsLink,title:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",children:["âš™ï¸ ",!s&&"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"]})})]}),De="_footer_195rk_3",Se="_footerContent_195rk_17",We="_copyright_195rk_35",Fe="_links_195rk_49",Me="_link_195rk_49",Qe="_separator_195rk_87",m={footer:De,footerContent:Se,copyright:We,links:Fe,link:Me,separator:Qe},ze=()=>{const a=new Date().getFullYear();return e.jsx("footer",{className:m.footer,children:e.jsxs("div",{className:m.footerContent,children:[e.jsxs("p",{className:m.copyright,children:["Â© ",a," watchRebel. Ð¡Ð¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐµÑ‚ÑŒ Ð´Ð»Ñ Ð»ÑŽÐ±Ð¸Ñ‚ÐµÐ»ÐµÐ¹ ÐºÐ¸Ð½Ð¾."]}),e.jsxs("div",{className:m.links,children:[e.jsx(I,{to:"/about",className:m.link,children:"Ðž Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ"}),e.jsx("span",{className:m.separator,children:"â€¢"}),e.jsx(I,{to:"/privacy",className:m.link,children:"ÐšÐ¾Ð½Ñ„Ð¸Ð´ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ"}),e.jsx("span",{className:m.separator,children:"â€¢"}),e.jsx(I,{to:"/terms",className:m.link,children:"Ð£ÑÐ»Ð¾Ð²Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ"})]})]})})},Ke="_pageContainer_pdvjh_3",Ye="_contentWrapper_pdvjh_19",Oe="_mainContent_pdvjh_41",y={pageContainer:Ke,contentWrapper:Ye,mainContent:Oe},He=({children:a,user:s,narrowSidebar:i=!1})=>e.jsxs("div",{className:y.pageContainer,children:[e.jsxs("div",{className:y.contentWrapper,children:[e.jsx("main",{className:y.mainContent,children:a}),e.jsx(Ae,{user:s,narrow:i})]}),e.jsx(ze,{})]});export{He as U,H as a};
//# sourceMappingURL=UserPageLayout--cGvvqMr.js.map
