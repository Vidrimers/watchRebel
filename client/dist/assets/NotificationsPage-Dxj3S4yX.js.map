{"version":3,"file":"NotificationsPage-Dxj3S4yX.js","sources":["../../src/components/Notifications/NotificationList.jsx","../../src/pages/NotificationsPage.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useAppSelector } from '../../hooks/useAppSelector';\r\nimport { useAppDispatch } from '../../hooks/useAppDispatch';\r\nimport { fetchNotifications, markAsRead, markAllAsRead } from '../../store/slices/notificationsSlice';\r\nimport styles from './NotificationList.module.css';\r\n\r\n/**\r\n * –°–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∞–∫—Ü–∏—è—Ö –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥—Ä—É–∑–µ–π\r\n */\r\nconst NotificationList = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { notifications, loading, unreadCount } = useAppSelector((state) => state.notifications);\r\n\r\n  // –ó–∞–≥—Ä—É–∂–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞\r\n  useEffect(() => {\r\n    dispatch(fetchNotifications());\r\n  }, [dispatch]);\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–≤–µ–¥–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\r\n  const handleNotificationHover = (notification) => {\r\n    if (!notification.isRead) {\r\n      dispatch(markAsRead(notification.id));\r\n    }\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—é\r\n  const handleNotificationClick = (notification) => {\r\n    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–≤—è–∑–∞–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É\r\n    if (notification.relatedPostId) {\r\n      // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø–æ—Å—Ç—É –Ω–∞ —Å—Ç–µ–Ω–µ\r\n      window.location.href = `/profile/${notification.userId}#post-${notification.relatedPostId}`;\r\n    } else if (notification.relatedUserId) {\r\n      // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–æ—Ñ–∏–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n      window.location.href = `/profile/${notification.relatedUserId}`;\r\n    }\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–º–µ—Ç–∫–∏ –≤—Å–µ—Ö –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ\r\n  const handleMarkAllAsRead = () => {\r\n    dispatch(markAllAsRead());\r\n  };\r\n\r\n  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now - date;\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMs / 3600000);\r\n    const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n    if (diffMins < 1) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';\r\n    if (diffMins < 60) return `${diffMins} –º–∏–Ω –Ω–∞–∑–∞–¥`;\r\n    if (diffHours < 24) return `${diffHours} —á –Ω–∞–∑–∞–¥`;\r\n    if (diffDays < 7) return `${diffDays} –¥–Ω –Ω–∞–∑–∞–¥`;\r\n    \r\n    return date.toLocaleDateString('ru-RU', { \r\n      day: 'numeric', \r\n      month: 'short',\r\n      year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\r\n    });\r\n  };\r\n\r\n  // –ò–∫–æ–Ω–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\r\n  const getNotificationIcon = (type) => {\r\n    switch (type) {\r\n      case 'reaction':\r\n        return '‚ù§Ô∏è';\r\n      case 'friend_activity':\r\n        return 'üë§';\r\n      default:\r\n        return 'üîî';\r\n    }\r\n  };\r\n\r\n  if (loading && notifications.length === 0) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.loading}>–ó–∞–≥—Ä—É–∑–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (notifications.length === 0) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.empty}>\r\n          <span className={styles.emptyIcon}>üîî</span>\r\n          <p>–ü–æ–∫–∞ –Ω–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.header}>\r\n        <h2 className={styles.title}>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>\r\n        {unreadCount > 0 && (\r\n          <button \r\n            className={styles.markAllButton}\r\n            onClick={handleMarkAllAsRead}\r\n            title=\"–ü–æ–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ\"\r\n          >\r\n            –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ\r\n          </button>\r\n        )}\r\n      </div>\r\n      \r\n      <ul className={styles.list}>\r\n        {notifications.map((notification) => (\r\n          <li\r\n            key={notification.id}\r\n            className={`${styles.item} ${!notification.isRead ? styles.unread : ''}`}\r\n            onClick={() => handleNotificationClick(notification)}\r\n            onMouseEnter={() => handleNotificationHover(notification)}\r\n          >\r\n            <div className={styles.icon}>\r\n              {getNotificationIcon(notification.type)}\r\n            </div>\r\n            \r\n            <div className={styles.content}>\r\n              <p className={styles.text}>{notification.content}</p>\r\n              <span className={styles.time}>{formatDate(notification.createdAt)}</span>\r\n            </div>\r\n\r\n            {!notification.isRead && (\r\n              <div className={styles.unreadDot} aria-label=\"–ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–æ\" />\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationList;\r\n","import React from 'react';\r\nimport { useAppSelector } from '../hooks/useAppSelector';\r\nimport UserPageLayout from '../components/Layout/UserPageLayout';\r\nimport { NotificationList } from '../components/Notifications';\r\nimport styles from './NotificationsPage.module.css';\r\n\r\n/**\r\n * –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n */\r\nconst NotificationsPage = () => {\r\n  const { user } = useAppSelector((state) => state.auth);\r\n\r\n  return (\r\n    <UserPageLayout user={user} narrowSidebar={true}>\r\n      <div className={styles.page}>\r\n        <NotificationList />\r\n      </div>\r\n    </UserPageLayout>\r\n  );\r\n};\r\n\r\nexport default NotificationsPage;\r\n"],"names":["NotificationList","dispatch","useAppDispatch","notifications","loading","unreadCount","useAppSelector","state","useEffect","fetchNotifications","handleNotificationHover","notification","markAsRead","handleNotificationClick","handleMarkAllAsRead","markAllAsRead","formatDate","dateString","date","now","diffMs","diffMins","diffHours","diffDays","getNotificationIcon","type","jsx","styles","jsxs","NotificationsPage","user","UserPageLayout"],"mappings":"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"}