import{b,c as f,j as e,z as w,r as d,A as h,a as U,B}from"./index-4ubAi2p8.js";import{U as S}from"./UserPageLayout-DMyqoeev.js";const A="_themeSelectorCard_747ak_1",E="_cardTitle_747ak_19",O="_themeOptions_747ak_33",P="_themeOption_747ak_33",R="_themeLabel_747ak_91",$="_themeIcon_747ak_107",l={themeSelectorCard:A,cardTitle:E,themeOptions:O,themeOption:P,themeLabel:R,themeIcon:$},D=()=>{const i=b(),{theme:o}=f(r=>r.theme),t=r=>{const m=r.target.value;i(w(m))};return e.jsxs("div",{className:l.themeSelectorCard,children:[e.jsx("h3",{className:l.cardTitle,children:"–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è"}),e.jsxs("div",{className:l.themeOptions,children:[e.jsxs("label",{className:l.themeOption,children:[e.jsx("input",{type:"radio",name:"theme",value:"light-cream",checked:o==="light-cream",onChange:t}),e.jsxs("span",{className:l.themeLabel,children:[e.jsx("span",{className:l.themeIcon,children:"‚òÄÔ∏è"}),"–°–≤–µ—Ç–ª–∞—è (–∫—Ä–µ–º–æ–≤–∞—è)"]})]}),e.jsxs("label",{className:l.themeOption,children:[e.jsx("input",{type:"radio",name:"theme",value:"dark",checked:o==="dark",onChange:t}),e.jsxs("span",{className:l.themeLabel,children:[e.jsx("span",{className:l.themeIcon,children:"üåô"}),"–¢–µ–º–Ω–∞—è"]})]})]})]})},V="_adminCard_nao28_1",F="_cardTitle_nao28_17",z="_section_nao28_31",q="_sectionTitle_nao28_55",G="_error_nao28_69",H="_usersList_nao28_81",J="_userItem_nao28_93",K="_userInfo_nao28_107",M="_userName_nao28_121",Q="_blockedBadge_nao28_139",W="_userUsername_nao28_157",X="_userActions_nao28_167",Y="_editForm_nao28_181",Z="_input_nao28_193",ee="_textarea_nao28_215",se="_btnPrimary_nao28_243",ne="_btnEdit_nao28_245",ae="_btnBlock_nao28_247",te="_btnUnblock_nao28_249",ce="_btnDelete_nao28_251",oe="_btnSave_nao28_253",le="_btnCancel_nao28_255",n={adminCard:V,cardTitle:F,section:z,sectionTitle:q,error:G,usersList:H,userItem:J,userInfo:K,userName:M,blockedBadge:Q,userUsername:W,userActions:X,editForm:Y,input:Z,textarea:ee,btnPrimary:se,btnEdit:ne,btnBlock:ae,btnUnblock:te,btnDelete:ce,btnSave:oe,btnCancel:le},ie=()=>{const[i,o]=d.useState([]),[t,r]=d.useState(!0),[m,x]=d.useState(null),[_,j]=d.useState(""),[k,g]=d.useState(null),[p,N]=d.useState("");d.useEffect(()=>{C()},[]);const C=async()=>{try{r(!0);const s=await h.get("/admin/users");o(s.data),x(null)}catch(s){x("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"),console.error(s)}finally{r(!1)}},v=async s=>{if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? –í—Å–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã."))try{await h.delete(`/admin/users/${s}`),o(i.filter(c=>c.id!==s))}catch(c){alert("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(c)}},T=async s=>{if(!p.trim()){alert("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è");return}try{await h.put(`/admin/users/${s}`,{displayName:p}),o(i.map(c=>c.id===s?{...c,displayName:p}:c)),g(null),N("")}catch(c){alert("–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(c)}},y=async(s,c)=>{try{await h.post(`/admin/users/${s}/block`,{blocked:!c}),o(i.map(u=>u.id===s?{...u,isBlocked:!c}:u))}catch(u){alert("–û—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(u)}},I=async()=>{if(!_.trim()){alert("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è");return}try{await h.post("/admin/announcements",{content:_}),j(""),alert("–û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º")}catch(s){alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è"),console.error(s)}},L=async()=>{try{const s=await h.post("/admin/backup");alert(`–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: ${s.data.filename}`)}catch(s){alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞"),console.error(s)}};return t?e.jsxs("div",{className:n.adminCard,children:[e.jsx("h3",{className:n.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞..."})]}):m?e.jsxs("div",{className:n.adminCard,children:[e.jsx("h3",{className:n.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsx("p",{className:n.error,children:m})]}):e.jsxs("div",{className:n.adminCard,children:[e.jsx("h3",{className:n.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsxs("div",{className:n.section,children:[e.jsx("h4",{className:n.sectionTitle,children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"}),e.jsx("div",{className:n.usersList,children:i.map(s=>e.jsxs("div",{className:n.userItem,children:[e.jsxs("div",{className:n.userInfo,children:[e.jsxs("span",{className:n.userName,children:[s.displayName,s.isBlocked&&e.jsx("span",{className:n.blockedBadge,children:"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"})]}),e.jsxs("span",{className:n.userUsername,children:["@",s.telegramUsername]})]}),k===s.id?e.jsxs("div",{className:n.editForm,children:[e.jsx("input",{type:"text",value:p,onChange:c=>N(c.target.value),placeholder:"–ù–æ–≤–æ–µ –∏–º—è",className:n.input}),e.jsx("button",{onClick:()=>T(s.id),className:n.btnSave,children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),e.jsx("button",{onClick:()=>g(null),className:n.btnCancel,children:"–û—Ç–º–µ–Ω–∞"})]}):e.jsxs("div",{className:n.userActions,children:[e.jsx("button",{onClick:()=>{g(s.id),N(s.displayName)},className:n.btnEdit,children:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å"}),e.jsx("button",{onClick:()=>y(s.id,s.isBlocked),className:s.isBlocked?n.btnUnblock:n.btnBlock,children:s.isBlocked?"–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å":"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"}),e.jsx("button",{onClick:()=>v(s.id),className:n.btnDelete,children:"–£–¥–∞–ª–∏—Ç—å"})]})]},s.id))})]}),e.jsxs("div",{className:n.section,children:[e.jsx("h4",{className:n.sectionTitle,children:"–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"}),e.jsx("textarea",{value:_,onChange:s=>j(s.target.value),placeholder:"–¢–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",className:n.textarea,rows:4}),e.jsx("button",{onClick:I,className:n.btnPrimary,children:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"})]}),e.jsxs("div",{className:n.section,children:[e.jsx("h4",{className:n.sectionTitle,children:"–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"}),e.jsx("button",{onClick:L,className:n.btnPrimary,children:"–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"})]})]})},re="_settingsContainer_18gsg_1",de="_pageTitle_18gsg_13",me="_errorContainer_18gsg_27",he="_settingsCard_18gsg_47",_e="_cardTitle_18gsg_63",ue="_profileInfo_18gsg_79",xe="_infoRow_18gsg_91",pe="_infoLabel_18gsg_115",ge="_infoValue_18gsg_125",Ne="_logoutButton_18gsg_135",je="_contactInfo_18gsg_171",be="_contactItem_18gsg_183",fe="_contactIcon_18gsg_199",ke="_contactLink_18gsg_209",a={settingsContainer:re,pageTitle:de,errorContainer:me,settingsCard:he,cardTitle:_e,profileInfo:ue,infoRow:xe,infoLabel:pe,infoValue:ge,logoutButton:Ne,contactInfo:je,contactItem:be,contactIcon:fe,contactLink:ke},Te=()=>{const i=U(),o=b(),{user:t,isAuthenticated:r}=f(_=>_.auth),m=(t==null?void 0:t.isAdmin)||(t==null?void 0:t.id)==="137981675",x=async()=>{confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?")&&(await o(B()),i("/login"))};return r?e.jsx(S,{user:t,children:e.jsxs("div",{className:a.settingsContainer,children:[e.jsx("h1",{className:a.pageTitle,children:"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"}),e.jsx(D,{}),e.jsxs("div",{className:a.settingsCard,children:[e.jsx("h3",{className:a.cardTitle,children:"–ü—Ä–æ—Ñ–∏–ª—å"}),e.jsxs("div",{className:a.profileInfo,children:[e.jsxs("div",{className:a.infoRow,children:[e.jsx("span",{className:a.infoLabel,children:"–ò–º—è:"}),e.jsx("span",{className:a.infoValue,children:t.displayName})]}),t.telegramUsername&&e.jsxs("div",{className:a.infoRow,children:[e.jsx("span",{className:a.infoLabel,children:"Telegram:"}),e.jsxs("span",{className:a.infoValue,children:["@",t.telegramUsername]})]}),e.jsxs("div",{className:a.infoRow,children:[e.jsx("span",{className:a.infoLabel,children:"ID:"}),e.jsx("span",{className:a.infoValue,children:t.id})]})]})]}),e.jsxs("div",{className:a.settingsCard,children:[e.jsx("h3",{className:a.cardTitle,children:"–°–µ—Å—Å–∏—è"}),e.jsx("button",{onClick:x,className:a.logoutButton,children:"–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞"})]}),e.jsxs("div",{className:a.settingsCard,children:[e.jsx("h3",{className:a.cardTitle,children:"–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Ä–µ–∫–ª–∞–º—ã"}),e.jsxs("div",{className:a.contactInfo,children:[e.jsxs("p",{className:a.contactItem,children:[e.jsx("span",{className:a.contactIcon,children:"üìß"}),"Email: ",e.jsx("a",{href:"mailto:admin@watchrebel.com",className:a.contactLink,children:"admin@watchrebel.com"})]}),e.jsxs("p",{className:a.contactItem,children:[e.jsx("span",{className:a.contactIcon,children:"üí¨"}),"Telegram: ",e.jsx("a",{href:"https://t.me/watchrebel_admin",className:a.contactLink,target:"_blank",rel:"noopener noreferrer",children:"@watchrebel_admin"})]})]})]}),m&&e.jsx(ie,{})]})}):e.jsx("div",{className:a.errorContainer,children:e.jsx("p",{children:"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"})})};export{Te as default};
//# sourceMappingURL=SettingsPage-B1yxV2sc.js.map
