import{u as j,a as u,b as p,c as N,r as o,l as v,j as e}from"./index-CEQTVQWV.js";function f(){const[s]=j(),l=u(),i=p(),{isAuthenticated:n,loading:d,error:c}=N(a=>a.auth),[r,h]=o.useState(!1);return o.useEffect(()=>{if(n){l("/",{replace:!0});return}const a=s.get("token"),t=s.get("userId"),g=s.get("username"),m=s.get("displayName"),x=s.get("avatarUrl");a&&t&&!r&&(h(!0),localStorage.setItem("authToken",a),i(v({token:a,userId:t,username:g,displayName:m,avatarUrl:x})))},[s,n,l,i,r]),d?e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-logo",children:[e.jsx("h1",{children:"watchRebel"}),e.jsx("p",{className:"login-subtitle",children:"Социальная сеть для любителей кино"})]}),e.jsxs("div",{className:"login-loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Авторизация..."})]})]})})}):c?e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-logo",children:[e.jsx("h1",{children:"watchRebel"}),e.jsx("p",{className:"login-subtitle",children:"Социальная сеть для любителей кино"})]}),e.jsxs("div",{className:"login-error",children:[e.jsx("div",{className:"error-icon",children:"⚠️"}),e.jsx("h2",{children:"Ошибка авторизации"}),e.jsx("p",{children:c.message||"Не удалось авторизоваться"}),e.jsx("button",{className:"retry-button",onClick:()=>window.location.href="/",children:"Попробовать снова"})]})]})})}):e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-logo",children:[e.jsx("h1",{children:"watchRebel"}),e.jsx("p",{className:"login-subtitle",children:"Социальная сеть для любителей кино"})]}),e.jsxs("div",{className:"login-content",children:[e.jsx("div",{className:"login-icon",children:e.jsx("img",{src:"/images/logo-animation.gif",alt:"watchRebel"})}),e.jsx("h2",{children:"Добро пожаловать!"}),e.jsx("p",{className:"login-description",children:"Ведите учет просмотренных фильмов и сериалов, делитесь отзывами и находите друзей с похожими вкусами"}),e.jsxs("div",{className:"login-instructions",children:[e.jsx("h3",{children:"Как начать:"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Откройте Telegram бота watchRebel"}),e.jsx("li",{children:"Нажмите команду /start"}),e.jsx("li",{children:"Перейдите по ссылке из бота"})]})]}),e.jsx("div",{className:"login-telegram",children:e.jsxs("a",{href:"https://t.me/watchrebel_bot",className:"telegram-button",target:"_blank",rel:"noopener noreferrer",children:[e.jsx("span",{className:"telegram-icon",children:e.jsx("img",{src:"/images/telegram-icon.png",alt:"Telegram"})}),"Открыть Telegram бота"]})})]})]})})})}export{f as default};
//# sourceMappingURL=LoginPage-C2osbfLz.js.map
