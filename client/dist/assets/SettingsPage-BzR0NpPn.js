import{b as w,c as y,r,j as e,A as B,d as b,a as T,B as S,C as U}from"./index-BB5XFphy.js";import{U as D}from"./UserPageLayout-DBaLsdmh.js";const L="_themeSelectorCard_1lvk8_3",E="_cardTitle_1lvk8_19",P="_dropdownContainer_1lvk8_35",A="_dropdownButton_1lvk8_47",$="_selectedTheme_1lvk8_101",R="_arrow_1lvk8_117",M="_arrowUp_1lvk8_129",V="_dropdownMenu_1lvk8_139",F="_dropdownItem_1lvk8_201",G="_active_1lvk8_241",q="_themeIcon_1lvk8_267",H="_themeName_1lvk8_279",J="_themePreview_1lvk8_291",K="_colorDot_1lvk8_305",Q="_checkmark_1lvk8_323",o={themeSelectorCard:L,cardTitle:E,dropdownContainer:P,dropdownButton:A,selectedTheme:$,arrow:R,arrowUp:M,dropdownMenu:V,dropdownItem:F,active:G,themeIcon:q,themeName:H,themePreview:J,colorDot:K,checkmark:Q},W=()=>{const p=w(),{theme:i}=y(c=>c.theme),[t,N]=r.useState(!1),h=r.useRef(null),x=[{value:"light-cream",label:"–°–≤–µ—Ç–ª–∞—è (–∫—Ä–µ–º–æ–≤–∞—è)",icon:"‚òÄÔ∏è",colors:["#f5f5f0","#6366f1","#ec4899"]},{value:"dark",label:"–¢–µ–º–Ω–∞—è",icon:"üåô",colors:["#0f0f0f","#818cf8","#f472b6"]},{value:"die-my-darling",label:"Die my Darling",icon:"ü©∏",colors:["#0a0000","#cc0000","#ff4444"]},{value:"steam",label:"Steam",icon:"üéÆ",colors:["#1b2838","#66c0f4","#5c7e10"]},{value:"discord",label:"Discord",icon:"üí¨",colors:["#36393f","#5865f2","#3ba55d"]},{value:"metal-and-glass",label:"Metal and Glass",icon:"‚ú®",colors:["#1a1d23","#60a5fa","#94a3b8"]},{value:"cyberpunk",label:"Cyberpunk",icon:"üåÉ",colors:["#0a0e27","#f0f","#0ff"]},{value:"dark-neon-obsidian",label:"Dark Neon Obsidian",icon:"üíé",colors:["#05060a","#3cffc4","#2dd4a8"]}],_=x.find(c=>c.value===i)||x[0],u=c=>{p(B(c)),N(!1)};return r.useEffect(()=>{const c=d=>{h.current&&!h.current.contains(d.target)&&N(!1)};return t&&document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[t]),e.jsxs("div",{className:o.themeSelectorCard,children:[e.jsx("h3",{className:o.cardTitle,children:"–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è"}),e.jsxs("div",{className:o.dropdownContainer,ref:h,children:[e.jsxs("button",{className:o.dropdownButton,onClick:()=>N(!t),"aria-expanded":t,"aria-haspopup":"listbox",children:[e.jsxs("span",{className:o.selectedTheme,children:[e.jsx("span",{className:o.themeIcon,children:_.icon}),e.jsx("span",{className:o.themeName,children:_.label}),e.jsx("span",{className:o.themePreview,children:_.colors.map((c,d)=>e.jsx("span",{className:o.colorDot,style:{backgroundColor:c}},d))})]}),e.jsx("span",{className:`${o.arrow} ${t?o.arrowUp:""}`,children:"‚ñº"})]}),t&&e.jsx("div",{className:o.dropdownMenu,role:"listbox",children:x.map(c=>e.jsxs("button",{className:`${o.dropdownItem} ${i===c.value?o.active:""}`,onClick:()=>u(c.value),role:"option","aria-selected":i===c.value,children:[e.jsx("span",{className:o.themeIcon,children:c.icon}),e.jsx("span",{className:o.themeName,children:c.label}),e.jsx("span",{className:o.themePreview,children:c.colors.map((d,m)=>e.jsx("span",{className:o.colorDot,style:{backgroundColor:d}},m))}),i===c.value&&e.jsx("span",{className:o.checkmark,children:"‚úì"})]},c.value))})]})]})},X="_adminCard_1l5nz_1",Y="_cardTitle_1l5nz_17",Z="_section_1l5nz_31",O="_sectionTitle_1l5nz_55",ee="_error_1l5nz_69",se="_usersList_1l5nz_81",ne="_userItem_1l5nz_93",ae="_userInfo_1l5nz_107",te="_userName_1l5nz_121",ce="_blockedBadge_1l5nz_139",oe="_userUsername_1l5nz_157",le="_userActions_1l5nz_167",re="_editForm_1l5nz_181",ie="_input_1l5nz_193",de="_textarea_1l5nz_215",me="_btnPrimary_1l5nz_243",_e="_btnEdit_1l5nz_245",he="_btnBlock_1l5nz_247",ue="_btnUnblock_1l5nz_249",pe="_btnDelete_1l5nz_251",Ne="_btnSave_1l5nz_253",xe="_btnCancel_1l5nz_255",a={adminCard:X,cardTitle:Y,section:Z,sectionTitle:O,error:ee,usersList:se,userItem:ne,userInfo:ae,userName:te,blockedBadge:ce,userUsername:oe,userActions:le,editForm:re,input:ie,textarea:de,btnPrimary:me,btnEdit:_e,btnBlock:he,btnUnblock:ue,btnDelete:pe,btnSave:Ne,btnCancel:xe},fe=()=>{const[p,i]=r.useState([]),[t,N]=r.useState(!0),[h,x]=r.useState(null),[_,u]=r.useState(""),[c,d]=r.useState(null),[m,j]=r.useState("");r.useEffect(()=>{g()},[]);const g=async()=>{try{N(!0);const n=await b.get("/admin/users");i(n.data),x(null)}catch(n){x("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"),console.error(n)}finally{N(!1)}},k=async n=>{if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? –í—Å–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã."))try{await b.delete(`/admin/users/${n}`),i(p.filter(l=>l.id!==n))}catch(l){alert("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(l)}},C=async n=>{if(!m.trim()){alert("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è");return}try{await b.put(`/admin/users/${n}`,{displayName:m}),i(p.map(l=>l.id===n?{...l,displayName:m}:l)),d(null),j("")}catch(l){alert("–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(l)}},f=async(n,l)=>{try{await b.post(`/admin/users/${n}/block`,{blocked:!l}),i(p.map(v=>v.id===n?{...v,isBlocked:!l}:v))}catch(v){alert("–û—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(v)}},z=async()=>{if(!_.trim()){alert("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è");return}try{await b.post("/admin/announcements",{content:_}),u(""),alert("–û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º")}catch(n){alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è"),console.error(n)}},I=async()=>{try{const n=await b.post("/admin/backup");alert(`–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: ${n.data.filename}`)}catch(n){alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞"),console.error(n)}};return t?e.jsxs("div",{className:a.adminCard,children:[e.jsx("h3",{className:a.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞..."})]}):h?e.jsxs("div",{className:a.adminCard,children:[e.jsx("h3",{className:a.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsx("p",{className:a.error,children:h})]}):e.jsxs("div",{className:a.adminCard,children:[e.jsx("h3",{className:a.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsxs("div",{className:a.section,children:[e.jsx("h4",{className:a.sectionTitle,children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"}),e.jsx("div",{className:a.usersList,children:p.map(n=>e.jsxs("div",{className:a.userItem,children:[e.jsxs("div",{className:a.userInfo,children:[e.jsxs("span",{className:a.userName,children:[n.displayName,n.isBlocked&&e.jsx("span",{className:a.blockedBadge,children:"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"})]}),e.jsxs("span",{className:a.userUsername,children:["@",n.telegramUsername]})]}),c===n.id?e.jsxs("div",{className:a.editForm,children:[e.jsx("input",{type:"text",value:m,onChange:l=>j(l.target.value),placeholder:"–ù–æ–≤–æ–µ –∏–º—è",className:a.input}),e.jsx("button",{onClick:()=>C(n.id),className:a.btnSave,children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),e.jsx("button",{onClick:()=>d(null),className:a.btnCancel,children:"–û—Ç–º–µ–Ω–∞"})]}):e.jsxs("div",{className:a.userActions,children:[e.jsx("button",{onClick:()=>{d(n.id),j(n.displayName)},className:a.btnEdit,children:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å"}),e.jsx("button",{onClick:()=>f(n.id,n.isBlocked),className:n.isBlocked?a.btnUnblock:a.btnBlock,children:n.isBlocked?"–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å":"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"}),e.jsx("button",{onClick:()=>k(n.id),className:a.btnDelete,children:"–£–¥–∞–ª–∏—Ç—å"})]})]},n.id))})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h4",{className:a.sectionTitle,children:"–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"}),e.jsx("textarea",{value:_,onChange:n=>u(n.target.value),placeholder:"–¢–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",className:a.textarea,rows:4}),e.jsx("button",{onClick:z,className:a.btnPrimary,children:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h4",{className:a.sectionTitle,children:"–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"}),e.jsx("button",{onClick:I,className:a.btnPrimary,children:"–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"})]})]})},be="_settingsContainer_r2gzo_1",je="_pageTitle_r2gzo_13",ve="_errorContainer_r2gzo_27",ge="_settingsCard_r2gzo_47",ke="_cardTitle_r2gzo_63",Ce="_profileInfo_r2gzo_79",we="_infoRow_r2gzo_91",ye="_infoLabel_r2gzo_115",ze="_infoValue_r2gzo_125",Ie="_logoutButton_r2gzo_135",Be="_contactInfo_r2gzo_171",Te="_contactItem_r2gzo_183",Se="_contactIcon_r2gzo_199",Ue="_contactLink_r2gzo_209",De="_nameDisplay_r2gzo_355",Le="_editButton_r2gzo_367",Ee="_editNameContainer_r2gzo_397",Pe="_nameInput_r2gzo_411",Ae="_editButtons_r2gzo_439",$e="_saveButton_r2gzo_449",Re="_cancelButton_r2gzo_491",Me="_errorMessage_r2gzo_533",s={settingsContainer:be,pageTitle:je,errorContainer:ve,settingsCard:ge,cardTitle:ke,profileInfo:Ce,infoRow:we,infoLabel:ye,infoValue:ze,logoutButton:Ie,contactInfo:Be,contactItem:Te,contactIcon:Se,contactLink:Ue,nameDisplay:De,editButton:Le,editNameContainer:Ee,nameInput:Pe,editButtons:Ae,saveButton:$e,cancelButton:Re,errorMessage:Me},Ge=()=>{const p=T(),i=w(),{user:t,isAuthenticated:N,loading:h}=y(f=>f.auth),[x,_]=r.useState(!1),[u,c]=r.useState((t==null?void 0:t.displayName)||""),[d,m]=r.useState(null),j=(t==null?void 0:t.isAdmin)||(t==null?void 0:t.id)==="137981675",g=async()=>{confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?")&&(await i(U()),p("/login"))},k=async()=>{if(!u||u.trim().length<2){m("–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞");return}if(u.trim().length>50){m("–ò–º—è –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 50 —Å–∏–º–≤–æ–ª–æ–≤");return}try{m(null),await i(S({userId:t.id,displayName:u.trim()})).unwrap(),_(!1)}catch(f){m(f.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏")}},C=()=>{c((t==null?void 0:t.displayName)||""),_(!1),m(null)};return N?e.jsx(D,{user:t,children:e.jsxs("div",{className:s.settingsContainer,children:[e.jsx("h1",{className:s.pageTitle,children:"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"}),e.jsx(W,{}),e.jsxs("div",{className:s.settingsCard,children:[e.jsx("h3",{className:s.cardTitle,children:"–ü—Ä–æ—Ñ–∏–ª—å"}),e.jsxs("div",{className:s.profileInfo,children:[e.jsxs("div",{className:s.infoRow,children:[e.jsx("span",{className:s.infoLabel,children:"–ò–º—è:"}),x?e.jsxs("div",{className:s.editNameContainer,children:[e.jsx("input",{type:"text",value:u,onChange:f=>c(f.target.value),className:s.nameInput,placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è",maxLength:50}),e.jsxs("div",{className:s.editButtons,children:[e.jsx("button",{onClick:k,className:s.saveButton,disabled:h,children:h?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),e.jsx("button",{onClick:C,className:s.cancelButton,disabled:h,children:"–û—Ç–º–µ–Ω–∞"})]}),d&&e.jsx("div",{className:s.errorMessage,children:d})]}):e.jsxs("div",{className:s.nameDisplay,children:[e.jsx("span",{className:s.infoValue,children:t.displayName}),e.jsx("button",{onClick:()=>_(!0),className:s.editButton,children:"‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å"})]})]}),t.telegramUsername&&e.jsxs("div",{className:s.infoRow,children:[e.jsx("span",{className:s.infoLabel,children:"Telegram:"}),e.jsxs("span",{className:s.infoValue,children:["@",t.telegramUsername]})]}),e.jsxs("div",{className:s.infoRow,children:[e.jsx("span",{className:s.infoLabel,children:"ID:"}),e.jsx("span",{className:s.infoValue,children:t.id})]})]})]}),e.jsxs("div",{className:s.settingsCard,children:[e.jsx("h3",{className:s.cardTitle,children:"–°–µ—Å—Å–∏—è"}),e.jsx("button",{onClick:g,className:s.logoutButton,children:"–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞"})]}),e.jsxs("div",{className:s.settingsCard,children:[e.jsx("h3",{className:s.cardTitle,children:"–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Ä–µ–∫–ª–∞–º—ã"}),e.jsxs("div",{className:s.contactInfo,children:[e.jsxs("p",{className:s.contactItem,children:[e.jsx("span",{className:s.contactIcon,children:"üìß"}),"Email: ",e.jsx("a",{href:"mailto:admin@watchrebel.com",className:s.contactLink,children:"admin@watchrebel.com"})]}),e.jsxs("p",{className:s.contactItem,children:[e.jsx("span",{className:s.contactIcon,children:"üí¨"}),"Telegram: ",e.jsx("a",{href:"https://t.me/watchrebel_admin",className:s.contactLink,target:"_blank",rel:"noopener noreferrer",children:"@watchrebel_admin"})]})]})]}),j&&e.jsx(fe,{})]})}):e.jsx("div",{className:s.errorContainer,children:e.jsx("p",{children:"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"})})};export{Ge as default};
//# sourceMappingURL=SettingsPage-BzR0NpPn.js.map
