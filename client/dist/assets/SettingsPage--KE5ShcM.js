import{f as w,b,c as f,j as e,r as m,e as h,a as S,i as U}from"./index-Djl9NHxl.js";import{U as B}from"./UserPageLayout-C8vKA2h1.js";import"./mediaSlice-Cc1A5Hw2.js";import"./notificationsSlice-B12J8AxD.js";const A=w({name:"theme",initialState:{theme:"light-cream"},reducers:{setTheme:(i,o)=>{i.theme=o.payload}}}),{setTheme:E}=A.actions,O="_themeSelectorCard_1mno0_1",P="_cardTitle_1mno0_17",R="_themeOptions_1mno0_31",$="_themeOption_1mno0_31",D="_themeLabel_1mno0_83",V="_themeIcon_1mno0_97",l={themeSelectorCard:O,cardTitle:P,themeOptions:R,themeOption:$,themeLabel:D,themeIcon:V},F=()=>{const i=b(),{theme:o}=f(r=>r.theme),a=r=>{const d=r.target.value;i(E(d)),document.body.className=d};return e.jsxs("div",{className:l.themeSelectorCard,children:[e.jsx("h3",{className:l.cardTitle,children:"–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è"}),e.jsxs("div",{className:l.themeOptions,children:[e.jsxs("label",{className:l.themeOption,children:[e.jsx("input",{type:"radio",name:"theme",value:"light-cream",checked:o==="light-cream",onChange:a}),e.jsxs("span",{className:l.themeLabel,children:[e.jsx("span",{className:l.themeIcon,children:"‚òÄÔ∏è"}),"–°–≤–µ—Ç–ª–∞—è (–∫—Ä–µ–º–æ–≤–∞—è)"]})]}),e.jsxs("label",{className:l.themeOption,children:[e.jsx("input",{type:"radio",name:"theme",value:"dark",checked:o==="dark",onChange:a}),e.jsxs("span",{className:l.themeLabel,children:[e.jsx("span",{className:l.themeIcon,children:"üåô"}),"–¢–µ–º–Ω–∞—è"]})]})]})]})},q="_adminCard_nao28_1",z="_cardTitle_nao28_17",G="_section_nao28_31",H="_sectionTitle_nao28_55",J="_error_nao28_69",K="_usersList_nao28_81",M="_userItem_nao28_93",Q="_userInfo_nao28_107",W="_userName_nao28_121",X="_blockedBadge_nao28_139",Y="_userUsername_nao28_157",Z="_userActions_nao28_167",ee="_editForm_nao28_181",se="_input_nao28_193",ne="_textarea_nao28_215",te="_btnPrimary_nao28_243",ae="_btnEdit_nao28_245",ce="_btnBlock_nao28_247",oe="_btnUnblock_nao28_249",ie="_btnDelete_nao28_251",le="_btnSave_nao28_253",re="_btnCancel_nao28_255",n={adminCard:q,cardTitle:z,section:G,sectionTitle:H,error:J,usersList:K,userItem:M,userInfo:Q,userName:W,blockedBadge:X,userUsername:Y,userActions:Z,editForm:ee,input:se,textarea:ne,btnPrimary:te,btnEdit:ae,btnBlock:ce,btnUnblock:oe,btnDelete:ie,btnSave:le,btnCancel:re},de=()=>{const[i,o]=m.useState([]),[a,r]=m.useState(!0),[d,p]=m.useState(null),[_,j]=m.useState(""),[C,g]=m.useState(null),[x,N]=m.useState("");m.useEffect(()=>{k()},[]);const k=async()=>{try{r(!0);const s=await h.get("/admin/users");o(s.data),p(null)}catch(s){p("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"),console.error(s)}finally{r(!1)}},v=async s=>{if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? –í—Å–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã."))try{await h.delete(`/admin/users/${s}`),o(i.filter(c=>c.id!==s))}catch(c){alert("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(c)}},y=async s=>{if(!x.trim()){alert("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è");return}try{await h.put(`/admin/users/${s}`,{displayName:x}),o(i.map(c=>c.id===s?{...c,displayName:x}:c)),g(null),N("")}catch(c){alert("–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(c)}},T=async(s,c)=>{try{await h.post(`/admin/users/${s}/block`,{blocked:!c}),o(i.map(u=>u.id===s?{...u,isBlocked:!c}:u))}catch(u){alert("–û—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),console.error(u)}},I=async()=>{if(!_.trim()){alert("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è");return}try{await h.post("/admin/announcements",{content:_}),j(""),alert("–û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º")}catch(s){alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è"),console.error(s)}},L=async()=>{try{const s=await h.post("/admin/backup");alert(`–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: ${s.data.filename}`)}catch(s){alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞"),console.error(s)}};return a?e.jsxs("div",{className:n.adminCard,children:[e.jsx("h3",{className:n.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞..."})]}):d?e.jsxs("div",{className:n.adminCard,children:[e.jsx("h3",{className:n.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsx("p",{className:n.error,children:d})]}):e.jsxs("div",{className:n.adminCard,children:[e.jsx("h3",{className:n.cardTitle,children:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}),e.jsxs("div",{className:n.section,children:[e.jsx("h4",{className:n.sectionTitle,children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"}),e.jsx("div",{className:n.usersList,children:i.map(s=>e.jsxs("div",{className:n.userItem,children:[e.jsxs("div",{className:n.userInfo,children:[e.jsxs("span",{className:n.userName,children:[s.displayName,s.isBlocked&&e.jsx("span",{className:n.blockedBadge,children:"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"})]}),e.jsxs("span",{className:n.userUsername,children:["@",s.telegramUsername]})]}),C===s.id?e.jsxs("div",{className:n.editForm,children:[e.jsx("input",{type:"text",value:x,onChange:c=>N(c.target.value),placeholder:"–ù–æ–≤–æ–µ –∏–º—è",className:n.input}),e.jsx("button",{onClick:()=>y(s.id),className:n.btnSave,children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),e.jsx("button",{onClick:()=>g(null),className:n.btnCancel,children:"–û—Ç–º–µ–Ω–∞"})]}):e.jsxs("div",{className:n.userActions,children:[e.jsx("button",{onClick:()=>{g(s.id),N(s.displayName)},className:n.btnEdit,children:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å"}),e.jsx("button",{onClick:()=>T(s.id,s.isBlocked),className:s.isBlocked?n.btnUnblock:n.btnBlock,children:s.isBlocked?"–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å":"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"}),e.jsx("button",{onClick:()=>v(s.id),className:n.btnDelete,children:"–£–¥–∞–ª–∏—Ç—å"})]})]},s.id))})]}),e.jsxs("div",{className:n.section,children:[e.jsx("h4",{className:n.sectionTitle,children:"–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"}),e.jsx("textarea",{value:_,onChange:s=>j(s.target.value),placeholder:"–¢–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",className:n.textarea,rows:4}),e.jsx("button",{onClick:I,className:n.btnPrimary,children:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"})]}),e.jsxs("div",{className:n.section,children:[e.jsx("h4",{className:n.sectionTitle,children:"–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"}),e.jsx("button",{onClick:L,className:n.btnPrimary,children:"–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"})]})]})},me="_settingsContainer_18gsg_1",he="_pageTitle_18gsg_13",_e="_errorContainer_18gsg_27",ue="_settingsCard_18gsg_47",pe="_cardTitle_18gsg_63",xe="_profileInfo_18gsg_79",ge="_infoRow_18gsg_91",Ne="_infoLabel_18gsg_115",je="_infoValue_18gsg_125",be="_logoutButton_18gsg_135",fe="_contactInfo_18gsg_171",Ce="_contactItem_18gsg_183",ke="_contactIcon_18gsg_199",ve="_contactLink_18gsg_209",t={settingsContainer:me,pageTitle:he,errorContainer:_e,settingsCard:ue,cardTitle:pe,profileInfo:xe,infoRow:ge,infoLabel:Ne,infoValue:je,logoutButton:be,contactInfo:fe,contactItem:Ce,contactIcon:ke,contactLink:ve},we=()=>{const i=S(),o=b(),{user:a,isAuthenticated:r}=f(_=>_.auth),d=(a==null?void 0:a.isAdmin)||(a==null?void 0:a.id)==="137981675",p=async()=>{confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?")&&(await o(U()),i("/login"))};return r?e.jsx(B,{user:a,children:e.jsxs("div",{className:t.settingsContainer,children:[e.jsx("h1",{className:t.pageTitle,children:"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"}),e.jsx(F,{}),e.jsxs("div",{className:t.settingsCard,children:[e.jsx("h3",{className:t.cardTitle,children:"–ü—Ä–æ—Ñ–∏–ª—å"}),e.jsxs("div",{className:t.profileInfo,children:[e.jsxs("div",{className:t.infoRow,children:[e.jsx("span",{className:t.infoLabel,children:"–ò–º—è:"}),e.jsx("span",{className:t.infoValue,children:a.displayName})]}),a.telegramUsername&&e.jsxs("div",{className:t.infoRow,children:[e.jsx("span",{className:t.infoLabel,children:"Telegram:"}),e.jsxs("span",{className:t.infoValue,children:["@",a.telegramUsername]})]}),e.jsxs("div",{className:t.infoRow,children:[e.jsx("span",{className:t.infoLabel,children:"ID:"}),e.jsx("span",{className:t.infoValue,children:a.id})]})]})]}),e.jsxs("div",{className:t.settingsCard,children:[e.jsx("h3",{className:t.cardTitle,children:"–°–µ—Å—Å–∏—è"}),e.jsx("button",{onClick:p,className:t.logoutButton,children:"–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞"})]}),e.jsxs("div",{className:t.settingsCard,children:[e.jsx("h3",{className:t.cardTitle,children:"–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Ä–µ–∫–ª–∞–º—ã"}),e.jsxs("div",{className:t.contactInfo,children:[e.jsxs("p",{className:t.contactItem,children:[e.jsx("span",{className:t.contactIcon,children:"üìß"}),"Email: ",e.jsx("a",{href:"mailto:admin@watchrebel.com",className:t.contactLink,children:"admin@watchrebel.com"})]}),e.jsxs("p",{className:t.contactItem,children:[e.jsx("span",{className:t.contactIcon,children:"üí¨"}),"Telegram: ",e.jsx("a",{href:"https://t.me/watchrebel_admin",className:t.contactLink,target:"_blank",rel:"noopener noreferrer",children:"@watchrebel_admin"})]})]})]}),d&&e.jsx(de,{})]})}):e.jsx("div",{className:t.errorContainer,children:e.jsx("p",{children:"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"})})};export{we as default};
//# sourceMappingURL=SettingsPage--KE5ShcM.js.map
