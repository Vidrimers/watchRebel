import{b as P,r as y,j as t,a as L,u as H,c as B}from"./index-Djl9NHxl.js";import{e as T,g as w,f as M}from"./listsSlice-GDcsyLuu.js";import{U as S}from"./UserPageLayout-C8vKA2h1.js";import{M as k}from"./MediaCard-B9b6yemj.js";import"./mediaSlice-Cc1A5Hw2.js";import"./notificationsSlice-B12J8AxD.js";const $="_listManager_1tysv_1",G="_header_1tysv_9",I="_title_1tysv_27",A="_createButton_1tysv_41",F="_createForm_1tysv_87",E="_input_1tysv_103",D="_formActions_1tysv_147",U="_submitButton_1tysv_157",z="_cancelButton_1tysv_159",R="_errorMessage_1tysv_219",q="_listsContainer_1tysv_241",J="_emptyState_1tysv_249",K="_emptyHint_1tysv_271",O="_listGrid_1tysv_283",Q="_listCard_1tysv_295",V="_listHeader_1tysv_327",W="_listName_1tysv_341",X="_deleteButton_1tysv_359",Y="_listInfo_1tysv_405",Z="_itemCount_1tysv_413",tt="_previewPosters_1tysv_427",et="_previewPoster_1tysv_427",s={listManager:$,header:G,title:I,createButton:A,createForm:F,input:E,formActions:D,submitButton:U,cancelButton:z,errorMessage:R,listsContainer:q,emptyState:J,emptyHint:K,listGrid:O,listCard:Q,listHeader:V,listName:W,deleteButton:X,listInfo:Y,itemCount:Z,previewPosters:tt,previewPoster:et},st=({lists:C,mediaType:_,onListSelect:x})=>{const j=P(),[d,h]=y.useState(!1),[m,l]=y.useState(""),[u,r]=y.useState(null),i=C.filter(e=>e.mediaType===_),p=async e=>{if(e.preventDefault(),!m.trim()){r("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞");return}try{await j(T({name:m.trim(),mediaType:_})).unwrap(),l(""),h(!1),r(null)}catch(o){r(o.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ø–∏—Å–∫–∞")}},N=async(e,o)=>{if(window.confirm(`–£–¥–∞–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫ "${o}"? –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.`))try{await j(w(e)).unwrap()}catch(c){r(c.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞")}},f=()=>{h(!1),l(""),r(null)};return t.jsxs("div",{className:s.listManager,children:[t.jsxs("div",{className:s.header,children:[t.jsx("h2",{className:s.title,children:_==="movie"?"–°–ø–∏—Å–∫–∏ —Ñ–∏–ª—å–º–æ–≤":"–°–ø–∏—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–æ–≤"}),!d&&t.jsx("button",{className:s.createButton,onClick:()=>h(!0),title:"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫",children:"+ –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫"})]}),d&&t.jsxs("form",{className:s.createForm,onSubmit:p,children:[t.jsx("input",{type:"text",className:s.input,placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –û—Ç–ª–∏—á–Ω—ã–µ, –°—Ä–µ–¥–Ω–∏–µ, –û—Ç—Å—Ç–æ–π)",value:m,onChange:e=>l(e.target.value),autoFocus:!0,maxLength:50}),t.jsxs("div",{className:s.formActions,children:[t.jsx("button",{type:"submit",className:s.submitButton,children:"–°–æ–∑–¥–∞—Ç—å"}),t.jsx("button",{type:"button",className:s.cancelButton,onClick:f,children:"–û—Ç–º–µ–Ω–∞"})]})]}),u&&t.jsx("div",{className:s.errorMessage,children:u}),t.jsx("div",{className:s.listsContainer,children:i.length===0?t.jsxs("div",{className:s.emptyState,children:[t.jsx("p",{children:"–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–ø–∏—Å–∫–æ–≤"}),t.jsx("p",{className:s.emptyHint,children:"–°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –∫–æ–ª–ª–µ–∫—Ü–∏—é"})]}):t.jsx("div",{className:s.listGrid,children:i.map(e=>{var o,c,g,v;return t.jsxs("div",{className:s.listCard,onClick:()=>x&&x(e),children:[t.jsxs("div",{className:s.listHeader,children:[t.jsx("h3",{className:s.listName,children:e.name}),t.jsx("button",{className:s.deleteButton,onClick:n=>{n.stopPropagation(),N(e.id,e.name)},title:"–£–¥–∞–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫",children:"√ó"})]}),t.jsx("div",{className:s.listInfo,children:t.jsxs("span",{className:s.itemCount,children:[((o=e.items)==null?void 0:o.length)||0," "," ",((c=e.items)==null?void 0:c.length)===1?"—ç–ª–µ–º–µ–Ω—Ç":((g=e.items)==null?void 0:g.length)>1&&((v=e.items)==null?void 0:v.length)<5?"—ç–ª–µ–º–µ–Ω—Ç–∞":"—ç–ª–µ–º–µ–Ω—Ç–æ–≤"]})}),e.items&&e.items.length>0&&t.jsx("div",{className:s.previewPosters,children:e.items.slice(0,3).map((n,b)=>t.jsx("div",{className:s.previewPoster,children:n.posterPath&&t.jsx("img",{src:`https://image.tmdb.org/t/p/w92${n.posterPath}`,alt:n.title,loading:"lazy"})},b))})]},e.id)})})})]})},nt="_listsPage_16hb4_1",at="_pageHeader_16hb4_9",it="_pageTitle_16hb4_27",rt="_mediaTypeToggle_16hb4_43",ot="_toggleButton_16hb4_61",lt="_active_16hb4_97",ct="_loadingContainer_16hb4_111",dt="_errorMessage_16hb4_113",mt="_errorContainer_16hb4_149",_t="_listContent_16hb4_169",ht="_listContentHeader_16hb4_183",ut="_backButton_16hb4_191",pt="_listContentTitle_16hb4_235",gt="_listContentCount_16hb4_249",vt="_mediaGrid_16hb4_263",yt="_emptyList_16hb4_279",Ct="_emptyHint_16hb4_301",a={listsPage:nt,pageHeader:at,pageTitle:it,mediaTypeToggle:rt,toggleButton:ot,active:lt,loadingContainer:ct,errorMessage:dt,errorContainer:mt,listContent:_t,listContentHeader:ht,backButton:ut,listContentTitle:pt,listContentCount:gt,mediaGrid:vt,emptyList:yt,emptyHint:Ct},Pt=()=>{var o,c,g,v;const C=P();L();const[_,x]=H(),{user:j,isAuthenticated:d}=B(n=>n.auth),{customLists:h,loading:m,error:l}=B(n=>n.lists),{episodeProgress:u}=B(n=>n.lists),r=_.get("type")||"movie",[i,p]=y.useState(null);y.useEffect(()=>{d&&C(M())},[d,C]);const N=n=>{x({type:n}),p(null)},f=n=>{p(n)},e=()=>{p(null)};return d?t.jsx(S,{user:j,children:t.jsxs("div",{className:a.listsPage,children:[t.jsxs("div",{className:a.pageHeader,children:[t.jsx("h1",{className:a.pageTitle,children:"–ú–æ–∏ —Å–ø–∏—Å–∫–∏"}),t.jsxs("div",{className:a.mediaTypeToggle,children:[t.jsx("button",{className:`${a.toggleButton} ${r==="movie"?a.active:""}`,onClick:()=>N("movie"),children:"üé¨ –§–∏–ª—å–º—ã"}),t.jsx("button",{className:`${a.toggleButton} ${r==="tv"?a.active:""}`,onClick:()=>N("tv"),children:"üì∫ –°–µ—Ä–∏–∞–ª—ã"})]})]}),m&&t.jsx("div",{className:a.loadingContainer,children:t.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–æ–≤..."})}),l&&t.jsx("div",{className:a.errorMessage,children:t.jsxs("p",{children:["–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ",l.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"]})}),!m&&!l&&t.jsx(t.Fragment,{children:i?t.jsxs("div",{className:a.listContent,children:[t.jsxs("div",{className:a.listContentHeader,children:[t.jsx("button",{className:a.backButton,onClick:e,children:"‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫–∞–º"}),t.jsx("h2",{className:a.listContentTitle,children:i.name}),t.jsxs("p",{className:a.listContentCount,children:[((o=i.items)==null?void 0:o.length)||0," "," ",((c=i.items)==null?void 0:c.length)===1?"—ç–ª–µ–º–µ–Ω—Ç":((g=i.items)==null?void 0:g.length)>1&&((v=i.items)==null?void 0:v.length)<5?"—ç–ª–µ–º–µ–Ω—Ç–∞":"—ç–ª–µ–º–µ–Ω—Ç–æ–≤"]})]}),i.items&&i.items.length>0?t.jsx("div",{className:a.mediaGrid,children:i.items.map(n=>{var b;return t.jsx(k,{media:n,showProgress:n.mediaType==="tv",progress:(b=u[n.tmdbId])==null?void 0:b[u[n.tmdbId].length-1]},n.tmdbId)})}):t.jsxs("div",{className:a.emptyList,children:[t.jsx("p",{children:"–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç"}),t.jsxs("p",{className:a.emptyHint,children:["–î–æ–±–∞–≤—å—Ç–µ ",r==="movie"?"—Ñ–∏–ª—å–º—ã":"—Å–µ—Ä–∏–∞–ª—ã"," —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫"]})]})]}):t.jsx(st,{lists:h,mediaType:r,onListSelect:f})})]})}):t.jsx("div",{className:a.errorContainer,children:t.jsx("p",{children:"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"})})};export{Pt as default};
//# sourceMappingURL=ListsPage-CTVNnbzu.js.map
