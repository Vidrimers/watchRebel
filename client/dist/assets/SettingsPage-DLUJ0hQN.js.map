{"version":3,"file":"SettingsPage-DLUJ0hQN.js","sources":["../../src/components/Settings/ThemeDropdown.jsx","../../src/components/Settings/AdminPanel.jsx","../../src/components/Settings/AvatarUpload.jsx","../../src/pages/SettingsPage.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useAppSelector } from '../../hooks/useAppSelector';\r\nimport { useAppDispatch } from '../../hooks/useAppDispatch';\r\nimport { setTheme } from '../../store/slices/themeSlice';\r\nimport styles from './ThemeDropdown.module.css';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\r\n * –ó–∞–º–µ–Ω—è–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–∞–¥–∏–æ-–∫–Ω–æ–ø–æ–∫ –Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π dropdown\r\n */\r\nconst ThemeDropdown = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { theme } = useAppSelector((state) => state.theme);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  // –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ–º —Å –ø—Ä–µ–≤—å—é —Ü–≤–µ—Ç–æ–≤\r\n  const themes = [\r\n    {\r\n      value: 'light-cream',\r\n      label: '–°–≤–µ—Ç–ª–∞—è (–∫—Ä–µ–º–æ–≤–∞—è)',\r\n      icon: '‚òÄÔ∏è',\r\n      colors: ['#f5f5f0', '#6366f1', '#ec4899']\r\n    },\r\n    {\r\n      value: 'dark',\r\n      label: '–¢–µ–º–Ω–∞—è',\r\n      icon: 'üåô',\r\n      colors: ['#0f0f0f', '#818cf8', '#f472b6']\r\n    },\r\n    {\r\n      value: 'die-my-darling',\r\n      label: 'Die my Darling',\r\n      icon: 'ü©∏',\r\n      colors: ['#0a0000', '#cc0000', '#ff4444']\r\n    },\r\n    {\r\n      value: 'steam',\r\n      label: 'Steam',\r\n      icon: 'üéÆ',\r\n      colors: ['#1b2838', '#66c0f4', '#5c7e10']\r\n    },\r\n    {\r\n      value: 'discord',\r\n      label: 'Discord',\r\n      icon: 'üí¨',\r\n      colors: ['#36393f', '#5865f2', '#3ba55d']\r\n    },\r\n    {\r\n      value: 'metal-and-glass',\r\n      label: 'Metal and Glass',\r\n      icon: '‚ú®',\r\n      colors: ['#1a1d23', '#60a5fa', '#94a3b8']\r\n    },\r\n    {\r\n      value: 'cyberpunk',\r\n      label: 'Cyberpunk',\r\n      icon: 'üåÉ',\r\n      colors: ['#0a0e27', '#f0f', '#0ff']\r\n    },\r\n    {\r\n      value: 'dark-neon-obsidian',\r\n      label: 'Dark Neon Obsidian',\r\n      icon: 'üíé',\r\n      colors: ['#05060a', '#3cffc4', '#2dd4a8']\r\n    }\r\n  ];\r\n\r\n  // –ù–∞—Ö–æ–¥–∏–º —Ç–µ–∫—É—â—É—é –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ç–µ–º—É\r\n  const currentTheme = themes.find(t => t.value === theme) || themes[0];\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã\r\n  const handleThemeSelect = (themeValue) => {\r\n    dispatch(setTheme(themeValue));\r\n    setIsOpen(false);\r\n  };\r\n\r\n  // –ó–∞–∫—Ä—ã—Ç–∏–µ dropdown –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <div className={styles.themeSelectorCard}>\r\n      <h3 className={styles.cardTitle}>–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</h3>\r\n      \r\n      <div className={styles.dropdownContainer} ref={dropdownRef}>\r\n        {/* –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è dropdown */}\r\n        <button\r\n          className={styles.dropdownButton}\r\n          onClick={() => setIsOpen(!isOpen)}\r\n          aria-expanded={isOpen}\r\n          aria-haspopup=\"listbox\"\r\n        >\r\n          <span className={styles.selectedTheme}>\r\n            <span className={styles.themeIcon}>{currentTheme.icon}</span>\r\n            <span className={styles.themeName}>{currentTheme.label}</span>\r\n            <span className={styles.themePreview}>\r\n              {currentTheme.colors.map((color, index) => (\r\n                <span\r\n                  key={index}\r\n                  className={styles.colorDot}\r\n                  style={{ backgroundColor: color }}\r\n                />\r\n              ))}\r\n            </span>\r\n          </span>\r\n          <span className={`${styles.arrow} ${isOpen ? styles.arrowUp : ''}`}>\r\n            ‚ñº\r\n          </span>\r\n        </button>\r\n\r\n        {/* –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Ç–µ–º */}\r\n        {isOpen && (\r\n          <div className={styles.dropdownMenu} role=\"listbox\">\r\n            {themes.map((themeOption) => (\r\n              <button\r\n                key={themeOption.value}\r\n                className={`${styles.dropdownItem} ${\r\n                  theme === themeOption.value ? styles.active : ''\r\n                }`}\r\n                onClick={() => handleThemeSelect(themeOption.value)}\r\n                role=\"option\"\r\n                aria-selected={theme === themeOption.value}\r\n              >\r\n                <span className={styles.themeIcon}>{themeOption.icon}</span>\r\n                <span className={styles.themeName}>{themeOption.label}</span>\r\n                <span className={styles.themePreview}>\r\n                  {themeOption.colors.map((color, index) => (\r\n                    <span\r\n                      key={index}\r\n                      className={styles.colorDot}\r\n                      style={{ backgroundColor: color }}\r\n                    />\r\n                  ))}\r\n                </span>\r\n                {theme === themeOption.value && (\r\n                  <span className={styles.checkmark}>‚úì</span>\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ThemeDropdown;\r\n","import React, { useState, useEffect } from 'react';\r\nimport api from '../../services/api';\r\nimport useAlert from '../../hooks/useAlert.jsx';\r\nimport useConfirm from '../../hooks/useConfirm.jsx';\r\nimport styles from './AdminPanel.module.css';\r\n\r\n/**\r\n * –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å–∏—Å—Ç–µ–º–æ–π\r\n * –î–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (TELEGRAM_ADMIN_ID=137981675)\r\n */\r\nconst AdminPanel = () => {\r\n  const { alertDialog, showAlert } = useAlert();\r\n  const { confirmDialog, showConfirm } = useConfirm();\r\n  \r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [announcement, setAnnouncement] = useState('');\r\n  const [editingUser, setEditingUser] = useState(null);\r\n  const [newName, setNewName] = useState('');\r\n\r\n  useEffect(() => {\r\n    loadUsers();\r\n  }, []);\r\n\r\n  const loadUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('/admin/users');\r\n      setUsers(response.data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π');\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = async (userId) => {\r\n    const confirmed = await showConfirm({\r\n      title: '–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?',\r\n      message: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? –í—Å–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ.',\r\n      confirmText: '–£–¥–∞–ª–∏—Ç—å',\r\n      cancelText: '–û—Ç–º–µ–Ω–∞',\r\n      confirmButtonStyle: 'danger'\r\n    });\r\n\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await api.delete(`/admin/users/${userId}`);\r\n      setUsers(users.filter(u => u.id !== userId));\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ',\r\n        message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω',\r\n        type: 'success'\r\n      });\r\n    } catch (err) {\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',\r\n        type: 'error'\r\n      });\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleRenameUser = async (userId) => {\r\n    if (!newName.trim()) {\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è',\r\n        type: 'warning'\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await api.put(`/admin/users/${userId}`, { displayName: newName });\r\n      setUsers(users.map(u => u.id === userId ? { ...u, displayName: newName } : u));\r\n      setEditingUser(null);\r\n      setNewName('');\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ',\r\n        message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω',\r\n        type: 'success'\r\n      });\r\n    } catch (err) {\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',\r\n        type: 'error'\r\n      });\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleBlockUser = async (userId, isBlocked) => {\r\n    try {\r\n      await api.post(`/admin/users/${userId}/block`, { blocked: !isBlocked });\r\n      setUsers(users.map(u => u.id === userId ? { ...u, isBlocked: !isBlocked } : u));\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ',\r\n        message: isBlocked ? '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω',\r\n        type: 'success'\r\n      });\r\n    } catch (err) {\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏',\r\n        type: 'error'\r\n      });\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleCreateAnnouncement = async () => {\r\n    if (!announcement.trim()) {\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è',\r\n        type: 'warning'\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await api.post('/admin/announcements', { content: announcement });\r\n      setAnnouncement('');\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ',\r\n        message: '–û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º',\r\n        type: 'success'\r\n      });\r\n    } catch (err) {\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ',\r\n        type: 'error'\r\n      });\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleBackup = async () => {\r\n    try {\r\n      const response = await api.post('/admin/backup');\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ',\r\n        message: `–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: ${response.data.backupPath}`,\r\n        type: 'success'\r\n      });\r\n    } catch (err) {\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø',\r\n        type: 'error'\r\n      });\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className={styles.adminCard}>\r\n        <h3 className={styles.cardTitle}>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>\r\n        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className={styles.adminCard}>\r\n        <h3 className={styles.cardTitle}>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>\r\n        <p className={styles.error}>{error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {alertDialog}\r\n      {confirmDialog}\r\n      <div className={styles.adminCard}>\r\n      <h3 className={styles.cardTitle}>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>\r\n\r\n      {/* –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π */}\r\n      <div className={styles.section}>\r\n        <h4 className={styles.sectionTitle}>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h4>\r\n        <div className={styles.usersList}>\r\n          {users.map(user => (\r\n            <div key={user.id} className={styles.userItem}>\r\n              <div className={styles.userInfo}>\r\n                <span className={styles.userName}>\r\n                  {user.displayName}\r\n                  {user.isBlocked && <span className={styles.blockedBadge}>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>}\r\n                </span>\r\n                <span className={styles.userUsername}>@{user.telegramUsername}</span>\r\n              </div>\r\n              \r\n              {editingUser === user.id ? (\r\n                <div className={styles.editForm}>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newName}\r\n                    onChange={(e) => setNewName(e.target.value)}\r\n                    placeholder=\"–ù–æ–≤–æ–µ –∏–º—è\"\r\n                    className={styles.input}\r\n                  />\r\n                  <button onClick={() => handleRenameUser(user.id)} className={styles.btnSave}>\r\n                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\r\n                  </button>\r\n                  <button onClick={() => setEditingUser(null)} className={styles.btnCancel}>\r\n                    –û—Ç–º–µ–Ω–∞\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <div className={styles.userActions}>\r\n                  <button\r\n                    onClick={() => {\r\n                      setEditingUser(user.id);\r\n                      setNewName(user.displayName);\r\n                    }}\r\n                    className={styles.btnEdit}\r\n                  >\r\n                    –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleBlockUser(user.id, user.isBlocked)}\r\n                    className={user.isBlocked ? styles.btnUnblock : styles.btnBlock}\r\n                  >\r\n                    {user.isBlocked ? '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å' : '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å'}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDeleteUser(user.id)}\r\n                    className={styles.btnDelete}\r\n                  >\r\n                    –£–¥–∞–ª–∏—Ç—å\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* –û–±—ä—è–≤–ª–µ–Ω–∏—è */}\r\n      <div className={styles.section}>\r\n        <h4 className={styles.sectionTitle}>–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h4>\r\n        <textarea\r\n          value={announcement}\r\n          onChange={(e) => setAnnouncement(e.target.value)}\r\n          placeholder=\"–¢–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\"\r\n          className={styles.textarea}\r\n          rows={4}\r\n        />\r\n        <button onClick={handleCreateAnnouncement} className={styles.btnPrimary}>\r\n          –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ\r\n        </button>\r\n      </div>\r\n\r\n      {/* –ë—ç–∫–∞–ø */}\r\n      <div className={styles.section}>\r\n        <h4 className={styles.sectionTitle}>–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>\r\n        <button onClick={handleBackup} className={styles.btnPrimary}>\r\n          –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö\r\n        </button>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n","import React, { useState, useRef } from 'react';\r\nimport { useAppDispatch } from '../../hooks/useAppDispatch';\r\nimport { updateProfile } from '../../store/slices/authSlice';\r\nimport styles from './AvatarUpload.module.css';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n */\r\nconst AvatarUpload = ({ user }) => {\r\n  const dispatch = useAppDispatch();\r\n  const fileInputRef = useRef(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n\r\n  const handleFileSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞\r\n    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      setError('–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞. –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG, PNG, GIF, WebP)');\r\n      return;\r\n    }\r\n\r\n    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (5MB)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      setError('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB');\r\n      return;\r\n    }\r\n\r\n    // –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–≤—å—é\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setPreviewUrl(reader.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n\r\n    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª\r\n    handleUpload(file);\r\n  };\r\n\r\n  const handleUpload = async (file) => {\r\n    setUploading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('avatar', file);\r\n\r\n      await dispatch(updateProfile({ \r\n        userId: user.id, \r\n        formData \r\n      })).unwrap();\r\n\r\n      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–≤—å—é –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏\r\n      setPreviewUrl(null);\r\n    } catch (err) {\r\n      setError(err.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∫–∏');\r\n      setPreviewUrl(null);\r\n    } finally {\r\n      setUploading(false);\r\n      // –û—á–∏—â–∞–µ–º input\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleButtonClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const getAvatarUrl = () => {\r\n    if (previewUrl) return previewUrl;\r\n    if (user.avatarUrl) {\r\n      // –ï—Å–ª–∏ –∞–≤–∞—Ç–∞—Ä–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä\r\n      if (user.avatarUrl.startsWith('/uploads/')) {\r\n        return `${import.meta.env.VITE_API_URL || 'http://localhost:1313'}${user.avatarUrl}`;\r\n      }\r\n      // –ï—Å–ª–∏ –∞–≤–∞—Ç–∞—Ä–∫–∞ –∏–∑ Telegram\r\n      return user.avatarUrl;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className={styles.avatarUploadContainer}>\r\n      <div className={styles.avatarPreview}>\r\n        {getAvatarUrl() ? (\r\n          <img \r\n            src={getAvatarUrl()} \r\n            alt=\"–ê–≤–∞—Ç–∞—Ä\" \r\n            className={styles.avatarImage}\r\n          />\r\n        ) : (\r\n          <div className={styles.avatarPlaceholder}>\r\n            <span className={styles.placeholderIcon}>üë§</span>\r\n          </div>\r\n        )}\r\n        {uploading && (\r\n          <div className={styles.uploadingOverlay}>\r\n            <div className={styles.spinner}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className={styles.uploadControls}>\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          accept=\"image/jpeg,image/jpg,image/png,image/gif,image/webp\"\r\n          onChange={handleFileSelect}\r\n          className={styles.fileInput}\r\n        />\r\n        <button\r\n          onClick={handleButtonClick}\r\n          disabled={uploading}\r\n          className={styles.uploadButton}\r\n        >\r\n          {uploading ? '–ó–∞–≥—Ä—É–∑–∫–∞...' : 'üì∑ –ò–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É'}\r\n        </button>\r\n        <p className={styles.uploadHint}>\r\n          –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB. –§–æ—Ä–º–∞—Ç—ã: JPEG, PNG, GIF, WebP\r\n        </p>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className={styles.errorMessage}>\r\n          {error}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AvatarUpload;\r\n","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAppSelector } from '../hooks/useAppSelector';\r\nimport { useAppDispatch } from '../hooks/useAppDispatch';\r\nimport { logout, updateProfile } from '../store/slices/authSlice';\r\nimport UserPageLayout from '../components/Layout/UserPageLayout';\r\nimport ThemeDropdown from '../components/Settings/ThemeDropdown';\r\nimport AdminPanel from '../components/Settings/AdminPanel';\r\nimport AvatarUpload from '../components/Settings/AvatarUpload';\r\nimport useConfirm from '../hooks/useConfirm.jsx';\r\nimport styles from './SettingsPage.module.css';\r\n\r\n/**\r\n * –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫\r\n */\r\nconst SettingsPage = () => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useAppDispatch();\r\n  const { user, isAuthenticated, loading } = useAppSelector((state) => state.auth);\r\n  const { confirmDialog, showConfirm } = useConfirm();\r\n  \r\n  const [isEditingName, setIsEditingName] = useState(false);\r\n  const [newDisplayName, setNewDisplayName] = useState(user?.displayName || '');\r\n  const [saveError, setSaveError] = useState(null);\r\n\r\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–æ–º\r\n  const isAdmin = user?.isAdmin || user?.id === '137981675';\r\n\r\n  const handleLogout = async () => {\r\n    const confirmed = await showConfirm({\r\n      title: '–í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞',\r\n      message: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?',\r\n      confirmText: '–í—ã–π—Ç–∏',\r\n      cancelText: '–û—Ç–º–µ–Ω–∞',\r\n      confirmButtonStyle: 'primary'\r\n    });\r\n\r\n    if (confirmed) {\r\n      await dispatch(logout());\r\n      navigate('/login');\r\n    }\r\n  };\r\n  \r\n  const handleSaveName = async () => {\r\n    if (!newDisplayName || newDisplayName.trim().length < 2) {\r\n      setSaveError('–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞');\r\n      return;\r\n    }\r\n    \r\n    if (newDisplayName.trim().length > 50) {\r\n      setSaveError('–ò–º—è –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 50 —Å–∏–º–≤–æ–ª–æ–≤');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSaveError(null);\r\n      await dispatch(updateProfile({ \r\n        userId: user.id, \r\n        displayName: newDisplayName.trim() \r\n      })).unwrap();\r\n      setIsEditingName(false);\r\n    } catch (error) {\r\n      setSaveError(error.message || '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏');\r\n    }\r\n  };\r\n  \r\n  const handleCancelEdit = () => {\r\n    setNewDisplayName(user?.displayName || '');\r\n    setIsEditingName(false);\r\n    setSaveError(null);\r\n  };\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className={styles.errorContainer}>\r\n        <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {confirmDialog}\r\n      <UserPageLayout user={user}>\r\n      <div className={styles.settingsContainer}>\r\n        <h1 className={styles.pageTitle}>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>\r\n\r\n        {/* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–µ–º–æ–π */}\r\n        <ThemeDropdown />\r\n\r\n        {/* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π */}\r\n        <div className={styles.settingsCard}>\r\n          <h3 className={styles.cardTitle}>–ê–≤–∞—Ç–∞—Ä–∫–∞</h3>\r\n          <AvatarUpload user={user} />\r\n        </div>\r\n\r\n        {/* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—Ñ–∏–ª–µ */}\r\n        <div className={styles.settingsCard}>\r\n          <h3 className={styles.cardTitle}>–ü—Ä–æ—Ñ–∏–ª—å</h3>\r\n          <div className={styles.profileInfo}>\r\n            <div className={styles.infoRow}>\r\n              <span className={styles.infoLabel}>–ò–º—è:</span>\r\n              {isEditingName ? (\r\n                <div className={styles.editNameContainer}>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newDisplayName}\r\n                    onChange={(e) => setNewDisplayName(e.target.value)}\r\n                    className={styles.nameInput}\r\n                    placeholder=\"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è\"\r\n                    maxLength={50}\r\n                  />\r\n                  <div className={styles.editButtons}>\r\n                    <button \r\n                      onClick={handleSaveName} \r\n                      className={styles.saveButton}\r\n                      disabled={loading}\r\n                    >\r\n                      {loading ? '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'}\r\n                    </button>\r\n                    <button \r\n                      onClick={handleCancelEdit} \r\n                      className={styles.cancelButton}\r\n                      disabled={loading}\r\n                    >\r\n                      –û—Ç–º–µ–Ω–∞\r\n                    </button>\r\n                  </div>\r\n                  {saveError && (\r\n                    <div className={styles.errorMessage}>{saveError}</div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div className={styles.nameDisplay}>\r\n                  <span className={styles.infoValue}>{user.displayName}</span>\r\n                  <button \r\n                    onClick={() => setIsEditingName(true)} \r\n                    className={styles.editButton}\r\n                  >\r\n                    ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n            {user.telegramUsername && (\r\n              <div className={styles.infoRow}>\r\n                <span className={styles.infoLabel}>Telegram:</span>\r\n                <span className={styles.infoValue}>@{user.telegramUsername}</span>\r\n              </div>\r\n            )}\r\n            <div className={styles.infoRow}>\r\n              <span className={styles.infoLabel}>ID:</span>\r\n              <span className={styles.infoValue}>{user.id}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –≤—ã—Ö–æ–¥–æ–º */}\r\n        <div className={styles.settingsCard}>\r\n          <h3 className={styles.cardTitle}>–°–µ—Å—Å–∏—è</h3>\r\n          <button onClick={handleLogout} className={styles.logoutButton}>\r\n            –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞\r\n          </button>\r\n        </div>\r\n\r\n        {/* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∞–¥–º–∏–Ω–∞ */}\r\n        <div className={styles.settingsCard}>\r\n          <h3 className={styles.cardTitle}>–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Ä–µ–∫–ª–∞–º—ã</h3>\r\n          <div className={styles.contactInfo}>\r\n            <p className={styles.contactItem}>\r\n              <span className={styles.contactIcon}>üìß</span>\r\n              Email: <a href=\"mailto:admin@watchrebel.com\" className={styles.contactLink}>admin@watchrebel.com</a>\r\n            </p>\r\n            <p className={styles.contactItem}>\r\n              <span className={styles.contactIcon}>üí¨</span>\r\n              Telegram: <a href=\"https://t.me/watchrebel_admin\" className={styles.contactLink} target=\"_blank\" rel=\"noopener noreferrer\">@watchrebel_admin</a>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞) */}\r\n        {isAdmin && <AdminPanel />}\r\n      </div>\r\n    </UserPageLayout>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n"],"names":["ThemeDropdown","dispatch","useAppDispatch","theme","useAppSelector","state","isOpen","setIsOpen","useState","dropdownRef","useRef","themes","currentTheme","t","handleThemeSelect","themeValue","setTheme","useEffect","handleClickOutside","event","jsxs","styles","jsx","color","index","themeOption","AdminPanel","alertDialog","showAlert","useAlert","confirmDialog","showConfirm","useConfirm","users","setUsers","loading","setLoading","error","setError","announcement","setAnnouncement","editingUser","setEditingUser","newName","setNewName","loadUsers","response","api","err","handleDeleteUser","userId","u","handleRenameUser","handleBlockUser","isBlocked","handleCreateAnnouncement","handleBackup","Fragment","user","e","AvatarUpload","fileInputRef","uploading","setUploading","previewUrl","setPreviewUrl","handleFileSelect","file","reader","handleUpload","formData","updateProfile","handleButtonClick","_a","getAvatarUrl","SettingsPage","navigate","useNavigate","isAuthenticated","isEditingName","setIsEditingName","newDisplayName","setNewDisplayName","saveError","setSaveError","isAdmin","handleLogout","logout","handleSaveName","handleCancelEdit","UserPageLayout"],"mappings":"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"}