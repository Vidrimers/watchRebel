import{c as R,r as d,d as k,j as e,b as D,a as L,e as q,f as A,g as E,h as H}from"./index-BB5XFphy.js";import{U as M,a as U}from"./UserPageLayout-DBaLsdmh.js";const F="_referralStats_1q298_1",G="_statsHeader_1q298_17",O="_statsTitle_1q298_31",V="_statsCount_1q298_45",W="_countNumber_1q298_65",Y="_countLabel_1q298_77",z="_toggleButton_1q298_89",J="_referralsList_1q298_125",K="_referralsItems_1q298_137",Q="_referralItem_1q298_149",X="_referralAvatar_1q298_179",Z="_avatarPlaceholder_1q298_209",ee="_referralInfo_1q298_233",te="_referralName_1q298_241",se="_referralUsername_1q298_255",ae="_referralDate_1q298_267",ne="_emptyMessage_1q298_279",re="_loading_1q298_295",oe="_error_1q298_309",_={referralStats:F,statsHeader:G,statsTitle:O,statsCount:V,countNumber:W,countLabel:Y,toggleButton:z,referralsList:J,referralsItems:K,referralItem:Q,referralAvatar:X,avatarPlaceholder:Z,referralInfo:ee,referralName:te,referralUsername:se,referralDate:ae,emptyMessage:ne,loading:re,error:oe},le=({userId:t})=>{const{user:a}=R(u=>u.auth),[f,N]=d.useState(null),[m,r]=d.useState(0),[l,p]=d.useState([]),[g,j]=d.useState(!0),[h,s]=d.useState(!1),[w,B]=d.useState(null),x=(a==null?void 0:a.id)===t;d.useEffect(()=>{x&&I()},[t,x]);const I=async()=>{var u,b,P;try{j(!0),B(null);const i=await k.get(`/users/${t}/referral-code`);N(i.data.referralCode),r(i.data.referralsCount||0),j(!1)}catch(i){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤:",i),((u=i.response)==null?void 0:u.status)===404||((P=(b=i.response)==null?void 0:b.data)==null?void 0:P.code)==="USER_NOT_FOUND"?(N(null),r(0),j(!1)):(B("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"),j(!1))}},c=async()=>{var u;try{const b=await k.get(`/users/${t}/referrals`);p(b.data)}catch(b){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤:",b),((u=b.response)==null?void 0:u.status)===404?p([]):B("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤")}},v=async()=>{!h&&l.length===0&&await c(),s(!h)};return x?g?e.jsx("div",{className:_.referralStats,children:e.jsx("p",{className:_.loading,children:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏..."})}):w?e.jsx("div",{className:_.referralStats,children:e.jsx("p",{className:_.error,children:w})}):e.jsxs("div",{className:_.referralStats,children:[e.jsxs("div",{className:_.statsHeader,children:[e.jsx("h3",{className:_.statsTitle,children:"üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–µ –¥—Ä—É–∑—å—è"}),e.jsxs("div",{className:_.statsCount,children:[e.jsx("span",{className:_.countNumber,children:m}),e.jsx("span",{className:_.countLabel,children:"–¥—Ä—É–∑–µ–π"})]})]}),m>0&&e.jsx("button",{className:_.toggleButton,onClick:v,children:h?"‚ñº –°–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫":"‚ñ∂ –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫"}),h&&e.jsx("div",{className:_.referralsList,children:l.length===0?e.jsx("p",{className:_.emptyMessage,children:"–ó–∞–≥—Ä—É–∑–∫–∞..."}):e.jsx("ul",{className:_.referralsItems,children:l.map(u=>e.jsxs("li",{className:_.referralItem,children:[e.jsx("div",{className:_.referralAvatar,children:u.avatarUrl?e.jsx("img",{src:u.avatarUrl,alt:u.displayName}):e.jsx("div",{className:_.avatarPlaceholder,children:u.displayName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:_.referralInfo,children:[e.jsx("p",{className:_.referralName,children:u.displayName}),u.telegramUsername&&e.jsxs("p",{className:_.referralUsername,children:["@",u.telegramUsername]}),e.jsxs("p",{className:_.referralDate,children:["–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è: ",new Date(u.referralCreatedAt).toLocaleDateString("ru-RU")]})]})]},u.id))})}),m===0&&e.jsx("p",{className:_.emptyMessage,children:"–í—ã –µ—â–µ –Ω–µ –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏ –¥—Ä—É–∑–µ–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Telegram –±–æ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏!"})]}):null},ie="_moderationPanel_7rr7w_1",ce="_title_7rr7w_17",de="_actions_7rr7w_29",me="_button_7rr7w_41",ue="_banPostsButton_7rr7w_71",_e="_permanentBanButton_7rr7w_89",fe="_unbanButton_7rr7w_107",he="_modalOverlay_7rr7w_127",pe="_modal_7rr7w_127",xe="_modalTitle_7rr7w_177",je="_error_7rr7w_189",Ne="_formGroup_7rr7w_209",ve="_textarea_7rr7w_231",ge="_input_7rr7w_233",we="_durationPresets_7rr7w_281",be="_presetButton_7rr7w_295",ye="_modalActions_7rr7w_339",Ce="_cancelButton_7rr7w_351",o={moderationPanel:ie,title:ce,actions:de,button:me,banPostsButton:ue,permanentBanButton:_e,unbanButton:fe,modalOverlay:he,modal:pe,modalTitle:xe,error:je,formGroup:Ne,textarea:ve,input:ge,durationPresets:we,presetButton:be,modalActions:ye,cancelButton:Ce};function Be({userId:t,isAdmin:a,onModerationAction:f}){const[N,m]=d.useState(!1),[r,l]=d.useState(null),[p,g]=d.useState(""),[j,h]=d.useState(1440),[s,w]=d.useState(!1),[B,x]=d.useState(null);if(!a)return null;const I=async()=>{var i,C;if(!p.trim()){x("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏");return}if(j<=0){x("–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ 0");return}w(!0),x(null);try{await k.post(`/admin/users/${t}/ban-posts`,{reason:p.trim(),durationMinutes:j}),m(!1),g(""),h(1440),f&&f("post_ban"),alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∑–∞–ø—Ä–µ—â–µ–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç—ã")}catch(S){console.error("–û—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å—Ç–æ–≤:",S),x(((C=(i=S.response)==null?void 0:i.data)==null?void 0:C.error)||"–û—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å—Ç–æ–≤")}finally{w(!1)}},c=async()=>{var i,C;if(!p.trim()){x("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏");return}if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞–≤—Å–µ–≥–¥–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?")){w(!0),x(null);try{await k.post(`/admin/users/${t}/ban-permanent`,{reason:p.trim()}),m(!1),g(""),f&&f("permanent_ban"),alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞")}catch(S){console.error("–û—à–∏–±–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:",S),x(((C=(i=S.response)==null?void 0:i.data)==null?void 0:C.error)||"–û—à–∏–±–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏")}finally{w(!1)}}},v=async()=>{var i,C;if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?")){w(!0),x(null);try{await k.post(`/admin/users/${t}/unban`),f&&f("unban"),alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω")}catch(S){console.error("–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:",S),x(((C=(i=S.response)==null?void 0:i.data)==null?void 0:C.error)||"–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏")}finally{w(!1)}}},u=()=>{l("posts"),m(!0),x(null)},b=()=>{l("permanent"),m(!0),x(null)},P=()=>{m(!1),l(null),g(""),h(1440),x(null)};return e.jsxs("div",{className:o.moderationPanel,children:[e.jsx("h3",{className:o.title,children:"‚ö†Ô∏è –ú–æ–¥–µ—Ä–∞—Ü–∏—è"}),e.jsxs("div",{className:o.actions,children:[e.jsx("button",{className:`${o.button} ${o.banPostsButton}`,onClick:u,disabled:s,children:"üö´ –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø–æ—Å—Ç—ã"}),e.jsx("button",{className:`${o.button} ${o.permanentBanButton}`,onClick:b,disabled:s,children:"‚õî –ó–∞–±–∞–Ω–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞"}),e.jsx("button",{className:`${o.button} ${o.unbanButton}`,onClick:v,disabled:s,children:"‚úÖ –†–∞–∑–±–∞–Ω–∏—Ç—å"})]}),N&&e.jsx("div",{className:o.modalOverlay,onClick:P,children:e.jsxs("div",{className:o.modal,onClick:i=>i.stopPropagation(),children:[e.jsx("h3",{className:o.modalTitle,children:r==="posts"?"üö´ –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø–æ—Å—Ç—ã":"‚õî –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞"}),B&&e.jsx("div",{className:o.error,children:B}),e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{htmlFor:"reason",children:"–ü—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:"}),e.jsx("textarea",{id:"reason",className:o.textarea,value:p,onChange:i=>g(i.target.value),placeholder:"–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏...",rows:4,disabled:s})]}),r==="posts"&&e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{htmlFor:"duration",children:"–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç—ã):"}),e.jsx("input",{id:"duration",type:"number",className:o.input,value:j,onChange:i=>h(parseInt(i.target.value)||0),min:"1",disabled:s}),e.jsxs("div",{className:o.durationPresets,children:[e.jsx("button",{className:o.presetButton,onClick:()=>h(60),disabled:s,children:"1 —á–∞—Å"}),e.jsx("button",{className:o.presetButton,onClick:()=>h(1440),disabled:s,children:"1 –¥–µ–Ω—å"}),e.jsx("button",{className:o.presetButton,onClick:()=>h(10080),disabled:s,children:"1 –Ω–µ–¥–µ–ª—è"}),e.jsx("button",{className:o.presetButton,onClick:()=>h(43200),disabled:s,children:"1 –º–µ—Å—è—Ü"})]})]}),e.jsxs("div",{className:o.modalActions,children:[e.jsx("button",{className:`${o.button} ${o.cancelButton}`,onClick:P,disabled:s,children:"–û—Ç–º–µ–Ω–∞"}),e.jsx("button",{className:`${o.button} ${r==="posts"?o.banPostsButton:o.permanentBanButton}`,onClick:r==="posts"?I:c,disabled:s,children:s?"–û–±—Ä–∞–±–æ—Ç–∫–∞...":"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"})]})]})})]})}const Pe="_reactionPicker_wifv9_3",Te="_pickerHeader_wifv9_57",Se="_pickerTitle_wifv9_75",ke="_closeButton_wifv9_87",Ie="_emojiGrid_wifv9_133",$e="_emojiButton_wifv9_145",$={reactionPicker:Pe,pickerHeader:Te,pickerTitle:Se,closeButton:ke,emojiGrid:Ie,emojiButton:$e},Re=({onSelect:t,onClose:a})=>{const f=d.useRef(null),N=["‚ù§Ô∏è","üëç","üòÇ","üòÆ","üò¢","üò°","üî•","üëè","üéâ","üíØ","ü§î","üòç","ü§©","üòé","ü•≥","üò±","ü§Ø","üëÄ"];d.useEffect(()=>{const r=l=>{f.current&&!f.current.contains(l.target)&&a()};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[a]),d.useEffect(()=>{const r=l=>{l.key==="Escape"&&a()};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[a]);const m=r=>{t(r)};return e.jsxs("div",{className:$.reactionPicker,ref:f,children:[e.jsxs("div",{className:$.pickerHeader,children:[e.jsx("span",{className:$.pickerTitle,children:"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∞–∫—Ü–∏—é"}),e.jsx("button",{className:$.closeButton,onClick:a,"aria-label":"–ó–∞–∫—Ä—ã—Ç—å",children:"√ó"})]}),e.jsx("div",{className:$.emojiGrid,children:N.map(r=>e.jsx("button",{className:$.emojiButton,onClick:()=>m(r),title:r,children:r},r))})]})},De="_wallPost_ngmuw_3",Le="_postContent_ngmuw_29",qe="_textContent_ngmuw_39",Ae="_actionText_ngmuw_59",Ee="_mediaInfo_ngmuw_73",He="_mediaDetails_ngmuw_117",Me="_mediaTitle_ngmuw_133",Ue="_mediaType_ngmuw_149",Fe="_ratingValue_ngmuw_161",Ge="_ratingStars_ngmuw_175",Oe="_ratingNumber_ngmuw_185",Ve="_reviewText_ngmuw_199",We="_postFooter_ngmuw_235",Ye="_postDate_ngmuw_251",ze="_reactionsContainer_ngmuw_263",Je="_reactionsList_ngmuw_275",Ke="_reactionBadge_ngmuw_287",Qe="_addReactionContainer_ngmuw_321",Xe="_addReactionButton_ngmuw_329",n={wallPost:De,postContent:Le,textContent:qe,actionText:Ae,mediaInfo:Ee,mediaDetails:He,mediaTitle:Me,mediaType:Ue,ratingValue:Fe,ratingStars:Ge,ratingNumber:Oe,reviewText:Ve,postFooter:We,postDate:Ye,reactionsContainer:ze,reactionsList:Je,reactionBadge:Ke,addReactionContainer:Qe,addReactionButton:Xe},Ze=({post:t,isOwnProfile:a})=>{var x,I;const f=D(),N=L(),m=R(c=>c.auth.user),[r,l]=d.useState(!1),p=async c=>{try{await f(q({postId:t.id,emoji:c})).unwrap(),l(!1)}catch(v){console.error("–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏:",v)}},g=c=>{const v=new Date(c),u=new Date,b=u-v,P=Math.floor(b/6e4),i=Math.floor(b/36e5),C=Math.floor(b/864e5);return P<1?"—Ç–æ–ª—å–∫–æ —á—Ç–æ":P<60?`${P} –º–∏–Ω –Ω–∞–∑–∞–¥`:i<24?`${i} —á –Ω–∞–∑–∞–¥`:C<7?`${C} –¥ –Ω–∞–∑–∞–¥`:v.toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:v.getFullYear()!==u.getFullYear()?"numeric":void 0})},j=()=>{t.tmdbId&&t.mediaType&&N(`/media/${t.mediaType}/${t.tmdbId}`)},h=()=>{switch(t.postType){case"text":return e.jsx("div",{className:n.textContent,children:e.jsx("p",{children:t.content})});case"media_added":return e.jsxs("div",{className:n.mediaAddedContent,children:[e.jsxs("p",{className:n.actionText,children:["üìå –î–æ–±–∞–≤–∏–ª",a?"":"–∞"," –≤ —Å–ø–∏—Å–æ–∫"]}),t.tmdbId&&e.jsx("div",{className:n.mediaInfo,onClick:j,children:e.jsxs("div",{className:n.mediaDetails,children:[e.jsxs("h4",{className:n.mediaTitle,children:[t.mediaType==="movie"?"–§–∏–ª—å–º":"–°–µ—Ä–∏–∞–ª"," (ID: ",t.tmdbId,")"]}),e.jsx("span",{className:n.mediaType,children:t.mediaType==="movie"?"üé¨ –§–∏–ª—å–º":"üì∫ –°–µ—Ä–∏–∞–ª"})]})})]});case"rating":return e.jsxs("div",{className:n.ratingContent,children:[e.jsxs("p",{className:n.actionText,children:["‚≠ê –û—Ü–µ–Ω–∏–ª",a?"":"–∞"]}),t.tmdbId&&e.jsx("div",{className:n.mediaInfo,onClick:j,children:e.jsxs("div",{className:n.mediaDetails,children:[e.jsxs("h4",{className:n.mediaTitle,children:[t.mediaType==="movie"?"–§–∏–ª—å–º":"–°–µ—Ä–∏–∞–ª"," (ID: ",t.tmdbId,")"]}),e.jsxs("div",{className:n.ratingValue,children:[e.jsx("span",{className:n.ratingStars,children:"‚òÖ"}),e.jsxs("span",{className:n.ratingNumber,children:[t.rating,"/10"]})]})]})})]});case"review":return e.jsxs("div",{className:n.reviewContent,children:[e.jsxs("p",{className:n.actionText,children:["‚úçÔ∏è –ù–∞–ø–∏—Å–∞–ª",a?"":"–∞"," –æ—Ç–∑—ã–≤"]}),t.tmdbId&&e.jsx("div",{className:n.mediaInfo,onClick:j,children:e.jsx("div",{className:n.mediaDetails,children:e.jsxs("h4",{className:n.mediaTitle,children:[t.mediaType==="movie"?"–§–∏–ª—å–º":"–°–µ—Ä–∏–∞–ª"," (ID: ",t.tmdbId,")"]})})}),t.content&&e.jsx("div",{className:n.reviewText,children:e.jsx("p",{children:t.content})})]});default:return null}},s=((x=t.reactions)==null?void 0:x.reduce((c,v)=>(c[v.emoji]||(c[v.emoji]={emoji:v.emoji,count:0,users:[]}),c[v.emoji].count++,c[v.emoji].users.push(v.userId),c),{}))||{},w=Object.values(s),B=(I=t.reactions)==null?void 0:I.find(c=>c.userId===(m==null?void 0:m.id));return e.jsxs("div",{className:n.wallPost,children:[e.jsx("div",{className:n.postContent,children:h()}),e.jsxs("div",{className:n.postFooter,children:[e.jsx("span",{className:n.postDate,children:g(t.createdAt)}),e.jsxs("div",{className:n.reactionsContainer,children:[w.length>0&&e.jsx("div",{className:n.reactionsList,children:w.map(c=>e.jsxs("span",{className:n.reactionBadge,title:`${c.count} ${c.count===1?"—Ä–µ–∞–∫—Ü–∏—è":"—Ä–µ–∞–∫—Ü–∏–π"}`,children:[c.emoji," ",c.count]},c.emoji))}),!a&&m&&e.jsxs("div",{className:n.addReactionContainer,children:[e.jsx("button",{className:n.addReactionButton,onClick:()=>l(!r),title:B?"–ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é":"–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é",children:B?B.emoji:"üòä"}),r&&e.jsx(Re,{onSelect:p,onClose:()=>l(!1)})]})]})]})]})},et="_wall_1v69n_3",tt="_createPostContainer_1v69n_17",st="_createPostForm_1v69n_33",at="_postInput_1v69n_45",nt="_submitButton_1v69n_89",rt="_postsList_1v69n_135",ot="_loading_1v69n_149",lt="_error_1v69n_151",it="_emptyState_1v69n_177",ct="_emptyHint_1v69n_205",y={wall:et,createPostContainer:tt,createPostForm:st,postInput:at,submitButton:nt,postsList:rt,loading:ot,error:lt,emptyState:it,emptyHint:ct},dt=({userId:t,isOwnProfile:a=!1})=>{const f=D(),{posts:N,loading:m,error:r}=R(s=>s.wall),[l,p]=d.useState(""),[g,j]=d.useState(!1);d.useEffect(()=>{t&&f(A(t))},[f,t]);const h=async s=>{if(s.preventDefault(),!!l.trim()){j(!0);try{await f(E({postType:"text",content:l.trim()})).unwrap(),p("")}catch(w){console.error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞:",w)}finally{j(!1)}}};return m&&N.length===0?e.jsx("div",{className:y.wall,children:e.jsx("div",{className:y.loading,children:"–ó–∞–≥—Ä—É–∑–∫–∞..."})}):r?e.jsx("div",{className:y.wall,children:e.jsxs("div",{className:y.error,children:["–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–µ–Ω—ã: ",r.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"]})}):e.jsxs("div",{className:y.wall,children:[a&&e.jsx("div",{className:y.createPostContainer,children:e.jsxs("form",{onSubmit:h,className:y.createPostForm,children:[e.jsx("textarea",{className:y.postInput,placeholder:"–ß—Ç–æ —É –≤–∞—Å –Ω–æ–≤–æ–≥–æ?",value:l,onChange:s=>p(s.target.value),rows:3,disabled:g}),e.jsx("button",{type:"submit",className:y.submitButton,disabled:!l.trim()||g,children:g?"–ü—É–±–ª–∏–∫–∞—Ü–∏—è...":"–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"})]})}),e.jsx("div",{className:y.postsList,children:N.length===0?e.jsxs("div",{className:y.emptyState,children:[e.jsx("p",{children:"–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç–µ–Ω–µ"}),a&&e.jsx("p",{className:y.emptyHint,children:"–î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å–º –≤ —Å–ø–∏—Å–æ–∫ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å!"})]}):N.map(s=>e.jsx(Ze,{post:s,isOwnProfile:a},s.id))})]})},mt="_profileContainer_27but_1",ut="_profileHeader_27but_9",_t="_profileInfo_27but_31",ft="_profileName_27but_39",ht="_wallSection_27but_65",pt="_sectionTitle_27but_79",xt="_errorContainer_27but_303",T={profileContainer:mt,profileHeader:ut,profileInfo:_t,profileName:ft,wallSection:ht,sectionTitle:pt,errorContainer:xt},vt=()=>{const{userId:t}=H(),{user:a,isAuthenticated:f}=R(h=>h.auth),[N,m]=d.useState(null),[r,l]=d.useState(!0),p=(a==null?void 0:a.id)===t,g=(a==null?void 0:a.isAdmin)||!1;d.useEffect(()=>{f&&t&&(async()=>{try{if(l(!0),p){m(a),l(!1);return}const s=await k.get(`/users/${t}`);m(s.data)}catch(s){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:",s)}finally{l(!1)}})()},[t,f,p,a]);const j=async h=>{console.log("–î–µ–π—Å—Ç–≤–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏:",h);try{const s=await k.get(`/users/${t}`);m(s.data)}catch(s){console.error("–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:",s)}};return f?r?e.jsx("div",{className:T.errorContainer,children:e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è..."})}):N?e.jsx(M,{user:a,children:e.jsxs("div",{className:T.profileContainer,children:[!p&&e.jsxs("div",{className:T.profileHeader,children:[e.jsx(U,{user:N,size:"large",showBanIndicator:!0}),e.jsx("div",{className:T.profileInfo,children:e.jsx("h1",{className:T.profileName,children:N.displayName})})]}),g&&!p&&e.jsx(Be,{userId:t,isAdmin:g,onModerationAction:j}),p&&e.jsx(le,{userId:t}),e.jsxs("div",{className:T.wallSection,children:[e.jsx("h2",{className:T.sectionTitle,children:"–õ–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"}),e.jsx(dt,{userId:t,isOwnProfile:p})]})]})}):e.jsx("div",{className:T.errorContainer,children:e.jsx("p",{children:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"})}):e.jsx("div",{className:T.errorContainer,children:e.jsx("p",{children:"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"})})};export{vt as default};
//# sourceMappingURL=UserProfilePage-AWS7u_zQ.js.map
