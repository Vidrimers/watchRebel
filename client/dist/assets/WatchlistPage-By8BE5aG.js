import{b as A,u as k,c as j,r,A as O,m as D,j as e,q as W,o as $}from"./index-GLrqEWvZ.js";import{U as G}from"./UserPageLayout-D_nUOe2R.js";import{M as E}from"./MediaCard-CvUO74RO.js";import{C as F}from"./ConfirmDialog-Ol20coub.js";import{u as U}from"./useAlert-NXgLQgpe.js";const q="_watchlistPage_1lsxc_1",R="_pageHeader_1lsxc_9",z="_pageTitle_1lsxc_27",J="_filterButtons_1lsxc_43",K="_filterButton_1lsxc_43",Q="_active_1lsxc_97",V="_countInfo_1lsxc_111",X="_loadingContainer_1lsxc_143",Y="_errorMessage_1lsxc_145",Z="_errorContainer_1lsxc_181",ee="_emptyState_1lsxc_201",te="_emptyIcon_1lsxc_217",se="_emptyTitle_1lsxc_229",le="_emptyHint_1lsxc_243",ae="_mediaGrid_1lsxc_257",ne="_mediaCardWrapper_1lsxc_271",oe="_itemActions_1lsxc_287",ie="_moveButton_1lsxc_297",ce="_deleteButton_1lsxc_299",re="_modalOverlay_1lsxc_383",de="_modal_1lsxc_383",me="_modalHeader_1lsxc_457",_e="_modalTitle_1lsxc_473",pe="_modalClose_1lsxc_487",he="_modalContent_1lsxc_531",xe="_modalSubtitle_1lsxc_543",ue="_listOptions_1lsxc_557",ge="_listOption_1lsxc_557",je="_listOptionName_1lsxc_607",ve="_listOptionCount_1lsxc_619",fe="_noLists_1lsxc_637",Ce="_noListsHint_1lsxc_659",t={watchlistPage:q,pageHeader:R,pageTitle:z,filterButtons:J,filterButton:K,active:Q,countInfo:V,loadingContainer:X,errorMessage:Y,errorContainer:Z,emptyState:ee,emptyIcon:te,emptyTitle:se,emptyHint:le,mediaGrid:ae,mediaCardWrapper:ne,itemActions:oe,moveButton:ie,deleteButton:ce,modalOverlay:re,modal:de,modalHeader:me,modalTitle:_e,modalClose:pe,modalContent:he,modalSubtitle:xe,listOptions:ue,listOption:ge,listOptionName:je,listOptionCount:ve,noLists:fe,noListsHint:Ce},Se=()=>{const n=A(),{showAlert:v}=U(),[T,B]=k(),{user:S,isAuthenticated:m}=j(s=>s.auth),{watchlist:f,customLists:b,loading:_,error:d}=j(s=>s.lists),{episodeProgress:C}=j(s=>s.lists),c=T.get("type")||"all",[H,p]=r.useState(!1),[l,h]=r.useState(null),[w,x]=r.useState(!1),[o,u]=r.useState(null);r.useEffect(()=>{m&&(n(O()),n(D()))},[m,n]);const i=c==="all"?f:f.filter(s=>s.mediaType===c),g=s=>{B(s==="all"?{}:{type:s})},I=s=>{h(s),p(!0)},L=async s=>{if(l)try{await n(W({listId:s,media:{tmdbId:l.tmdbId,mediaType:l.mediaType}})).unwrap(),p(!1),h(null),n(O())}catch(a){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –≤ —Å–ø–∏—Å–æ–∫:",a)}},y=()=>{p(!1),h(null)},M=s=>{u(s),x(!0)},P=async()=>{if(o)try{await n($(o.id)).unwrap(),x(!1),u(null),await v({title:"–£—Å–ø–µ—à–Ω–æ!",message:`"${o.title}" —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞ –∂–µ–ª–∞–µ–º–æ–≥–æ`,type:"success"})}catch(s){console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:",s),await v({title:"–û—à–∏–±–∫–∞",message:"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",type:"error"})}},N=l?b.filter(s=>s.mediaType===l.mediaType):[];return m?e.jsx(G,{user:S,children:e.jsxs("div",{className:t.watchlistPage,children:[e.jsxs("div",{className:t.pageHeader,children:[e.jsx("h1",{className:t.pageTitle,children:"–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–µ–º–æ–≥–æ"}),e.jsxs("div",{className:t.filterButtons,children:[e.jsx("button",{className:`${t.filterButton} ${c==="all"?t.active:""}`,onClick:()=>g("all"),children:"–í—Å–µ"}),e.jsx("button",{className:`${t.filterButton} ${c==="movie"?t.active:""}`,onClick:()=>g("movie"),children:"üé¨ –§–∏–ª—å–º—ã"}),e.jsx("button",{className:`${t.filterButton} ${c==="tv"?t.active:""}`,onClick:()=>g("tv"),children:"üì∫ –°–µ—Ä–∏–∞–ª—ã"})]})]}),!_&&!d&&e.jsx("div",{className:t.countInfo,children:e.jsxs("p",{children:[i.length," "," ",i.length===1?"—ç–ª–µ–º–µ–Ω—Ç":i.length>1&&i.length<5?"—ç–ª–µ–º–µ–Ω—Ç–∞":"—ç–ª–µ–º–µ–Ω—Ç–æ–≤"]})}),_&&e.jsx("div",{className:t.loadingContainer,children:e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∂–µ–ª–∞–µ–º–æ–≥–æ..."})}),d&&e.jsx("div",{className:t.errorMessage,children:e.jsxs("p",{children:["–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ",d.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"]})}),!_&&!d&&e.jsx(e.Fragment,{children:i.length===0?e.jsxs("div",{className:t.emptyState,children:[e.jsx("div",{className:t.emptyIcon,children:"üìã"}),e.jsx("p",{className:t.emptyTitle,children:"–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–µ–º–æ–≥–æ –ø—É—Å—Ç"}),e.jsx("p",{className:t.emptyHint,children:"–î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"})]}):e.jsx("div",{className:t.mediaGrid,children:i.map(s=>{var a;return e.jsxs("div",{className:t.mediaCardWrapper,children:[e.jsx(E,{media:s,showProgress:s.mediaType==="tv",progress:(a=C[s.tmdbId])==null?void 0:a[C[s.tmdbId].length-1]}),e.jsxs("div",{className:t.itemActions,children:[e.jsx("button",{className:t.moveButton,onClick:()=>I(s),title:"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",children:"‚Üí"}),e.jsx("button",{className:t.deleteButton,onClick:()=>M(s),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ –∂–µ–ª–∞–µ–º–æ–≥–æ",children:"üóëÔ∏è"})]})]},s.tmdbId)})})}),H&&l&&e.jsx("div",{className:t.modalOverlay,onClick:y,children:e.jsxs("div",{className:t.modal,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:t.modalHeader,children:[e.jsx("h2",{className:t.modalTitle,children:"–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫"}),e.jsx("button",{className:t.modalClose,onClick:y,children:"√ó"})]}),e.jsxs("div",{className:t.modalContent,children:[e.jsxs("p",{className:t.modalSubtitle,children:['–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å "',l.title,'" –≤:']}),N.length===0?e.jsxs("div",{className:t.noLists,children:[e.jsxs("p",{children:["–£ –≤–∞—Å –Ω–µ—Ç —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è ",l.mediaType==="movie"?"—Ñ–∏–ª—å–º–æ–≤":"—Å–µ—Ä–∏–∞–ª–æ–≤"]}),e.jsx("p",{className:t.noListsHint,children:'–°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ú–æ–∏ —Å–ø–∏—Å–∫–∏"'})]}):e.jsx("div",{className:t.listOptions,children:N.map(s=>{var a;return e.jsxs("button",{className:t.listOption,onClick:()=>L(s.id),children:[e.jsx("span",{className:t.listOptionName,children:s.name}),e.jsxs("span",{className:t.listOptionCount,children:[((a=s.items)==null?void 0:a.length)||0," —ç–ª–µ–º–µ–Ω—Ç–æ–≤"]})]},s.id)})})]})]})}),e.jsx(F,{isOpen:w,title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ –∂–µ–ª–∞–µ–º–æ–≥–æ",message:`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å "${o==null?void 0:o.title}" –∏–∑ —Å–ø–∏—Å–∫–∞ –∂–µ–ª–∞–µ–º–æ–≥–æ?`,onConfirm:P,onCancel:()=>{x(!1),u(null)},confirmText:"–£–¥–∞–ª–∏—Ç—å",cancelText:"–û—Ç–º–µ–Ω–∞",confirmButtonStyle:"danger"})]})}):e.jsx("div",{className:t.errorContainer,children:e.jsx("p",{children:"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"})})};export{Se as default};
//# sourceMappingURL=WatchlistPage-By8BE5aG.js.map
