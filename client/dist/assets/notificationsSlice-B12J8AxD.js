import{d as i,e as s,A as c,N as f,f as d}from"./index-Djl9NHxl.js";const o=(n,a)=>n instanceof c?a(n.data||n.message):n instanceof f?a({message:n.message}):a({message:"Неизвестная ошибка"}),u=i("notifications/fetchNotifications",async(n,{rejectWithValue:a})=>{try{return(await s.get("/notifications")).data}catch(t){return o(t,a)}}),l=i("notifications/markAsRead",async(n,{rejectWithValue:a})=>{try{return await s.put(`/notifications/${n}/read`),n}catch(t){return o(t,a)}});d({name:"notifications",initialState:{notifications:[],unreadCount:0,loading:!1},reducers:{},extraReducers:n=>{n.addCase(u.fulfilled,(a,t)=>{a.notifications=t.payload,a.unreadCount=t.payload.filter(e=>!e.isRead).length}).addCase(l.fulfilled,(a,t)=>{const e=a.notifications.find(r=>r.id===t.payload);e&&(e.isRead=!0,a.unreadCount=Math.max(0,a.unreadCount-1))})}});export{u as f,l as m};
//# sourceMappingURL=notificationsSlice-B12J8AxD.js.map
