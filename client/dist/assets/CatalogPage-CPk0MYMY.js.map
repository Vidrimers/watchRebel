{"version":3,"file":"CatalogPage-CPk0MYMY.js","sources":["../../src/components/Media/MediaGrid.jsx","../../src/pages/CatalogPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles from './MediaGrid.module.css';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–µ—Ç–∫–∏ –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ñ–∏–ª—å–º—ã/—Å–µ—Ä–∏–∞–ª—ã –≤ –≤–∏–¥–µ —Å–µ—Ç–∫–∏ —Å –ø–æ—Å—Ç–µ—Ä–∞–º–∏\r\n * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç hover —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –∫–Ω–æ–ø–∫—É –¥–µ–π—Å—Ç–≤–∏–π\r\n */\r\nconst MediaGrid = ({ items, mediaType, onAddToList, onAddToWatchlist }) => {\r\n  const navigate = useNavigate();\r\n  const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n  /**\r\n   * –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É\r\n   */\r\n  const handleCardClick = (item) => {\r\n    const type = mediaType || (item.title ? 'movie' : 'tv');\r\n    navigate(`/media/${type}/${item.id}`);\r\n  };\r\n\r\n  /**\r\n   * –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π\r\n   */\r\n  const toggleMenu = (e, itemId) => {\r\n    e.stopPropagation();\r\n    setActiveMenu(activeMenu === itemId ? null : itemId);\r\n  };\r\n\r\n  /**\r\n   * –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ\r\n   */\r\n  React.useEffect(() => {\r\n    const handleClickOutside = () => {\r\n      if (activeMenu) {\r\n        setActiveMenu(null);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('click', handleClickOutside);\r\n    return () => document.removeEventListener('click', handleClickOutside);\r\n  }, [activeMenu]);\r\n\r\n  /**\r\n   * –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫\r\n   */\r\n  const handleAddToList = (e, item) => {\r\n    e.stopPropagation();\r\n    setActiveMenu(null);\r\n    if (onAddToList) {\r\n      onAddToList(item);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ watchlist\r\n   */\r\n  const handleAddToWatchlist = (e, item) => {\r\n    e.stopPropagation();\r\n    setActiveMenu(null);\r\n    if (onAddToWatchlist) {\r\n      onAddToWatchlist(item);\r\n    }\r\n  };\r\n\r\n  if (!items || items.length === 0) {\r\n    return (\r\n      <div className={styles.empty}>\r\n        <p>–ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.mediaGrid}>\r\n      {items.map((item) => {\r\n        const title = item.title || item.name;\r\n        const releaseDate = item.release_date || item.first_air_date;\r\n        const year = releaseDate ? new Date(releaseDate).getFullYear() : null;\r\n        const posterUrl = item.poster_path\r\n          ? `https://image.tmdb.org/t/p/w342${item.poster_path}`\r\n          : '/default-poster.png';\r\n\r\n        return (\r\n          <div\r\n            key={item.id}\r\n            className={styles.mediaCard}\r\n            onClick={() => handleCardClick(item)}\r\n            onMouseLeave={() => setActiveMenu(null)}\r\n          >\r\n            {/* –ü–æ—Å—Ç–µ—Ä */}\r\n            <div className={styles.posterContainer}>\r\n              <img\r\n                src={posterUrl}\r\n                alt={title}\r\n                className={styles.poster}\r\n                loading=\"lazy\"\r\n              />\r\n              \r\n              {/* Overlay —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø—Ä–∏ hover */}\r\n              <div className={styles.overlay}>\r\n                <div className={styles.overlayContent}>\r\n                  <h3 className={styles.overlayTitle}>{title}</h3>\r\n                  {year && (\r\n                    <p className={styles.overlayYear}>{year}</p>\r\n                  )}\r\n                  {item.vote_average > 0 && (\r\n                    <div className={styles.overlayRating}>\r\n                      ‚≠ê {item.vote_average.toFixed(1)}\r\n                    </div>\r\n                  )}\r\n                  {item.overview && (\r\n                    <p className={styles.overlayOverview}>\r\n                      {item.overview.length > 100\r\n                        ? `${item.overview.substring(0, 100)}...`\r\n                        : item.overview}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* –ö–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π */}\r\n                <button\r\n                  className={styles.actionButton}\r\n                  onClick={(e) => toggleMenu(e, item.id)}\r\n                  title=\"–î–µ–π—Å—Ç–≤–∏—è\"\r\n                >\r\n                  ‚ãÆ\r\n                </button>\r\n\r\n                {/* –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é */}\r\n                {activeMenu === item.id && (\r\n                  <div className={styles.actionMenu}>\r\n                    <button\r\n                      className={styles.menuItem}\r\n                      onClick={(e) => handleAddToList(e, item)}\r\n                    >\r\n                      üìã –î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫\r\n                    </button>\r\n                    <button\r\n                      className={styles.menuItem}\r\n                      onClick={(e) => handleAddToWatchlist(e, item)}\r\n                    >\r\n                      ‚≠ê –•–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–¥ –ø–æ—Å—Ç–µ—Ä–æ–º */}\r\n            <div className={styles.cardInfo}>\r\n              <h3 className={styles.cardTitle} title={title}>\r\n                {title}\r\n              </h3>\r\n              {year && (\r\n                <p className={styles.cardYear}>{year}</p>\r\n              )}\r\n              {item.vote_average > 0 && (\r\n                <div className={styles.cardRating}>\r\n                  ‚≠ê {item.vote_average.toFixed(1)}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaGrid;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { useAppDispatch } from '../hooks/useAppDispatch';\r\nimport { useAppSelector } from '../hooks/useAppSelector';\r\nimport UserPageLayout from '../components/Layout/UserPageLayout';\r\nimport { MediaGrid } from '../components/Media';\r\nimport { fetchLists, addToList, addToWatchlist } from '../store/slices/listsSlice';\r\nimport useAlert from '../hooks/useAlert';\r\nimport ConfirmDialog from '../components/Common/ConfirmDialog';\r\nimport api from '../services/api';\r\nimport styles from './CatalogPage.module.css';\r\n\r\n/**\r\n * –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ —Ñ–∏–ª—å–º–∞–º–∏ –∏ —Å–µ—Ä–∏–∞–ª–∞–º–∏\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ TMDb —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏\r\n */\r\nconst CatalogPage = () => {\r\n  console.log('üé¨ CatalogPage —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è');\r\n  \r\n  const dispatch = useAppDispatch();\r\n  const { showAlert } = useAlert();\r\n  const { user } = useAppSelector((state) => state.auth);\r\n  const { customLists } = useAppSelector((state) => state.lists);\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  \r\n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ\r\n  const [movies, setMovies] = useState([]);\r\n  const [tvShows, setTVShows] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [genres, setGenres] = useState({ movieGenres: [], tvGenres: [] });\r\n  \r\n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–∏—Å–∫–∞\r\n  const [showListSelector, setShowListSelector] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  const [selectedListId, setSelectedListId] = useState('');\r\n  \r\n  // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL\r\n  const activeTab = searchParams.get('tab') || 'movies'; // movies | tv\r\n  const currentPage = parseInt(searchParams.get('page')) || 1;\r\n  const selectedGenre = searchParams.get('genre') || '';\r\n  const selectedYear = searchParams.get('year') || '';\r\n  const sortBy = searchParams.get('sort') || 'popularity.desc';\r\n  \r\n  // –ü–∞–≥–∏–Ω–∞—Ü–∏—è\r\n  const [totalPages, setTotalPages] = useState(1);\r\n\r\n  // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n  useEffect(() => {\r\n    dispatch(fetchLists());\r\n  }, [dispatch]);\r\n\r\n  // –ó–∞–≥—Ä—É–∑–∫–∞ –∂–∞–Ω—Ä–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n  useEffect(() => {\r\n    console.log('üöÄ useEffect –¥–ª—è –∂–∞–Ω—Ä–æ–≤ –∑–∞–ø—É—â–µ–Ω');\r\n    loadGenres();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤\r\n  useEffect(() => {\r\n    loadContent();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeTab, currentPage, selectedGenre, selectedYear, sortBy]);\r\n\r\n  /**\r\n   * –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∂–∞–Ω—Ä–æ–≤\r\n   */\r\n  const loadGenres = async () => {\r\n    try {\r\n      console.log('üé¨ –ó–∞–≥—Ä—É–∑–∫–∞ –∂–∞–Ω—Ä–æ–≤...');\r\n      const response = await api.get('/media/genres');\r\n      console.log('üì¶ –û—Ç–≤–µ—Ç –æ—Ç API:', response.data);\r\n      \r\n      if (response.data) {\r\n        console.log('üé≠ –ñ–∞–Ω—Ä—ã —Ñ–∏–ª—å–º–æ–≤:', response.data.movieGenres?.length || 0);\r\n        console.log('üì∫ –ñ–∞–Ω—Ä—ã —Å–µ—Ä–∏–∞–ª–æ–≤:', response.data.tvGenres?.length || 0);\r\n        setGenres(response.data);\r\n      } else {\r\n        console.warn('‚ö†Ô∏è –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API');\r\n      }\r\n    } catch (err) {\r\n      console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∂–∞–Ω—Ä–æ–≤:', err);\r\n      console.error('–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:', err.response?.data || err.message);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–ª–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)\r\n   */\r\n  const loadContent = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º discover, –∏–Ω–∞—á–µ popular\r\n      const hasFilters = selectedGenre || selectedYear || sortBy !== 'popularity.desc';\r\n      \r\n      if (hasFilters) {\r\n        // Discover —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏\r\n        const params = {\r\n          type: activeTab === 'movies' ? 'movie' : 'tv',\r\n          page: currentPage,\r\n          sortBy\r\n        };\r\n\r\n        if (selectedGenre) {\r\n          params.genres = selectedGenre;\r\n        }\r\n\r\n        if (selectedYear) {\r\n          params.year = selectedYear;\r\n        }\r\n\r\n        const response = await api.get('/media/discover', { params });\r\n        \r\n        if (activeTab === 'movies') {\r\n          setMovies(response.data.results || []);\r\n        } else {\r\n          setTVShows(response.data.results || []);\r\n        }\r\n        \r\n        setTotalPages(response.data.total_pages || 1);\r\n      } else {\r\n        // –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ\r\n        const response = await api.get('/media/popular', {\r\n          params: {\r\n            type: activeTab === 'movies' ? 'movie' : 'tv',\r\n            page: currentPage\r\n          }\r\n        });\r\n\r\n        if (activeTab === 'movies') {\r\n          setMovies(response.data.movies || []);\r\n          setTotalPages(response.data.totalMoviePages || 1);\r\n        } else {\r\n          setTVShows(response.data.tv || []);\r\n          setTotalPages(response.data.totalTVPages || 1);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:', err);\r\n      setError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ (—Ñ–∏–ª—å–º—ã/—Å–µ—Ä–∏–∞–ª—ã)\r\n   */\r\n  const handleTabChange = (tab) => {\r\n    setSearchParams({ tab, page: 1 });\r\n  };\r\n\r\n  /**\r\n   * –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã\r\n   */\r\n  const handlePageChange = (page) => {\r\n    const params = { tab: activeTab, page };\r\n    if (selectedGenre) params.genre = selectedGenre;\r\n    if (selectedYear) params.year = selectedYear;\r\n    if (sortBy !== 'popularity.desc') params.sort = sortBy;\r\n    setSearchParams(params);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  /**\r\n   * –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤\r\n   */\r\n  const handleFilterChange = (filterType, value) => {\r\n    const params = { tab: activeTab, page: 1 };\r\n    \r\n    if (filterType === 'genre') {\r\n      if (value) params.genre = value;\r\n      if (selectedYear) params.year = selectedYear;\r\n      if (sortBy !== 'popularity.desc') params.sort = sortBy;\r\n    } else if (filterType === 'year') {\r\n      if (selectedGenre) params.genre = selectedGenre;\r\n      if (value) params.year = value;\r\n      if (sortBy !== 'popularity.desc') params.sort = sortBy;\r\n    } else if (filterType === 'sort') {\r\n      if (selectedGenre) params.genre = selectedGenre;\r\n      if (selectedYear) params.year = selectedYear;\r\n      if (value !== 'popularity.desc') params.sort = value;\r\n    }\r\n    \r\n    setSearchParams(params);\r\n  };\r\n\r\n  /**\r\n   * –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤\r\n   */\r\n  const handleResetFilters = () => {\r\n    setSearchParams({ tab: activeTab, page: 1 });\r\n  };\r\n\r\n  /**\r\n   * –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫\r\n   */\r\n  const handleAddToList = (item) => {\r\n    setSelectedItem(item);\r\n    setShowListSelector(true);\r\n  };\r\n\r\n  /**\r\n   * –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫\r\n   */\r\n  const handleConfirmAddToList = async () => {\r\n    if (!selectedListId || !selectedItem) return;\r\n\r\n    try {\r\n      const mediaType = activeTab === 'movies' ? 'movie' : 'tv';\r\n      const payload = {\r\n        listId: selectedListId,\r\n        media: {\r\n          tmdbId: selectedItem.id,\r\n          mediaType\r\n        }\r\n      };\r\n      \r\n      console.log('üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö:', payload);\r\n      console.log('üìù –¢–∏–ø tmdbId:', typeof selectedItem.id);\r\n      \r\n      await dispatch(addToList(payload)).unwrap();\r\n      \r\n      // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è\r\n      await dispatch(fetchLists());\r\n      \r\n      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –∏ –æ—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ü–ï–†–ï–î –ø–æ–∫–∞–∑–æ–º –∞–ª–µ—Ä—Ç–∞\r\n      setShowListSelector(false);\r\n      setSelectedListId('');\r\n      const itemTitle = selectedItem.title || selectedItem.name;\r\n      setSelectedItem(null);\r\n      \r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ!',\r\n        message: `\"${itemTitle}\" –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫`,\r\n        type: 'success'\r\n      });\r\n    } catch (error) {\r\n      console.error('‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫:', error);\r\n      console.error('üìã –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:', error.response?.data || error);\r\n      \r\n      // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –æ—à–∏–±–∫–∏ \"—É–∂–µ –≤ —Å–ø–∏—Å–∫–µ\"\r\n      if (error.code === 'ALREADY_IN_LIST' || error.response?.data?.code === 'ALREADY_IN_LIST') {\r\n        const errorData = error.response?.data || error;\r\n        await showAlert({\r\n          title: '–£–∂–µ –≤ —Å–ø–∏—Å–∫–µ',\r\n          message: `–≠—Ç–æ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ \"${errorData.existingListName}\". –ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º —Å–ø–∏—Å–∫–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.`,\r\n          type: 'warning'\r\n        });\r\n      } else {\r\n        await showAlert({\r\n          title: '–û—à–∏–±–∫–∞',\r\n          message: error.response?.data?.error || error.error || '–ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',\r\n          type: 'error'\r\n        });\r\n      }\r\n      // –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–µ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –û—Ç–º–µ–Ω–∞ –≤—ã–±–æ—Ä–∞ —Å–ø–∏—Å–∫–∞\r\n   */\r\n  const handleCancelListSelector = () => {\r\n    setShowListSelector(false);\r\n    setSelectedListId('');\r\n    setSelectedItem(null);\r\n  };\r\n\r\n  /**\r\n   * –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ watchlist\r\n   */\r\n  const handleAddToWatchlist = async (item) => {\r\n    try {\r\n      const mediaType = activeTab === 'movies' ? 'movie' : 'tv';\r\n      await dispatch(addToWatchlist({\r\n        tmdbId: item.id,\r\n        mediaType\r\n      })).unwrap();\r\n      \r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ!',\r\n        message: `\"${item.title || item.name}\" –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ \"–•–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å\"`,\r\n        type: 'success'\r\n      });\r\n    } catch (error) {\r\n      console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ watchlist:', error);\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',\r\n        type: 'error'\r\n      });\r\n    }\r\n  };\r\n\r\n  // –¢–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞\r\n  const currentContent = activeTab === 'movies' ? movies : tvShows;\r\n  const currentGenres = activeTab === 'movies' ? genres.movieGenres : genres.tvGenres;\r\n  \r\n  // –û—Ç–ª–∞–¥–∫–∞ –∂–∞–Ω—Ä–æ–≤\r\n  console.log('üéØ –¢–µ–∫—É—â–∞—è –≤–∫–ª–∞–¥–∫–∞:', activeTab);\r\n  console.log('üìö –í—Å–µ –∂–∞–Ω—Ä—ã:', genres);\r\n  console.log('üé≠ –¢–µ–∫—É—â–∏–µ –∂–∞–Ω—Ä—ã:', currentGenres);\r\n  \r\n  // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ø–∏—Å–∫–∏ –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞\r\n  const relevantLists = customLists.filter(list => \r\n    list.mediaType === (activeTab === 'movies' ? 'movie' : 'tv')\r\n  );\r\n\r\n  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –≥–æ–¥–æ–≤ (—Ç–µ–∫—É—â–∏–π –≥–æ–¥ - 50 –ª–µ—Ç –Ω–∞–∑–∞–¥)\r\n  const currentYear = new Date().getFullYear();\r\n  const years = Array.from({ length: 51 }, (_, i) => currentYear - i);\r\n\r\n  return (\r\n    <UserPageLayout user={user}>\r\n      <div className={styles.catalogPage}>\r\n        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}\r\n        <div className={styles.header}>\r\n          <h1 className={styles.title}>üìö –ö–∞—Ç–∞–ª–æ–≥</h1>\r\n          <p className={styles.subtitle}>\r\n            –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã\r\n          </p>\r\n        </div>\r\n\r\n        {/* –í–∫–ª–∞–¥–∫–∏ */}\r\n        <div className={styles.tabs}>\r\n          <button\r\n            className={`${styles.tab} ${activeTab === 'movies' ? styles.active : ''}`}\r\n            onClick={() => handleTabChange('movies')}\r\n          >\r\n            üé¨ –§–∏–ª—å–º—ã\r\n          </button>\r\n          <button\r\n            className={`${styles.tab} ${activeTab === 'tv' ? styles.active : ''}`}\r\n            onClick={() => handleTabChange('tv')}\r\n          >\r\n            üì∫ –°–µ—Ä–∏–∞–ª—ã\r\n          </button>\r\n        </div>\r\n\r\n        {/* –§–∏–ª—å—Ç—Ä—ã */}\r\n        <div className={styles.filters}>\r\n          <div className={styles.filterGroup}>\r\n            <label className={styles.filterLabel}>–ñ–∞–Ω—Ä:</label>\r\n            <select\r\n              className={styles.filterSelect}\r\n              value={selectedGenre}\r\n              onChange={(e) => handleFilterChange('genre', e.target.value)}\r\n            >\r\n              <option value=\"\">–í—Å–µ –∂–∞–Ω—Ä—ã</option>\r\n              {currentGenres && currentGenres.length > 0 ? (\r\n                currentGenres.map((genre) => (\r\n                  <option key={genre.id} value={genre.id}>\r\n                    {genre.name}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option disabled>–ó–∞–≥—Ä—É–∑–∫–∞ –∂–∞–Ω—Ä–æ–≤...</option>\r\n              )}\r\n            </select>\r\n            {/* –û—Ç–ª–∞–¥–∫–∞ */}\r\n            {currentGenres && currentGenres.length === 0 && (\r\n              <small style={{ color: 'red', fontSize: '0.75rem' }}>\r\n                –ñ–∞–Ω—Ä—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å.\r\n              </small>\r\n            )}\r\n          </div>\r\n\r\n          <div className={styles.filterGroup}>\r\n            <label className={styles.filterLabel}>–ì–æ–¥:</label>\r\n            <select\r\n              className={styles.filterSelect}\r\n              value={selectedYear}\r\n              onChange={(e) => handleFilterChange('year', e.target.value)}\r\n            >\r\n              <option value=\"\">–í—Å–µ –≥–æ–¥—ã</option>\r\n              {years.map((year) => (\r\n                <option key={year} value={year}>\r\n                  {year}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className={styles.filterGroup}>\r\n            <label className={styles.filterLabel}>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>\r\n            <select\r\n              className={styles.filterSelect}\r\n              value={sortBy}\r\n              onChange={(e) => handleFilterChange('sort', e.target.value)}\r\n            >\r\n              <option value=\"popularity.desc\">–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å ‚Üì</option>\r\n              <option value=\"popularity.asc\">–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å ‚Üë</option>\r\n              <option value=\"vote_average.desc\">–†–µ–π—Ç–∏–Ω–≥ ‚Üì</option>\r\n              <option value=\"vote_average.asc\">–†–µ–π—Ç–∏–Ω–≥ ‚Üë</option>\r\n              <option value=\"release_date.desc\">–î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ ‚Üì</option>\r\n              <option value=\"release_date.asc\">–î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ ‚Üë</option>\r\n            </select>\r\n          </div>\r\n\r\n          {(selectedGenre || selectedYear || sortBy !== 'popularity.desc') && (\r\n            <button\r\n              className={styles.resetButton}\r\n              onClick={handleResetFilters}\r\n            >\r\n              –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* –ö–æ–Ω—Ç–µ–Ω—Ç */}\r\n        <div className={styles.content}>\r\n          {loading ? (\r\n            <div className={styles.loading}>\r\n              <div className={styles.spinner}></div>\r\n              <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>\r\n            </div>\r\n          ) : error ? (\r\n            <div className={styles.error}>\r\n              <p>{error}</p>\r\n              <button onClick={loadContent} className={styles.retryButton}>\r\n                –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞\r\n              </button>\r\n            </div>\r\n          ) : currentContent.length > 0 ? (\r\n            <>\r\n              {/* –°–µ—Ç–∫–∞ –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ */}\r\n              <MediaGrid\r\n                items={currentContent}\r\n                mediaType={activeTab === 'movies' ? 'movie' : 'tv'}\r\n                onAddToList={handleAddToList}\r\n                onAddToWatchlist={handleAddToWatchlist}\r\n              />\r\n\r\n              {/* –ü–∞–≥–∏–Ω–∞—Ü–∏—è */}\r\n              {totalPages > 1 && (\r\n                <div className={styles.pagination}>\r\n                  <button\r\n                    className={styles.pageButton}\r\n                    onClick={() => handlePageChange(currentPage - 1)}\r\n                    disabled={currentPage === 1}\r\n                  >\r\n                    ‚Üê –ù–∞–∑–∞–¥\r\n                  </button>\r\n                  \r\n                  <span className={styles.pageInfo}>\r\n                    –°—Ç—Ä–∞–Ω–∏—Ü–∞ {currentPage} –∏–∑ {totalPages}\r\n                  </span>\r\n                  \r\n                  <button\r\n                    className={styles.pageButton}\r\n                    onClick={() => handlePageChange(currentPage + 1)}\r\n                    disabled={currentPage >= totalPages}\r\n                  >\r\n                    –í–ø–µ—Ä–µ–¥ ‚Üí\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div className={styles.empty}>\r\n              <p>–ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</p>\r\n              <p className={styles.emptyHint}>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Å–ø–∏—Å–∫–∞ */}\r\n      <ConfirmDialog\r\n        isOpen={showListSelector}\r\n        title=\"–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫\"\r\n        message={\r\n          <div className={styles.listSelectorContent}>\r\n            <p className={styles.listSelectorText}>\r\n              –î–æ–±–∞–≤–∏—Ç—å \"{selectedItem?.title || selectedItem?.name}\" –≤ —Å–ø–∏—Å–æ–∫:\r\n            </p>\r\n            <select \r\n              value={selectedListId}\r\n              onChange={(e) => setSelectedListId(e.target.value)}\r\n              className={styles.listSelect}\r\n            >\r\n              <option value=\"\">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫</option>\r\n              {relevantLists.map(list => (\r\n                <option key={list.id} value={list.id}>\r\n                  {list.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            {relevantLists.length === 0 && (\r\n              <p className={styles.noListsMessage}>\r\n                –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–ø–∏—Å–∫–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ \"–ú–æ–∏ {activeTab === 'movies' ? '—Ñ–∏–ª—å–º—ã' : '—Å–µ—Ä–∏–∞–ª—ã'}\".\r\n              </p>\r\n            )}\r\n          </div>\r\n        }\r\n        onConfirm={handleConfirmAddToList}\r\n        onCancel={handleCancelListSelector}\r\n        confirmText=\"–î–æ–±–∞–≤–∏—Ç—å\"\r\n        cancelText=\"–û—Ç–º–µ–Ω–∞\"\r\n        confirmButtonStyle=\"primary\"\r\n        confirmDisabled={!selectedListId}\r\n      />\r\n    </UserPageLayout>\r\n  );\r\n};\r\n\r\nexport default CatalogPage;\r\n"],"names":["MediaGrid","items","mediaType","onAddToList","onAddToWatchlist","navigate","useNavigate","activeMenu","setActiveMenu","useState","handleCardClick","item","type","toggleMenu","e","itemId","React","handleClickOutside","handleAddToList","handleAddToWatchlist","jsx","styles","title","releaseDate","year","posterUrl","jsxs","CatalogPage","dispatch","useAppDispatch","showAlert","useAlert","user","useAppSelector","state","customLists","searchParams","setSearchParams","useSearchParams","movies","setMovies","tvShows","setTVShows","loading","setLoading","error","setError","genres","setGenres","showListSelector","setShowListSelector","selectedItem","setSelectedItem","selectedListId","setSelectedListId","activeTab","currentPage","selectedGenre","selectedYear","sortBy","totalPages","setTotalPages","useEffect","fetchLists","loadGenres","loadContent","response","api","_a","_b","err","_c","params","handleTabChange","tab","handlePageChange","page","handleFilterChange","filterType","value","handleResetFilters","handleConfirmAddToList","payload","addToList","itemTitle","errorData","handleCancelListSelector","addToWatchlist","currentContent","currentGenres","relevantLists","list","currentYear","years","_","i","UserPageLayout","genre","Fragment","ConfirmDialog"],"mappings":"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"}