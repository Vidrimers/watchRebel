import{b as x,a as N,u as f,c as u,r as _,j as a}from"./index-Djl9NHxl.js";import{s as j}from"./mediaSlice-Cc1A5Hw2.js";import{U as y}from"./UserPageLayout-C8vKA2h1.js";import"./notificationsSlice-B12J8AxD.js";const $="_searchPage_1u8l0_3",P="_header_1u8l0_19",T="_title_1u8l0_27",b="_query_1u8l0_41",w="_subtitle_1u8l0_49",I="_filters_1u8l0_61",A="_filterButton_1u8l0_75",U="_active_1u8l0_109",R="_results_1u8l0_123",B="_loading_1u8l0_133",k="_spinner_1u8l0_151",q="_error_1u8l0_185",L="_errorMessage_1u8l0_197",M="_empty_1u8l0_211",Y="_emptyHint_1u8l0_223",D="_resultsList_1u8l0_235",F="_resultCard_1u8l0_249",H="_userCard_1u8l0_281",O="_userAvatar_1u8l0_293",S="_userCardInfo_1u8l0_309",E="_userCardName_1u8l0_317",z="_userCardType_1u8l0_331",G="_userCardUsername_1u8l0_343",J="_mediaCard_1u8l0_355",K="_mediaPoster_1u8l0_365",Q="_mediaCardInfo_1u8l0_381",V="_mediaCardTitle_1u8l0_393",W="_mediaCardType_1u8l0_409",X="_mediaCardYear_1u8l0_421",Z="_mediaCardOverview_1u8l0_433",ee="_mediaCardRating_1u8l0_449",s={searchPage:$,header:P,title:T,query:b,subtitle:w,filters:I,filterButton:A,active:U,results:R,loading:B,spinner:k,error:q,errorMessage:L,empty:M,emptyHint:Y,resultsList:D,resultCard:F,userCard:H,userAvatar:O,userCardInfo:S,userCardName:E,userCardType:z,userCardUsername:G,mediaCard:J,mediaPoster:K,mediaCardInfo:Q,mediaCardTitle:V,mediaCardType:W,mediaCardYear:X,mediaCardOverview:Z,mediaCardRating:ee},ie=()=>{const c=x(),m=N(),[v]=f(),{searchResults:t,loading:p,error:o}=u(e=>e.media),{user:h}=u(e=>e.auth),i=v.get("q")||"",[r,d]=_.useState("all");_.useEffect(()=>{i.trim()&&c(j({query:i,filters:{}}))},[i,c]);const n=t.filter(e=>r==="all"?!0:r==="users"?e.type==="user":r==="movies"?e.type==="movie":r==="tv"?e.type==="tv":!0),C=e=>{e.type==="user"?m(`/user/${e.data.id}`):m(`/media/${e.data.mediaType}/${e.data.tmdbId}`)},l={all:t.length,users:t.filter(e=>e.type==="user").length,movies:t.filter(e=>e.type==="movie").length,tv:t.filter(e=>e.type==="tv").length};return a.jsx(y,{user:h,children:a.jsxs("div",{className:s.searchPage,children:[a.jsxs("div",{className:s.header,children:[a.jsxs("h1",{className:s.title,children:["–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: ",a.jsxs("span",{className:s.query,children:['"',i,'"']})]}),a.jsxs("p",{className:s.subtitle,children:["–ù–∞–π–¥–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: ",n.length]})]}),a.jsxs("div",{className:s.filters,children:[a.jsxs("button",{className:`${s.filterButton} ${r==="all"?s.active:""}`,onClick:()=>d("all"),children:["–í—Å–µ (",l.all,")"]}),a.jsxs("button",{className:`${s.filterButton} ${r==="users"?s.active:""}`,onClick:()=>d("users"),children:["–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (",l.users,")"]}),a.jsxs("button",{className:`${s.filterButton} ${r==="movies"?s.active:""}`,onClick:()=>d("movies"),children:["–§–∏–ª—å–º—ã (",l.movies,")"]}),a.jsxs("button",{className:`${s.filterButton} ${r==="tv"?s.active:""}`,onClick:()=>d("tv"),children:["–°–µ—Ä–∏–∞–ª—ã (",l.tv,")"]})]}),a.jsx("div",{className:s.results,children:p?a.jsxs("div",{className:s.loading,children:[a.jsx("div",{className:s.spinner}),a.jsx("p",{children:"–ü–æ–∏—Å–∫..."})]}):o?a.jsxs("div",{className:s.error,children:[a.jsx("p",{children:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ"}),a.jsx("p",{className:s.errorMessage,children:o.message||"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑"})]}):n.length>0?a.jsx("div",{className:s.resultsList,children:n.map((e,g)=>a.jsx("div",{className:s.resultCard,onClick:()=>C(e),children:e.type==="user"?a.jsxs("div",{className:s.userCard,children:[a.jsx("img",{src:e.data.avatarUrl||"/default-avatar.png",alt:e.data.displayName,className:s.userAvatar}),a.jsxs("div",{className:s.userCardInfo,children:[a.jsx("h3",{className:s.userCardName,children:e.data.displayName}),a.jsx("p",{className:s.userCardType,children:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"}),e.data.telegramUsername&&a.jsxs("p",{className:s.userCardUsername,children:["@",e.data.telegramUsername]})]})]}):a.jsxs("div",{className:s.mediaCard,children:[a.jsx("img",{src:e.data.posterPath?`https://image.tmdb.org/t/p/w185${e.data.posterPath}`:"/default-poster.png",alt:e.data.title,className:s.mediaPoster}),a.jsxs("div",{className:s.mediaCardInfo,children:[a.jsx("h3",{className:s.mediaCardTitle,children:e.data.title}),a.jsx("p",{className:s.mediaCardType,children:e.data.mediaType==="movie"?"üé¨ –§–∏–ª—å–º":"üì∫ –°–µ—Ä–∏–∞–ª"}),e.data.releaseDate&&a.jsx("p",{className:s.mediaCardYear,children:new Date(e.data.releaseDate).getFullYear()}),e.data.overview&&a.jsx("p",{className:s.mediaCardOverview,children:e.data.overview.length>150?`${e.data.overview.substring(0,150)}...`:e.data.overview}),e.data.voteAverage>0&&a.jsxs("div",{className:s.mediaCardRating,children:["‚≠ê ",e.data.voteAverage.toFixed(1)]})]})]})},`${e.type}-${e.data.id||e.data.tmdbId}-${g}`))}):a.jsxs("div",{className:s.empty,children:[a.jsx("p",{children:"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"}),a.jsx("p",{className:s.emptyHint,children:"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã"})]})})]})})};export{ie as default};
//# sourceMappingURL=SearchPage-CceNlIov.js.map
