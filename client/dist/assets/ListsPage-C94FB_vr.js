import{b as k,r as _,j as e,w as $,x as F,y as G,a as R,u as D,c as T,o as E}from"./index-C3TbUOD_.js";import{U}from"./UserPageLayout-D6-bMz6K.js";import{u as V}from"./useConfirm-C-3tHhk9.js";import{M as z}from"./MediaCard-PsHUCs02.js";const q="_listManager_oja9_1",J="_header_oja9_9",K="_title_oja9_27",O="_createButton_oja9_41",Q="_createForm_oja9_87",W="_input_oja9_103",X="_formActions_oja9_147",Y="_submitButton_oja9_157",Z="_cancelButton_oja9_159",ee="_errorMessage_oja9_219",te="_listsContainer_oja9_241",se="_emptyState_oja9_249",ae="_emptyHint_oja9_271",ne="_listGrid_oja9_283",oe="_listCard_oja9_295",ie="_listHeader_oja9_327",le="_listName_oja9_341",re="_listActions_oja9_359",ce="_editButton_oja9_371",de="_deleteButton_oja9_373",me="_listInfo_oja9_437",_e="_itemCount_oja9_445",he="_previewPosters_oja9_459",ue="_previewPoster_oja9_459",pe="_modal_oja9_571",ge="_modalContent_oja9_601",je="_modalHeader_oja9_643",xe="_modalClose_oja9_671",Ce="_modalActions_oja9_715",t={listManager:q,header:J,title:K,createButton:O,createForm:Q,input:W,formActions:X,submitButton:Y,cancelButton:Z,errorMessage:ee,listsContainer:te,emptyState:se,emptyHint:ae,listGrid:ne,listCard:oe,listHeader:ie,listName:le,listActions:re,editButton:ce,deleteButton:de,listInfo:me,itemCount:_e,previewPosters:he,previewPoster:ue,modal:pe,modalContent:ge,modalHeader:je,modalClose:xe,modalActions:Ce},Ne=({lists:y,mediaType:p,onListSelect:f})=>{const g=k(),{confirmDialog:j,showConfirm:P}=V(),[x,c]=_.useState(!1),[h,r]=_.useState(""),[i,o]=_.useState(null),[C,N]=_.useState(null),[v,d]=_.useState(""),b=y.filter(s=>s.mediaType===p),B=async s=>{if(s.preventDefault(),!h.trim()){o("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞");return}try{await g($({name:h.trim(),mediaType:p})).unwrap(),r(""),c(!1),o(null)}catch(l){o(l.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ø–∏—Å–∫–∞")}},L=async(s,l)=>{if(await P({title:"–£–¥–∞–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫?",message:`–°–ø–∏—Å–æ–∫ "${l}" –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.`,confirmText:"–£–¥–∞–ª–∏—Ç—å",cancelText:"–û—Ç–º–µ–Ω–∞",confirmButtonStyle:"danger"}))try{await g(F(s)).unwrap()}catch(H){o(H.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞")}},n=(s,l)=>{N(s),d(l),o(null)},u=()=>{N(null),d(""),o(null)},M=async s=>{if(s.preventDefault(),!v.trim()){o("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞");return}try{await g(G({listId:C,name:v.trim()})).unwrap(),N(null),d(""),o(null)}catch(l){o(l.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ —Å–ø–∏—Å–∫–∞")}},A=()=>{c(!1),r(""),o(null)};return e.jsxs(e.Fragment,{children:[j,e.jsxs("div",{className:t.listManager,children:[e.jsxs("div",{className:t.header,children:[e.jsx("h2",{className:t.title,children:p==="movie"?"–°–ø–∏—Å–∫–∏ —Ñ–∏–ª—å–º–æ–≤":"–°–ø–∏—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–æ–≤"}),!x&&e.jsx("button",{className:t.createButton,onClick:()=>c(!0),title:"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫",children:"+ –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫"})]}),x&&e.jsxs("form",{className:t.createForm,onSubmit:B,children:[e.jsx("input",{type:"text",className:t.input,placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –û—Ç–ª–∏—á–Ω—ã–µ, –°—Ä–µ–¥–Ω–∏–µ, –û—Ç—Å—Ç–æ–π)",value:h,onChange:s=>r(s.target.value),autoFocus:!0,maxLength:50}),e.jsxs("div",{className:t.formActions,children:[e.jsx("button",{type:"submit",className:t.submitButton,children:"–°–æ–∑–¥–∞—Ç—å"}),e.jsx("button",{type:"button",className:t.cancelButton,onClick:A,children:"–û—Ç–º–µ–Ω–∞"})]})]}),i&&e.jsx("div",{className:t.errorMessage,children:i}),e.jsx("div",{className:t.listsContainer,children:b.length===0?e.jsxs("div",{className:t.emptyState,children:[e.jsx("p",{children:"–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–ø–∏—Å–∫–æ–≤"}),e.jsx("p",{className:t.emptyHint,children:"–°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –∫–æ–ª–ª–µ–∫—Ü–∏—é"})]}):e.jsx("div",{className:t.listGrid,children:b.map(s=>{var l,w,H,S;return e.jsxs("div",{className:t.listCard,onClick:()=>f&&f(s),children:[e.jsxs("div",{className:t.listHeader,children:[e.jsx("h3",{className:t.listName,children:s.name}),e.jsxs("div",{className:t.listActions,children:[e.jsx("button",{className:t.editButton,onClick:m=>{m.stopPropagation(),n(s.id,s.name)},title:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫",children:"‚úèÔ∏è"}),e.jsx("button",{className:t.deleteButton,onClick:m=>{m.stopPropagation(),L(s.id,s.name)},title:"–£–¥–∞–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫",children:"√ó"})]})]}),e.jsx("div",{className:t.listInfo,children:e.jsxs("span",{className:t.itemCount,children:[((l=s.items)==null?void 0:l.length)||0," "," ",((w=s.items)==null?void 0:w.length)===1?"—ç–ª–µ–º–µ–Ω—Ç":((H=s.items)==null?void 0:H.length)>1&&((S=s.items)==null?void 0:S.length)<5?"—ç–ª–µ–º–µ–Ω—Ç–∞":"—ç–ª–µ–º–µ–Ω—Ç–æ–≤"]})}),s.items&&s.items.length>0&&e.jsx("div",{className:t.previewPosters,children:s.items.slice(0,3).map((m,I)=>e.jsx("div",{className:t.previewPoster,children:m.posterPath&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${m.posterPath}`,alt:m.title,loading:"lazy"})},I))})]},s.id)})})}),C&&e.jsx("div",{className:t.modal,onClick:u,children:e.jsxs("div",{className:t.modalContent,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:t.modalHeader,children:[e.jsx("h3",{children:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫"}),e.jsx("button",{className:t.modalClose,onClick:u,title:"–ó–∞–∫—Ä—ã—Ç—å",children:"√ó"})]}),e.jsxs("form",{onSubmit:M,children:[e.jsx("input",{type:"text",className:t.input,placeholder:"–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞",value:v,onChange:s=>d(s.target.value),autoFocus:!0,maxLength:50}),e.jsxs("div",{className:t.modalActions,children:[e.jsx("button",{type:"submit",className:t.submitButton,children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),e.jsx("button",{type:"button",className:t.cancelButton,onClick:u,children:"–û—Ç–º–µ–Ω–∞"})]})]})]})})]})]})},ve="_listsPage_16hb4_1",be="_pageHeader_16hb4_9",ye="_pageTitle_16hb4_27",fe="_mediaTypeToggle_16hb4_43",Be="_toggleButton_16hb4_61",Le="_active_16hb4_97",He="_loadingContainer_16hb4_111",Pe="_errorMessage_16hb4_113",we="_errorContainer_16hb4_149",Te="_listContent_16hb4_169",Se="_listContentHeader_16hb4_183",ke="_backButton_16hb4_191",Me="_listContentTitle_16hb4_235",Ae="_listContentCount_16hb4_249",Ie="_mediaGrid_16hb4_263",$e="_emptyList_16hb4_279",Fe="_emptyHint_16hb4_301",a={listsPage:ve,pageHeader:be,pageTitle:ye,mediaTypeToggle:fe,toggleButton:Be,active:Le,loadingContainer:He,errorMessage:Pe,errorContainer:we,listContent:Te,listContentHeader:Se,backButton:ke,listContentTitle:Me,listContentCount:Ae,mediaGrid:Ie,emptyList:$e,emptyHint:Fe},Ue=()=>{var d,b,B,L;const y=k();R();const[p,f]=D(),{user:g,isAuthenticated:j}=T(n=>n.auth),{customLists:P,loading:x,error:c}=T(n=>n.lists),{episodeProgress:h}=T(n=>n.lists),r=p.get("type")||"movie",[i,o]=_.useState(null);_.useEffect(()=>{j&&y(E())},[j,y]);const C=n=>{f({type:n}),o(null)},N=n=>{o(n)},v=()=>{o(null)};return j?e.jsx(U,{user:g,children:e.jsxs("div",{className:a.listsPage,children:[e.jsxs("div",{className:a.pageHeader,children:[e.jsx("h1",{className:a.pageTitle,children:"–ú–æ–∏ —Å–ø–∏—Å–∫–∏"}),e.jsxs("div",{className:a.mediaTypeToggle,children:[e.jsx("button",{className:`${a.toggleButton} ${r==="movie"?a.active:""}`,onClick:()=>C("movie"),children:"üé¨ –§–∏–ª—å–º—ã"}),e.jsx("button",{className:`${a.toggleButton} ${r==="tv"?a.active:""}`,onClick:()=>C("tv"),children:"üì∫ –°–µ—Ä–∏–∞–ª—ã"})]})]}),x&&e.jsx("div",{className:a.loadingContainer,children:e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–æ–≤..."})}),c&&e.jsx("div",{className:a.errorMessage,children:e.jsxs("p",{children:["–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ",c.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"]})}),!x&&!c&&e.jsx(e.Fragment,{children:i?e.jsxs("div",{className:a.listContent,children:[e.jsxs("div",{className:a.listContentHeader,children:[e.jsx("button",{className:a.backButton,onClick:v,children:"‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫–∞–º"}),e.jsx("h2",{className:a.listContentTitle,children:i.name}),e.jsxs("p",{className:a.listContentCount,children:[((d=i.items)==null?void 0:d.length)||0," "," ",((b=i.items)==null?void 0:b.length)===1?"—ç–ª–µ–º–µ–Ω—Ç":((B=i.items)==null?void 0:B.length)>1&&((L=i.items)==null?void 0:L.length)<5?"—ç–ª–µ–º–µ–Ω—Ç–∞":"—ç–ª–µ–º–µ–Ω—Ç–æ–≤"]})]}),i.items&&i.items.length>0?e.jsx("div",{className:a.mediaGrid,children:i.items.map(n=>{var u;return e.jsx(z,{media:n,showProgress:n.mediaType==="tv",progress:(u=h[n.tmdbId])==null?void 0:u[h[n.tmdbId].length-1]},n.tmdbId)})}):e.jsxs("div",{className:a.emptyList,children:[e.jsx("p",{children:"–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç"}),e.jsxs("p",{className:a.emptyHint,children:["–î–æ–±–∞–≤—å—Ç–µ ",r==="movie"?"—Ñ–∏–ª—å–º—ã":"—Å–µ—Ä–∏–∞–ª—ã"," —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫"]})]})]}):e.jsx(Ne,{lists:P,mediaType:r,onListSelect:N})})]})}):e.jsx("div",{className:a.errorContainer,children:e.jsx("p",{children:"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"})})};export{Ue as default};
//# sourceMappingURL=ListsPage-C94FB_vr.js.map
