{"version":3,"file":"UserProfilePage-D41g1KAs.js","sources":["../../src/components/User/ReferralStats.jsx","../../src/components/Settings/AdminModerationPanel.jsx","../../src/components/Wall/ReactionPicker.jsx","../../src/components/Wall/ReactionTooltip.jsx","../../src/components/Wall/WallPost.jsx","../../src/components/Wall/Wall.jsx","../../src/pages/UserProfilePage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAppSelector } from '../../hooks/useAppSelector';\r\nimport api from '../../services/api';\r\nimport styles from './ReferralStats.module.css';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤\r\n * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π –∏ —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤\r\n */\r\nconst ReferralStats = ({ userId }) => {\r\n  const { user: currentUser } = useAppSelector((state) => state.auth);\r\n  const [referralCode, setReferralCode] = useState(null);\r\n  const [referralsCount, setReferralsCount] = useState(0);\r\n  const [referrals, setReferrals] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showReferrals, setShowReferrals] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —ç—Ç–æ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏–ª–∏ —á—É–∂–æ–π\r\n  const isOwnProfile = currentUser?.id === userId;\r\n\r\n  useEffect(() => {\r\n    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è\r\n    if (isOwnProfile) {\r\n      loadReferralStats();\r\n    }\r\n  }, [userId, isOwnProfile]);\r\n\r\n  /**\r\n   * –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤\r\n   */\r\n  const loadReferralStats = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // –ü–æ–ª—É—á–∞–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤\r\n      const response = await api.get(`/users/${userId}/referral-code`);\r\n      setReferralCode(response.data.referralCode);\r\n      setReferralsCount(response.data.referralsCount || 0);\r\n\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤:', err);\r\n      \r\n      // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ 404 –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º fallback\r\n      if (err.response?.status === 404 || err.response?.data?.code === 'USER_NOT_FOUND') {\r\n        setReferralCode(null);\r\n        setReferralsCount(0);\r\n        setLoading(false);\r\n      } else {\r\n        // –î–ª—è –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ\r\n        setError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É');\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤\r\n   */\r\n  const loadReferrals = async () => {\r\n    try {\r\n      const response = await api.get(`/users/${userId}/referrals`);\r\n      setReferrals(response.data);\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤:', err);\r\n      \r\n      // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ 404, –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫\r\n      if (err.response?.status === 404) {\r\n        setReferrals([]);\r\n      } else {\r\n        setError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤');\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤\r\n   */\r\n  const toggleReferrals = async () => {\r\n    if (!showReferrals && referrals.length === 0) {\r\n      await loadReferrals();\r\n    }\r\n    setShowReferrals(!showReferrals);\r\n  };\r\n\r\n  // –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —á—É–∂–∏—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π\r\n  if (!isOwnProfile) {\r\n    return null;\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className={styles.referralStats}>\r\n        <p className={styles.loading}>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className={styles.referralStats}>\r\n        <p className={styles.error}>{error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.referralStats}>\r\n      <div className={styles.statsHeader}>\r\n        <h3 className={styles.statsTitle}>üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–µ –¥—Ä—É–∑—å—è</h3>\r\n        <div className={styles.statsCount}>\r\n          <span className={styles.countNumber}>{referralsCount}</span>\r\n          <span className={styles.countLabel}>–¥—Ä—É–∑–µ–π</span>\r\n        </div>\r\n      </div>\r\n\r\n      {referralsCount > 0 && (\r\n        <button \r\n          className={styles.toggleButton}\r\n          onClick={toggleReferrals}\r\n        >\r\n          {showReferrals ? '‚ñº –°–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫' : '‚ñ∂ –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫'}\r\n        </button>\r\n      )}\r\n\r\n      {showReferrals && (\r\n        <div className={styles.referralsList}>\r\n          {referrals.length === 0 ? (\r\n            <p className={styles.emptyMessage}>–ó–∞–≥—Ä—É–∑–∫–∞...</p>\r\n          ) : (\r\n            <ul className={styles.referralsItems}>\r\n              {referrals.map((referral) => (\r\n                <li key={referral.id} className={styles.referralItem}>\r\n                  <div className={styles.referralAvatar}>\r\n                    {referral.avatarUrl ? (\r\n                      <img \r\n                        src={\r\n                          referral.avatarUrl.startsWith('/uploads/')\r\n                            ? `${import.meta.env.VITE_API_URL || 'http://localhost:1313'}${referral.avatarUrl}`\r\n                            : referral.avatarUrl\r\n                        } \r\n                        alt={referral.displayName} \r\n                      />\r\n                    ) : (\r\n                      <div className={styles.avatarPlaceholder}>\r\n                        {referral.displayName.charAt(0).toUpperCase()}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className={styles.referralInfo}>\r\n                    <p className={styles.referralName}>{referral.displayName}</p>\r\n                    {referral.telegramUsername && (\r\n                      <p className={styles.referralUsername}>@{referral.telegramUsername}</p>\r\n                    )}\r\n                    <p className={styles.referralDate}>\r\n                      –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è: {new Date(referral.referralCreatedAt).toLocaleDateString('ru-RU')}\r\n                    </p>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {referralsCount === 0 && (\r\n        <p className={styles.emptyMessage}>\r\n          –í—ã –µ—â–µ –Ω–µ –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏ –¥—Ä—É–∑–µ–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Telegram –±–æ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏!\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReferralStats;\r\n","import React, { useState } from 'react';\r\nimport styles from './AdminModerationPanel.module.css';\r\nimport api from '../../services/api';\r\nimport useAlert from '../../hooks/useAlert.jsx';\r\nimport useConfirm from '../../hooks/useConfirm.jsx';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞–Ω–µ–ª–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞\r\n */\r\nfunction AdminModerationPanel({ userId, isAdmin, onModerationAction }) {\r\n  const { alertDialog, showAlert } = useAlert();\r\n  const { confirmDialog, showConfirm } = useConfirm();\r\n  \r\n  const [showBanModal, setShowBanModal] = useState(false);\r\n  const [banType, setBanType] = useState(null); // 'posts' –∏–ª–∏ 'permanent'\r\n  const [reason, setReason] = useState('');\r\n  const [duration, setDuration] = useState(1440); // 24 —á–∞—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // –ï—Å–ª–∏ –Ω–µ –∞–¥–º–∏–Ω, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å\r\n  if (!isAdmin) {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å—Ç–æ–≤\r\n   */\r\n  const handleBanPosts = async () => {\r\n    if (!reason.trim()) {\r\n      setError('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏');\r\n      return;\r\n    }\r\n\r\n    if (duration <= 0) {\r\n      setError('–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ 0');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await api.post(`/admin/users/${userId}/ban-posts`, {\r\n        reason: reason.trim(),\r\n        durationMinutes: duration\r\n      });\r\n\r\n      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ\r\n      setShowBanModal(false);\r\n      setReason('');\r\n      setDuration(1440);\r\n\r\n      // –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç\r\n      if (onModerationAction) {\r\n        onModerationAction('post_ban');\r\n      }\r\n\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ',\r\n        message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∑–∞–ø—Ä–µ—â–µ–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç—ã',\r\n        type: 'success'\r\n      });\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å—Ç–æ–≤:', err);\r\n      setError(err.response?.data?.error || '–û—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å—Ç–æ–≤');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏\r\n   */\r\n  const handlePermanentBan = async () => {\r\n    if (!reason.trim()) {\r\n      setError('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏');\r\n      return;\r\n    }\r\n\r\n    const confirmed = await showConfirm({\r\n      title: '–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞',\r\n      message: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞–≤—Å–µ–≥–¥–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?',\r\n      confirmText: '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å',\r\n      cancelText: '–û—Ç–º–µ–Ω–∞',\r\n      confirmButtonStyle: 'danger'\r\n    });\r\n\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await api.post(`/admin/users/${userId}/ban-permanent`, {\r\n        reason: reason.trim()\r\n      });\r\n\r\n      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ\r\n      setShowBanModal(false);\r\n      setReason('');\r\n\r\n      // –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç\r\n      if (onModerationAction) {\r\n        onModerationAction('permanent_ban');\r\n      }\r\n\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ',\r\n        message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞',\r\n        type: 'success'\r\n      });\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:', err);\r\n      setError(err.response?.data?.error || '–û—à–∏–±–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏\r\n   */\r\n  const handleUnban = async () => {\r\n    const confirmed = await showConfirm({\r\n      title: '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',\r\n      message: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?',\r\n      confirmText: '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å',\r\n      cancelText: '–û—Ç–º–µ–Ω–∞',\r\n      confirmButtonStyle: 'success'\r\n    });\r\n\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await api.post(`/admin/users/${userId}/unban`);\r\n\r\n      // –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç\r\n      if (onModerationAction) {\r\n        onModerationAction('unban');\r\n      }\r\n\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ',\r\n        message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω',\r\n        type: 'success'\r\n      });\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:', err);\r\n      setError(err.response?.data?.error || '–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å—Ç–æ–≤\r\n   */\r\n  const openPostBanModal = () => {\r\n    setBanType('posts');\r\n    setShowBanModal(true);\r\n    setError(null);\r\n  };\r\n\r\n  /**\r\n   * –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏\r\n   */\r\n  const openPermanentBanModal = () => {\r\n    setBanType('permanent');\r\n    setShowBanModal(true);\r\n    setError(null);\r\n  };\r\n\r\n  /**\r\n   * –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ\r\n   */\r\n  const closeModal = () => {\r\n    setShowBanModal(false);\r\n    setBanType(null);\r\n    setReason('');\r\n    setDuration(1440);\r\n    setError(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {alertDialog}\r\n      {confirmDialog}\r\n      <div className={styles.moderationPanel}>\r\n      <h3 className={styles.title}>‚ö†Ô∏è –ú–æ–¥–µ—Ä–∞—Ü–∏—è</h3>\r\n      \r\n      <div className={styles.actions}>\r\n        <button \r\n          className={`${styles.button} ${styles.banPostsButton}`}\r\n          onClick={openPostBanModal}\r\n          disabled={loading}\r\n        >\r\n          üö´ –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø–æ—Å—Ç—ã\r\n        </button>\r\n        \r\n        <button \r\n          className={`${styles.button} ${styles.permanentBanButton}`}\r\n          onClick={openPermanentBanModal}\r\n          disabled={loading}\r\n        >\r\n          ‚õî –ó–∞–±–∞–Ω–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞\r\n        </button>\r\n        \r\n        <button \r\n          className={`${styles.button} ${styles.unbanButton}`}\r\n          onClick={handleUnban}\r\n          disabled={loading}\r\n        >\r\n          ‚úÖ –†–∞–∑–±–∞–Ω–∏—Ç—å\r\n        </button>\r\n      </div>\r\n\r\n      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */}\r\n      {showBanModal && (\r\n        <div className={styles.modalOverlay} onClick={closeModal}>\r\n          <div className={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n            <h3 className={styles.modalTitle}>\r\n              {banType === 'posts' ? 'üö´ –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø–æ—Å—Ç—ã' : '‚õî –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞'}\r\n            </h3>\r\n\r\n            {error && (\r\n              <div className={styles.error}>{error}</div>\r\n            )}\r\n\r\n            <div className={styles.formGroup}>\r\n              <label htmlFor=\"reason\">–ü—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:</label>\r\n              <textarea\r\n                id=\"reason\"\r\n                className={styles.textarea}\r\n                value={reason}\r\n                onChange={(e) => setReason(e.target.value)}\r\n                placeholder=\"–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏...\"\r\n                rows={4}\r\n                disabled={loading}\r\n              />\r\n            </div>\r\n\r\n            {banType === 'posts' && (\r\n              <div className={styles.formGroup}>\r\n                <label htmlFor=\"duration\">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç—ã):</label>\r\n                <input\r\n                  id=\"duration\"\r\n                  type=\"number\"\r\n                  className={styles.input}\r\n                  value={duration}\r\n                  onChange={(e) => setDuration(parseInt(e.target.value) || 0)}\r\n                  min=\"1\"\r\n                  disabled={loading}\r\n                />\r\n                <div className={styles.durationPresets}>\r\n                  <button \r\n                    className={styles.presetButton}\r\n                    onClick={() => setDuration(60)}\r\n                    disabled={loading}\r\n                  >\r\n                    1 —á–∞—Å\r\n                  </button>\r\n                  <button \r\n                    className={styles.presetButton}\r\n                    onClick={() => setDuration(1440)}\r\n                    disabled={loading}\r\n                  >\r\n                    1 –¥–µ–Ω—å\r\n                  </button>\r\n                  <button \r\n                    className={styles.presetButton}\r\n                    onClick={() => setDuration(10080)}\r\n                    disabled={loading}\r\n                  >\r\n                    1 –Ω–µ–¥–µ–ª—è\r\n                  </button>\r\n                  <button \r\n                    className={styles.presetButton}\r\n                    onClick={() => setDuration(43200)}\r\n                    disabled={loading}\r\n                  >\r\n                    1 –º–µ—Å—è—Ü\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className={styles.modalActions}>\r\n              <button\r\n                className={`${styles.button} ${styles.cancelButton}`}\r\n                onClick={closeModal}\r\n                disabled={loading}\r\n              >\r\n                –û—Ç–º–µ–Ω–∞\r\n              </button>\r\n              <button\r\n                className={`${styles.button} ${banType === 'posts' ? styles.banPostsButton : styles.permanentBanButton}`}\r\n                onClick={banType === 'posts' ? handleBanPosts : handlePermanentBan}\r\n                disabled={loading}\r\n              >\r\n                {loading ? '–û–±—Ä–∞–±–æ—Ç–∫–∞...' : '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AdminModerationPanel;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport styles from './ReactionPicker.module.css';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ —ç–º–æ–¥–∂–∏-—Ä–µ–∞–∫—Ü–∏–∏\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —ç–º–æ–¥–∂–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞\r\n * –°–æ—Ä—Ç–∏—Ä—É–µ—Ç —ç–º–æ–¥–∂–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\r\n */\r\nconst ReactionPicker = ({ onSelect, onClose }) => {\r\n  const pickerRef = useRef(null);\r\n  const [sortedEmojis, setSortedEmojis] = useState([]);\r\n\r\n  // –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–º–æ–¥–∂–∏ –¥–ª—è —Ä–µ–∞–∫—Ü–∏–π\r\n  const allEmojis = [\r\n    '‚ù§Ô∏è', 'üëç', 'üòÇ', 'üòä', 'üòÆ', 'üò¢', 'üò°',\r\n    'üî•', 'üëè', 'üéâ', 'üíØ', 'ü§î', 'üòç',\r\n    'ü§©', 'üòé', 'ü•≥', 'üò±', 'ü§Ø', 'üëÄ',\r\n    'üí©', 'ü§°', 'ü§Æ', 'üò§', 'üôÑ', 'üòí',\r\n    'üëé', 'üíÄ', 'ü§¨', 'üòà'\r\n  ];\r\n\r\n  // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —ç–º–æ–¥–∂–∏ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n  useEffect(() => {\r\n    const emojiUsage = JSON.parse(localStorage.getItem('emojiUsage') || '{}');\r\n    \r\n    // –°–æ—Ä—Ç–∏—Ä—É–µ–º —ç–º–æ–¥–∂–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\r\n    const sorted = [...allEmojis].sort((a, b) => {\r\n      const usageA = emojiUsage[a] || 0;\r\n      const usageB = emojiUsage[b] || 0;\r\n      return usageB - usageA; // –û—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É\r\n    });\r\n    \r\n    setSortedEmojis(sorted);\r\n  }, []);\r\n\r\n  // –ó–∞–∫—Ä—ã—Ç–∏–µ picker –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (pickerRef.current && !pickerRef.current.contains(event.target)) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [onClose]);\r\n\r\n  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape\r\n  useEffect(() => {\r\n    const handleEscape = (event) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [onClose]);\r\n\r\n  const handleEmojiClick = (emoji) => {\r\n    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\r\n    const emojiUsage = JSON.parse(localStorage.getItem('emojiUsage') || '{}');\r\n    emojiUsage[emoji] = (emojiUsage[emoji] || 0) + 1;\r\n    localStorage.setItem('emojiUsage', JSON.stringify(emojiUsage));\r\n    \r\n    onSelect(emoji);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.reactionPicker} ref={pickerRef}>\r\n      <div className={styles.pickerHeader}>\r\n        <span className={styles.pickerTitle}>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∞–∫—Ü–∏—é</span>\r\n        <button \r\n          className={styles.closeButton}\r\n          onClick={onClose}\r\n          aria-label=\"–ó–∞–∫—Ä—ã—Ç—å\"\r\n        >\r\n          √ó\r\n        </button>\r\n      </div>\r\n      \r\n      <div className={styles.emojiGrid}>\r\n        {sortedEmojis.map((emoji) => (\r\n          <button\r\n            key={emoji}\r\n            className={styles.emojiButton}\r\n            onClick={() => handleEmojiClick(emoji)}\r\n            title={emoji}\r\n          >\r\n            {emoji}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReactionPicker;\r\n","import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles from './ReactionTooltip.module.css';\r\n\r\n/**\r\n * –ö–∞—Å—Ç–æ–º–Ω—ã–π tooltip –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ—Å—Ç–∞–≤–∏–≤—à–∏—Ö —Ä–µ–∞–∫—Ü–∏—é\r\n * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–≤–∞—Ç–∞—Ä–∫–∏ –∏ –∏–º–µ–Ω–∞, –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å\r\n */\r\nconst ReactionTooltip = ({ users, position, onMouseEnter, onMouseLeave }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleUserClick = (userId, e) => {\r\n    e.stopPropagation();\r\n    navigate(`/profile/${userId}`);\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className={styles.tooltip}\r\n      style={{\r\n        left: position?.x || 0,\r\n        top: position?.y || 0\r\n      }}\r\n      onMouseEnter={onMouseEnter}\r\n      onMouseLeave={onMouseLeave}\r\n    >\r\n      <div className={styles.tooltipContent}>\r\n        {users.map((user) => (\r\n          <div\r\n            key={user.id}\r\n            className={styles.userItem}\r\n            onClick={(e) => handleUserClick(user.id, e)}\r\n          >\r\n            <div className={styles.avatar}>\r\n              {user.avatarUrl ? (\r\n                <img src={user.avatarUrl} alt={user.name} />\r\n              ) : (\r\n                <div className={styles.avatarPlaceholder}>\r\n                  {user.name.charAt(0).toUpperCase()}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <span className={styles.userName}>{user.name}</span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReactionTooltip;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAppDispatch } from '../../hooks/useAppDispatch';\r\nimport { useAppSelector } from '../../hooks/useAppSelector';\r\nimport { addReaction, deletePost, fetchWall } from '../../store/slices/wallSlice';\r\nimport ReactionPicker from './ReactionPicker';\r\nimport ReactionTooltip from './ReactionTooltip';\r\nimport useConfirm from '../../hooks/useConfirm.jsx';\r\nimport useAlert from '../../hooks/useAlert.jsx';\r\nimport api from '../../services/api';\r\nimport styles from './WallPost.module.css';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–ø–∏—Å–∏ –Ω–∞ —Å—Ç–µ–Ω–µ\r\n * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø–æ—Å—Ç–æ–≤: text, media_added, rating, review\r\n */\r\nconst WallPost = ({ post, isOwnProfile }) => {\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n  const currentUser = useAppSelector((state) => state.auth.user);\r\n  const { confirmDialog, showConfirm } = useConfirm();\r\n  const { alertDialog, showAlert } = useAlert();\r\n  const [showReactionPicker, setShowReactionPicker] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [tooltipData, setTooltipData] = useState(null);\r\n  const tooltipTimeoutRef = useRef(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editedContent, setEditedContent] = useState(post.content || '');\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏\r\n  const handleAddReaction = async (emoji) => {\r\n    try {\r\n      await dispatch(addReaction({ \r\n        postId: post.id, \r\n        emoji \r\n      })).unwrap();\r\n      setShowReactionPicker(false);\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏:', err);\r\n    }\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏\r\n  const handleDeleteReaction = async (reactionId) => {\r\n    try {\r\n      await api.delete(`/wall/${post.id}/reactions/${reactionId}`);\r\n      // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å—Ç—ã\r\n      dispatch(fetchWall(post.userId));\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏:', err);\r\n    }\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ badge —Ä–µ–∞–∫—Ü–∏–∏\r\n  const handleReactionBadgeClick = async (reaction) => {\r\n    if (!currentUser) return;\r\n\r\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ä–µ–∞–∫—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º –∂–µ —ç–º–æ–¥–∂–∏\r\n    const userReactionWithSameEmoji = post.reactions?.find(\r\n      r => r.userId === currentUser.id && r.emoji === reaction.emoji\r\n    );\r\n\r\n    if (userReactionWithSameEmoji) {\r\n      // –£–¥–∞–ª—è–µ–º —Ä–µ–∞–∫—Ü–∏—é\r\n      await handleDeleteReaction(userReactionWithSameEmoji.id);\r\n    } else {\r\n      // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–∫—É—é –∂–µ —Ä–µ–∞–∫—Ü–∏—é\r\n      await handleAddReaction(reaction.emoji);\r\n    }\r\n  };\r\n\r\n  // –ü–æ–∫–∞–∑–∞—Ç—å tooltip –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏\r\n  const handleMouseEnter = (e, users) => {\r\n    if (tooltipTimeoutRef.current) {\r\n      clearTimeout(tooltipTimeoutRef.current);\r\n    }\r\n\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    setTooltipData({\r\n      users,\r\n      position: {\r\n        x: rect.left,\r\n        y: rect.bottom + 5\r\n      }\r\n    });\r\n  };\r\n\r\n  // –°–∫—Ä—ã—Ç—å tooltip –ø—Ä–∏ —É—Ö–æ–¥–µ –º—ã—à–∏\r\n  const handleMouseLeave = () => {\r\n    tooltipTimeoutRef.current = setTimeout(() => {\r\n      setTooltipData(null);\r\n    }, 300);\r\n  };\r\n\r\n  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å tooltip –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –Ω–µ–≥–æ\r\n  const handleTooltipMouseEnter = () => {\r\n    if (tooltipTimeoutRef.current) {\r\n      clearTimeout(tooltipTimeoutRef.current);\r\n    }\r\n  };\r\n\r\n  // –°–∫—Ä—ã—Ç—å tooltip –ø—Ä–∏ —É—Ö–æ–¥–µ —Å –Ω–µ–≥–æ\r\n  const handleTooltipMouseLeave = () => {\r\n    setTooltipData(null);\r\n  };\r\n\r\n  // –û—á–∏—Å—Ç–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n  useEffect(() => {\r\n    return () => {\r\n      if (tooltipTimeoutRef.current) {\r\n        clearTimeout(tooltipTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞\r\n  const handleDeletePost = async () => {\r\n    const confirmed = await showConfirm({\r\n      title: '–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?',\r\n      message: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.',\r\n      confirmText: '–£–¥–∞–ª–∏—Ç—å',\r\n      cancelText: '–û—Ç–º–µ–Ω–∞',\r\n      confirmButtonStyle: 'danger'\r\n    });\r\n\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n    try {\r\n      await dispatch(deletePost(post.id)).unwrap();\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞:', err);\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.',\r\n        type: 'error'\r\n      });\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç–∞\r\n  const handleEditPost = () => {\r\n    setIsEditing(true);\r\n    setEditedContent(post.content || '');\r\n  };\r\n\r\n  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞\r\n  const handleSaveEdit = async () => {\r\n    if (!editedContent.trim()) {\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º',\r\n        type: 'error'\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      await api.put(`/wall/${post.id}`, { content: editedContent.trim() });\r\n      // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å—Ç—ã\r\n      dispatch(fetchWall(post.userId));\r\n      setIsEditing(false);\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç–∞:', err);\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: err.response?.data?.error || '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å',\r\n        type: 'error'\r\n      });\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  // –û—Ç–º–µ–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\r\n  const handleCancelEdit = () => {\r\n    setIsEditing(false);\r\n    setEditedContent(post.content || '');\r\n  };\r\n\r\n  // –ü—Ä–æ–≤–µ—Ä–∫–∞, –º–æ–∂–Ω–æ –ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç (–≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞)\r\n  const canEdit = () => {\r\n    const createdAt = new Date(post.createdAt);\r\n    const now = new Date();\r\n    const hourInMs = 60 * 60 * 1000;\r\n    return (now - createdAt) < hourInMs;\r\n  };\r\n\r\n  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now - date;\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMs / 3600000);\r\n    const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n    if (diffMins < 1) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';\r\n    if (diffMins < 60) return `${diffMins} –º–∏–Ω –Ω–∞–∑–∞–¥`;\r\n    if (diffHours < 24) return `${diffHours} —á –Ω–∞–∑–∞–¥`;\r\n    if (diffDays < 7) return `${diffDays} –¥ –Ω–∞–∑–∞–¥`;\r\n    \r\n    return date.toLocaleDateString('ru-RU', {\r\n      day: 'numeric',\r\n      month: 'short',\r\n      year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\r\n    });\r\n  };\r\n\r\n  // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –º–µ–¥–∏–∞\r\n  const handleMediaClick = () => {\r\n    if (post.tmdbId && post.mediaType) {\r\n      navigate(`/media/${post.mediaType}/${post.tmdbId}`);\r\n    }\r\n  };\r\n\r\n  // –†–µ–Ω–¥–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø–æ—Å—Ç–∞\r\n  const renderPostContent = () => {\r\n    switch (post.postType) {\r\n      case 'text':\r\n        return (\r\n          <div className={styles.textContent}>\r\n            {isEditing ? (\r\n              <div className={styles.editMode}>\r\n                <textarea\r\n                  className={styles.editTextarea}\r\n                  value={editedContent}\r\n                  onChange={(e) => setEditedContent(e.target.value)}\r\n                  rows={4}\r\n                  disabled={isSaving}\r\n                />\r\n                <div className={styles.editButtons}>\r\n                  <button \r\n                    className={styles.saveButton}\r\n                    onClick={handleSaveEdit}\r\n                    disabled={isSaving}\r\n                  >\r\n                    {isSaving ? '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'}\r\n                  </button>\r\n                  <button \r\n                    className={styles.cancelButton}\r\n                    onClick={handleCancelEdit}\r\n                    disabled={isSaving}\r\n                  >\r\n                    –û—Ç–º–µ–Ω–∞\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <p>{post.content}</p>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'media_added':\r\n        return (\r\n          <div className={styles.mediaAddedContent}>\r\n            <p className={styles.actionText}>\r\n              üìå –î–æ–±–∞–≤–∏–ª{isOwnProfile ? '' : '–∞'} –≤ —Å–ø–∏—Å–æ–∫\r\n            </p>\r\n            {post.tmdbId && (\r\n              <div \r\n                className={styles.mediaInfo}\r\n                onClick={handleMediaClick}\r\n              >\r\n                <div className={styles.mediaDetails}>\r\n                  <h4 className={styles.mediaTitle}>\r\n                    {post.mediaType === 'movie' ? '–§–∏–ª—å–º' : '–°–µ—Ä–∏–∞–ª'} (ID: {post.tmdbId})\r\n                  </h4>\r\n                  <span className={styles.mediaType}>\r\n                    {post.mediaType === 'movie' ? 'üé¨ –§–∏–ª—å–º' : 'üì∫ –°–µ—Ä–∏–∞–ª'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'rating':\r\n        return (\r\n          <div className={styles.ratingContent}>\r\n            <p className={styles.actionText}>\r\n              ‚≠ê –û—Ü–µ–Ω–∏–ª{isOwnProfile ? '' : '–∞'}\r\n            </p>\r\n            {post.tmdbId && (\r\n              <div \r\n                className={styles.mediaInfo}\r\n                onClick={handleMediaClick}\r\n              >\r\n                <div className={styles.mediaDetails}>\r\n                  <h4 className={styles.mediaTitle}>\r\n                    {post.mediaType === 'movie' ? '–§–∏–ª—å–º' : '–°–µ—Ä–∏–∞–ª'} (ID: {post.tmdbId})\r\n                  </h4>\r\n                  <div className={styles.ratingValue}>\r\n                    <span className={styles.ratingStars}>‚òÖ</span>\r\n                    <span className={styles.ratingNumber}>{post.rating}/10</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'review':\r\n        return (\r\n          <div className={styles.reviewContent}>\r\n            <p className={styles.actionText}>\r\n              ‚úçÔ∏è –ù–∞–ø–∏—Å–∞–ª{isOwnProfile ? '' : '–∞'} –æ—Ç–∑—ã–≤\r\n            </p>\r\n            {post.tmdbId && (\r\n              <div \r\n                className={styles.mediaInfo}\r\n                onClick={handleMediaClick}\r\n              >\r\n                <div className={styles.mediaDetails}>\r\n                  <h4 className={styles.mediaTitle}>\r\n                    {post.mediaType === 'movie' ? '–§–∏–ª—å–º' : '–°–µ—Ä–∏–∞–ª'} (ID: {post.tmdbId})\r\n                  </h4>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {post.content && (\r\n              <div className={styles.reviewText}>\r\n                <p>{post.content}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∞–∫—Ü–∏–π –ø–æ —ç–º–æ–¥–∂–∏\r\n  const groupedReactions = post.reactions?.reduce((acc, reaction) => {\r\n    if (!acc[reaction.emoji]) {\r\n      acc[reaction.emoji] = {\r\n        emoji: reaction.emoji,\r\n        count: 0,\r\n        users: []\r\n      };\r\n    }\r\n    acc[reaction.emoji].count++;\r\n    acc[reaction.emoji].users.push({\r\n      id: reaction.userId,\r\n      name: reaction.user?.displayName || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',\r\n      avatarUrl: reaction.user?.avatarUrl || null\r\n    });\r\n    return acc;\r\n  }, {}) || {};\r\n\r\n  const reactionsList = Object.values(groupedReactions);\r\n\r\n  // –ü—Ä–æ–≤–µ—Ä–∫–∞, –ø–æ—Å—Ç–∞–≤–∏–ª –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–∞–∫—Ü–∏—é\r\n  const userReaction = post.reactions?.find(r => r.userId === currentUser?.id);\r\n\r\n  return (\r\n    <>\r\n      {confirmDialog}\r\n      {alertDialog}\r\n      <div className={styles.wallPost}>\r\n      {/* –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ—Å—Ç–∞ */}\r\n      <div className={styles.postContent}>\r\n        {renderPostContent()}\r\n      </div>\r\n\r\n      {/* –§—É—Ç–µ—Ä —Å –¥–∞—Ç–æ–π –∏ —Ä–µ–∞–∫—Ü–∏—è–º–∏ */}\r\n      <div className={styles.postFooter}>\r\n        <div className={styles.postFooterLeft}>\r\n          <span className={styles.postDate}>\r\n            {formatDate(post.createdAt)}\r\n            {post.editedAt && <span className={styles.editedLabel}> (–∏–∑–º–µ–Ω–µ–Ω–æ)</span>}\r\n          </span>\r\n\r\n          {/* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö –ø–æ—Å—Ç–æ–≤) */}\r\n          {isOwnProfile && currentUser && post.userId === currentUser.id && (\r\n            <div className={styles.postActions}>\r\n              {canEdit() && (post.postType === 'text' || post.postType === 'review') && !isEditing && (\r\n                <button\r\n                  className={styles.editButton}\r\n                  onClick={handleEditPost}\r\n                  title=\"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å\"\r\n                >\r\n                  ‚úèÔ∏è\r\n                </button>\r\n              )}\r\n              <button\r\n                className={styles.deleteButton}\r\n                onClick={handleDeletePost}\r\n                disabled={isDeleting}\r\n                title=\"–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å\"\r\n              >\r\n                {isDeleting ? '‚è≥' : 'üóëÔ∏è'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* –†–µ–∞–∫—Ü–∏–∏ */}\r\n        <div className={styles.reactionsContainer}>\r\n          {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–∞–∫—Ü–∏–π */}\r\n          {reactionsList.length > 0 && (\r\n            <div className={styles.reactionsList}>\r\n              {reactionsList.map((reaction) => {\r\n                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ä–µ–∞–∫—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º —ç–º–æ–¥–∂–∏\r\n                const isUserReaction = currentUser && reaction.users.some(u => u.id === currentUser.id);\r\n                \r\n                return (\r\n                  <span \r\n                    key={reaction.emoji}\r\n                    className={`${styles.reactionBadge} ${isUserReaction ? styles.userReaction : ''}`}\r\n                    onClick={() => handleReactionBadgeClick(reaction)}\r\n                    onMouseEnter={(e) => handleMouseEnter(e, reaction.users)}\r\n                    onMouseLeave={handleMouseLeave}\r\n                  >\r\n                    {reaction.emoji} {reaction.count}\r\n                  </span>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏ */}\r\n          {currentUser && (\r\n            <div className={styles.addReactionContainer}>\r\n              <button\r\n                className={styles.addReactionButton}\r\n                onClick={() => setShowReactionPicker(!showReactionPicker)}\r\n                title={userReaction ? '–ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é' : '–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é'}\r\n              >\r\n                {userReaction ? userReaction.emoji : 'üòä'}\r\n              </button>\r\n\r\n              {/* Picker —Ä–µ–∞–∫—Ü–∏–π */}\r\n              {showReactionPicker && (\r\n                <ReactionPicker\r\n                  onSelect={handleAddReaction}\r\n                  onClose={() => setShowReactionPicker(false)}\r\n                />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Tooltip —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ */}\r\n        {tooltipData && (\r\n          <ReactionTooltip\r\n            users={tooltipData.users}\r\n            position={tooltipData.position}\r\n            onMouseEnter={handleTooltipMouseEnter}\r\n            onMouseLeave={handleTooltipMouseLeave}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default WallPost;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useAppDispatch } from '../../hooks/useAppDispatch';\r\nimport { useAppSelector } from '../../hooks/useAppSelector';\r\nimport { fetchWall, createPost } from '../../store/slices/wallSlice';\r\nimport WallPost from './WallPost';\r\nimport styles from './Wall.module.css';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–µ–Ω—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ª–µ–Ω—Ç—É –ø–æ—Å—Ç–æ–≤ –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)\r\n */\r\nconst Wall = ({ userId, isOwnProfile = false }) => {\r\n  const dispatch = useAppDispatch();\r\n  const { posts, loading, error } = useAppSelector((state) => state.wall);\r\n  const [newPostContent, setNewPostContent] = useState('');\r\n  const [isCreating, setIsCreating] = useState(false);\r\n\r\n  // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞\r\n  useEffect(() => {\r\n    if (userId) {\r\n      dispatch(fetchWall(userId));\r\n    }\r\n  }, [dispatch, userId]);\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞\r\n  const handleCreatePost = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!newPostContent.trim()) {\r\n      return;\r\n    }\r\n\r\n    setIsCreating(true);\r\n    try {\r\n      await dispatch(createPost({\r\n        postType: 'text',\r\n        content: newPostContent.trim()\r\n      })).unwrap();\r\n      \r\n      setNewPostContent('');\r\n    } catch (err) {\r\n      console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞:', err);\r\n    } finally {\r\n      setIsCreating(false);\r\n    }\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—Å—Ç–∞\r\n  const handleKeyDown = (e) => {\r\n    // –ï—Å–ª–∏ –Ω–∞–∂–∞—Ç Enter –±–µ–∑ Shift - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ—Å—Ç\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏\r\n      handleCreatePost(e);\r\n    }\r\n    // –ï—Å–ª–∏ –Ω–∞–∂–∞—Ç Enter —Å Shift - —Ä–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)\r\n  };\r\n\r\n  if (loading && posts.length === 0) {\r\n    return (\r\n      <div className={styles.wall}>\r\n        <div className={styles.loading}>–ó–∞–≥—Ä—É–∑–∫–∞...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className={styles.wall}>\r\n        <div className={styles.error}>\r\n          –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–µ–Ω—ã: {error.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wall}>\r\n      {/* –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è) */}\r\n      {isOwnProfile && (\r\n        <div className={styles.createPostContainer}>\r\n          <form onSubmit={handleCreatePost} className={styles.createPostForm}>\r\n            <textarea\r\n              className={styles.postInput}\r\n              placeholder=\"–ß—Ç–æ —É –≤–∞—Å –Ω–æ–≤–æ–≥–æ?\"\r\n              value={newPostContent}\r\n              onChange={(e) => setNewPostContent(e.target.value)}\r\n              onKeyDown={handleKeyDown}\r\n              rows={3}\r\n              disabled={isCreating}\r\n            />\r\n            <button \r\n              type=\"submit\" \r\n              className={styles.submitButton}\r\n              disabled={!newPostContent.trim() || isCreating}\r\n            >\r\n              {isCreating ? '–ü—É–±–ª–∏–∫–∞—Ü–∏—è...' : '–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ */}\r\n      <div className={styles.postsList}>\r\n        {posts.length === 0 ? (\r\n          <div className={styles.emptyState}>\r\n            <p>–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç–µ–Ω–µ</p>\r\n            {isOwnProfile && (\r\n              <p className={styles.emptyHint}>\r\n                –î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å–º –≤ —Å–ø–∏—Å–æ–∫ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å!\r\n              </p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          posts.map((post) => (\r\n            <WallPost \r\n              key={post.id} \r\n              post={post}\r\n              isOwnProfile={isOwnProfile}\r\n            />\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Wall;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useAppSelector } from '../hooks/useAppSelector';\r\nimport UserPageLayout from '../components/Layout/UserPageLayout';\r\nimport UserAvatar from '../components/User/UserAvatar';\r\nimport ReferralStats from '../components/User/ReferralStats';\r\nimport { AdminModerationPanel } from '../components/Settings';\r\nimport { Wall } from '../components/Wall';\r\nimport api from '../services/api';\r\nimport styles from './UserProfilePage.module.css';\r\n\r\n/**\r\n * –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç Wall –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –µ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é\r\n */\r\nconst UserProfilePage = () => {\r\n  const { userId } = useParams();\r\n  \r\n  const { user: currentUser, isAuthenticated } = useAppSelector((state) => state.auth);\r\n  const [profileUser, setProfileUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —ç—Ç–æ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏–ª–∏ —á—É–∂–æ–π\r\n  const isOwnProfile = currentUser?.id === userId;\r\n  \r\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º\r\n  const isAdmin = currentUser?.isAdmin || false;\r\n\r\n  /**\r\n   * –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n   */\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // –ï—Å–ª–∏ —ç—Ç–æ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Redux\r\n        if (isOwnProfile) {\r\n          setProfileUser(currentUser);\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n        const response = await api.get(`/users/${userId}`);\r\n        setProfileUser(response.data);\r\n      } catch (error) {\r\n        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (isAuthenticated && userId) {\r\n      fetchProfile();\r\n    }\r\n  }, [userId, isAuthenticated, isOwnProfile, currentUser]);\r\n\r\n  /**\r\n   * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏\r\n   * –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏\r\n   */\r\n  const handleModerationAction = async (actionType) => {\r\n    console.log('–î–µ–π—Å—Ç–≤–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏:', actionType);\r\n    \r\n    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n    try {\r\n      const response = await api.get(`/users/${userId}`);\r\n      setProfileUser(response.data);\r\n    } catch (error) {\r\n      console.error('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);\r\n    }\r\n  };\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className={styles.errorContainer}>\r\n        <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className={styles.errorContainer}>\r\n        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!profileUser) {\r\n    return (\r\n      <div className={styles.errorContainer}>\r\n        <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <UserPageLayout user={currentUser}>\r\n      <div className={styles.profileContainer}>\r\n        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è (—Ç–æ–ª—å–∫–æ –¥–ª—è —á—É–∂–∏—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π) */}\r\n        {!isOwnProfile && (\r\n          <div className={styles.profileHeader}>\r\n            <UserAvatar \r\n              user={profileUser} \r\n              size=\"large\" \r\n              showBanIndicator={true}\r\n            />\r\n            <div className={styles.profileInfo}>\r\n              <h1 className={styles.profileName}>{profileUser.displayName}</h1>\r\n              {/* Telegram username —Å–∫—Ä—ã—Ç —É –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π */}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞ –∏ –Ω–µ –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è) */}\r\n        {isAdmin && !isOwnProfile && (\r\n          <AdminModerationPanel \r\n            userId={userId}\r\n            isAdmin={isAdmin}\r\n            onModerationAction={handleModerationAction}\r\n          />\r\n        )}\r\n\r\n        {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è) */}\r\n        {isOwnProfile && <ReferralStats userId={userId} />}\r\n\r\n        {/* Wall - –ª–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ */}\r\n        <div className={styles.wallSection}>\r\n          <h2 className={styles.sectionTitle}>–õ–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h2>\r\n          <Wall userId={userId} isOwnProfile={isOwnProfile} />\r\n        </div>\r\n      </div>\r\n    </UserPageLayout>\r\n  );\r\n};\r\n\r\nexport default UserProfilePage;\r\n"],"names":["ReferralStats","userId","currentUser","useAppSelector","state","referralCode","setReferralCode","useState","referralsCount","setReferralsCount","referrals","setReferrals","loading","setLoading","showReferrals","setShowReferrals","error","setError","isOwnProfile","useEffect","loadReferralStats","response","api","err","_a","_c","_b","loadReferrals","toggleReferrals","styles","jsx","referral","jsxs","AdminModerationPanel","isAdmin","onModerationAction","alertDialog","showAlert","useAlert","confirmDialog","showConfirm","useConfirm","showBanModal","setShowBanModal","banType","setBanType","reason","setReason","duration","setDuration","handleBanPosts","handlePermanentBan","handleUnban","openPostBanModal","openPermanentBanModal","closeModal","Fragment","e","ReactionPicker","onSelect","onClose","pickerRef","useRef","sortedEmojis","setSortedEmojis","allEmojis","emojiUsage","sorted","a","b","usageA","handleClickOutside","event","handleEscape","handleEmojiClick","emoji","ReactionTooltip","users","position","onMouseEnter","onMouseLeave","navigate","useNavigate","handleUserClick","user","WallPost","post","dispatch","useAppDispatch","showReactionPicker","setShowReactionPicker","isDeleting","setIsDeleting","tooltipData","setTooltipData","tooltipTimeoutRef","isEditing","setIsEditing","editedContent","setEditedContent","isSaving","setIsSaving","handleAddReaction","addReaction","handleDeleteReaction","reactionId","fetchWall","handleReactionBadgeClick","reaction","userReactionWithSameEmoji","r","handleMouseEnter","rect","handleMouseLeave","handleTooltipMouseEnter","handleTooltipMouseLeave","handleDeletePost","deletePost","handleEditPost","handleSaveEdit","handleCancelEdit","canEdit","createdAt","now","hourInMs","formatDate","dateString","date","diffMs","diffMins","diffHours","diffDays","handleMediaClick","renderPostContent","groupedReactions","acc","reactionsList","userReaction","isUserReaction","u","Wall","posts","newPostContent","setNewPostContent","isCreating","setIsCreating","handleCreatePost","createPost","handleKeyDown","UserProfilePage","useParams","isAuthenticated","profileUser","setProfileUser","handleModerationAction","actionType","UserPageLayout","UserAvatar"],"mappings":"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"}