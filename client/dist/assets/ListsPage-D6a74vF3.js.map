{"version":3,"file":"ListsPage-D6a74vF3.js","sources":["../../src/components/Lists/CustomListManager.jsx","../../src/pages/ListsPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAppDispatch } from '../../hooks/useAppDispatch';\r\nimport { createList, deleteList, renameList } from '../../store/slices/listsSlice';\r\nimport useConfirm from '../../hooks/useConfirm.jsx';\r\nimport styles from './CustomListManager.module.css';\r\n\r\n/**\r\n * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏\r\n * –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–ø–∏—Å–∫–∏\r\n */\r\nconst CustomListManager = ({ lists, mediaType, onListSelect }) => {\r\n  const dispatch = useAppDispatch();\r\n  const { confirmDialog, showConfirm } = useConfirm();\r\n  const [isCreating, setIsCreating] = useState(false);\r\n  const [newListName, setNewListName] = useState('');\r\n  const [error, setError] = useState(null);\r\n  \r\n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è\r\n  const [renamingListId, setRenamingListId] = useState(null);\r\n  const [renameValue, setRenameValue] = useState('');\r\n\r\n  // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ø–∏—Å–∫–∏ –ø–æ —Ç–∏–ø—É –º–µ–¥–∏–∞\r\n  const filteredLists = lists.filter(list => list.mediaType === mediaType);\r\n\r\n  // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–ø–∏—Å–∫–∞\r\n  const handleCreateList = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!newListName.trim()) {\r\n      setError('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await dispatch(createList({ \r\n        name: newListName.trim(), \r\n        mediaType \r\n      })).unwrap();\r\n      \r\n      setNewListName('');\r\n      setIsCreating(false);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ø–∏—Å–∫–∞');\r\n    }\r\n  };\r\n\r\n  // –£–¥–∞–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞\r\n  const handleDeleteList = async (listId, listName) => {\r\n    const confirmed = await showConfirm({\r\n      title: '–£–¥–∞–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫?',\r\n      message: `–°–ø–∏—Å–æ–∫ \"${listName}\" –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.`,\r\n      confirmText: '–£–¥–∞–ª–∏—Ç—å',\r\n      cancelText: '–û—Ç–º–µ–Ω–∞',\r\n      confirmButtonStyle: 'danger'\r\n    });\r\n\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await dispatch(deleteList(listId)).unwrap();\r\n    } catch (err) {\r\n      setError(err.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞');\r\n    }\r\n  };\r\n\r\n  // –ù–∞—á–∞—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞\r\n  const handleStartRename = (listId, currentName) => {\r\n    setRenamingListId(listId);\r\n    setRenameValue(currentName);\r\n    setError(null);\r\n  };\r\n\r\n  // –û—Ç–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ\r\n  const handleCancelRename = () => {\r\n    setRenamingListId(null);\r\n    setRenameValue('');\r\n    setError(null);\r\n  };\r\n\r\n  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ\r\n  const handleSaveRename = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!renameValue.trim()) {\r\n      setError('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await dispatch(renameList({ \r\n        listId: renamingListId, \r\n        name: renameValue.trim() \r\n      })).unwrap();\r\n      \r\n      setRenamingListId(null);\r\n      setRenameValue('');\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ —Å–ø–∏—Å–∫–∞');\r\n    }\r\n  };\r\n\r\n  // –û—Ç–º–µ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∏—è\r\n  const handleCancelCreate = () => {\r\n    setIsCreating(false);\r\n    setNewListName('');\r\n    setError(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {confirmDialog}\r\n      <div className={styles.listManager}>\r\n      <div className={styles.header}>\r\n        <h2 className={styles.title}>\r\n          {mediaType === 'movie' ? '–°–ø–∏—Å–∫–∏ —Ñ–∏–ª—å–º–æ–≤' : '–°–ø–∏—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–æ–≤'}\r\n        </h2>\r\n        \r\n        {!isCreating && (\r\n          <button \r\n            className={styles.createButton}\r\n            onClick={() => setIsCreating(true)}\r\n            title=\"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫\"\r\n          >\r\n            + –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–ø–∏—Å–∫–∞ */}\r\n      {isCreating && (\r\n        <form className={styles.createForm} onSubmit={handleCreateList}>\r\n          <input\r\n            type=\"text\"\r\n            className={styles.input}\r\n            placeholder=\"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –û—Ç–ª–∏—á–Ω—ã–µ, –°—Ä–µ–¥–Ω–∏–µ, –û—Ç—Å—Ç–æ–π)\"\r\n            value={newListName}\r\n            onChange={(e) => setNewListName(e.target.value)}\r\n            autoFocus\r\n            maxLength={50}\r\n          />\r\n          <div className={styles.formActions}>\r\n            <button type=\"submit\" className={styles.submitButton}>\r\n              –°–æ–∑–¥–∞—Ç—å\r\n            </button>\r\n            <button \r\n              type=\"button\" \r\n              className={styles.cancelButton}\r\n              onClick={handleCancelCreate}\r\n            >\r\n              –û—Ç–º–µ–Ω–∞\r\n            </button>\r\n          </div>\r\n        </form>\r\n      )}\r\n\r\n      {/* –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ */}\r\n      {error && (\r\n        <div className={styles.errorMessage}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤ */}\r\n      <div className={styles.listsContainer}>\r\n        {filteredLists.length === 0 ? (\r\n          <div className={styles.emptyState}>\r\n            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–ø–∏—Å–∫–æ–≤</p>\r\n            <p className={styles.emptyHint}>\r\n              –°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –∫–æ–ª–ª–µ–∫—Ü–∏—é\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className={styles.listGrid}>\r\n            {filteredLists.map((list) => (\r\n              <div \r\n                key={list.id} \r\n                className={styles.listCard}\r\n                onClick={() => onListSelect && onListSelect(list)}\r\n              >\r\n                <div className={styles.listHeader}>\r\n                  <h3 className={styles.listName}>{list.name}</h3>\r\n                  <div className={styles.listActions}>\r\n                    <button\r\n                      className={styles.editButton}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleStartRename(list.id, list.name);\r\n                      }}\r\n                      title=\"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫\"\r\n                    >\r\n                      ‚úèÔ∏è\r\n                    </button>\r\n                    <button\r\n                      className={styles.deleteButton}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleDeleteList(list.id, list.name);\r\n                      }}\r\n                      title=\"–£–¥–∞–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫\"\r\n                    >\r\n                      √ó\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className={styles.listInfo}>\r\n                  <span className={styles.itemCount}>\r\n                    {list.items?.length || 0} {' '}\r\n                    {list.items?.length === 1 ? '—ç–ª–µ–º–µ–Ω—Ç' : \r\n                     list.items?.length > 1 && list.items?.length < 5 ? '—ç–ª–µ–º–µ–Ω—Ç–∞' : \r\n                     '—ç–ª–µ–º–µ–Ω—Ç–æ–≤'}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* –ü—Ä–µ–≤—å—é –ø–µ—Ä–≤—ã—Ö –ø–æ—Å—Ç–µ—Ä–æ–≤ */}\r\n                {list.items && list.items.length > 0 && (\r\n                  <div className={styles.previewPosters}>\r\n                    {list.items.slice(0, 3).map((item, index) => (\r\n                      <div key={index} className={styles.previewPoster}>\r\n                        {item.posterPath && (\r\n                          <img\r\n                            src={`https://image.tmdb.org/t/p/w92${item.posterPath}`}\r\n                            alt={item.title}\r\n                            loading=\"lazy\"\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è */}\r\n      {renamingListId && (\r\n        <div className={styles.modal} onClick={handleCancelRename}>\r\n          <div className={styles.modalContent} onClick={(e) => e.stopPropagation()}>\r\n            <div className={styles.modalHeader}>\r\n              <h3>–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫</h3>\r\n              <button \r\n                className={styles.modalClose}\r\n                onClick={handleCancelRename}\r\n                title=\"–ó–∞–∫—Ä—ã—Ç—å\"\r\n              >\r\n                √ó\r\n              </button>\r\n            </div>\r\n            \r\n            <form onSubmit={handleSaveRename}>\r\n              <input\r\n                type=\"text\"\r\n                className={styles.input}\r\n                placeholder=\"–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞\"\r\n                value={renameValue}\r\n                onChange={(e) => setRenameValue(e.target.value)}\r\n                autoFocus\r\n                maxLength={50}\r\n              />\r\n              \r\n              <div className={styles.modalActions}>\r\n                <button type=\"submit\" className={styles.submitButton}>\r\n                  –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\r\n                </button>\r\n                <button \r\n                  type=\"button\" \r\n                  className={styles.cancelButton}\r\n                  onClick={handleCancelRename}\r\n                >\r\n                  –û—Ç–º–µ–Ω–∞\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CustomListManager;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { useAppDispatch } from '../hooks/useAppDispatch';\r\nimport { useAppSelector } from '../hooks/useAppSelector';\r\nimport { fetchLists, removeFromList, moveToList } from '../store/slices/listsSlice';\r\nimport UserPageLayout from '../components/Layout/UserPageLayout';\r\nimport CustomListManager from '../components/Lists/CustomListManager';\r\nimport MediaCard from '../components/Media/MediaCard';\r\nimport ConfirmDialog from '../components/Common/ConfirmDialog';\r\nimport useAlert from '../hooks/useAlert';\r\nimport styles from './ListsPage.module.css';\r\n\r\n/**\r\n * –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–æ–≤ —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤\r\n * –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –º–µ–¥–∏–∞ –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ø–∏—Å–∫–æ–≤\r\n */\r\nconst ListsPage = () => {\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n  const { showAlert } = useAlert();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  \r\n  const { user, isAuthenticated } = useAppSelector((state) => state.auth);\r\n  const { customLists, loading, error } = useAppSelector((state) => state.lists);\r\n  const { episodeProgress } = useAppSelector((state) => state.lists);\r\n\r\n  // –ü–æ–ª—É—á–∞–µ–º —Ç–∏–ø –º–µ–¥–∏–∞ –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'movie')\r\n  const mediaType = searchParams.get('type') || 'movie';\r\n  \r\n  // –í—ã–±—Ä–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞\r\n  const [selectedListId, setSelectedListId] = useState(null);\r\n  \r\n  // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑ Redux –ø–æ ID\r\n  const selectedList = selectedListId \r\n    ? customLists.find(list => list.id === selectedListId)\r\n    : null;\r\n  \r\n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –º–æ–¥–∞–ª–æ–∫\r\n  const [showMoveDialog, setShowMoveDialog] = useState(false);\r\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  const [targetListId, setTargetListId] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      dispatch(fetchLists());\r\n    }\r\n  }, [isAuthenticated, dispatch]);\r\n\r\n  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –º–µ–¥–∏–∞\r\n  const handleMediaTypeChange = (type) => {\r\n    setSearchParams({ type });\r\n    setSelectedListId(null); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∏–ø–∞\r\n  };\r\n\r\n  // –í—ã–±–æ—Ä —Å–ø–∏—Å–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞\r\n  const handleListSelect = (list) => {\r\n    setSelectedListId(list.id);\r\n  };\r\n\r\n  // –í–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –≤—Å–µ—Ö —Å–ø–∏—Å–∫–æ–≤\r\n  const handleBackToLists = () => {\r\n    setSelectedListId(null);\r\n  };\r\n\r\n  // –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è\r\n  const handleOpenMoveDialog = (item) => {\r\n    setSelectedItem(item);\r\n    setShowMoveDialog(true);\r\n  };\r\n\r\n  // –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ —É–¥–∞–ª–µ–Ω–∏—è\r\n  const handleOpenDeleteDialog = (item) => {\r\n    setSelectedItem(item);\r\n    setShowDeleteDialog(true);\r\n  };\r\n\r\n  // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –¥—Ä—É–≥–æ–π —Å–ø–∏—Å–æ–∫\r\n  const handleMoveItem = async () => {\r\n    if (!selectedItem || !targetListId || !selectedList) return;\r\n\r\n    try {\r\n      await dispatch(moveToList({\r\n        fromListId: selectedList.id,\r\n        itemId: selectedItem.id,\r\n        toListId: targetListId,\r\n        media: {\r\n          tmdbId: selectedItem.tmdbId,\r\n          mediaType: selectedItem.mediaType\r\n        }\r\n      })).unwrap();\r\n\r\n      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –∏ –æ—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ü–ï–†–ï–î –ø–æ–∫–∞–∑–æ–º –∞–ª–µ—Ä—Ç–∞\r\n      setShowMoveDialog(false);\r\n      setTargetListId('');\r\n      setSelectedItem(null);\r\n\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ!',\r\n        message: `\"${selectedItem.title}\" –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ –¥—Ä—É–≥–æ–π —Å–ø–∏—Å–æ–∫`,\r\n        type: 'success'\r\n      });\r\n    } catch (error) {\r\n      console.error('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è:', error);\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: error.error || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',\r\n        type: 'error'\r\n      });\r\n    }\r\n  };\r\n\r\n  // –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞\r\n  const handleDeleteItem = async () => {\r\n    if (!selectedItem || !selectedList) return;\r\n\r\n    try {\r\n      await dispatch(removeFromList({\r\n        listId: selectedList.id,\r\n        itemId: selectedItem.id\r\n      })).unwrap();\r\n\r\n      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –∏ –æ—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ü–ï–†–ï–î –ø–æ–∫–∞–∑–æ–º –∞–ª–µ—Ä—Ç–∞\r\n      setShowDeleteDialog(false);\r\n      setSelectedItem(null);\r\n\r\n      await showAlert({\r\n        title: '–£—Å–ø–µ—à–Ω–æ!',\r\n        message: `\"${selectedItem.title}\" —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞`,\r\n        type: 'success'\r\n      });\r\n    } catch (error) {\r\n      console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);\r\n      await showAlert({\r\n        title: '–û—à–∏–±–∫–∞',\r\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',\r\n        type: 'error'\r\n      });\r\n    }\r\n  };\r\n\r\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (–∏—Å–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–∏–π)\r\n  const availableListsForMove = selectedListId\r\n    ? customLists.filter(list => \r\n        list.id !== selectedListId && \r\n        list.mediaType === selectedList?.mediaType\r\n      )\r\n    : [];\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className={styles.errorContainer}>\r\n        <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <UserPageLayout user={user}>\r\n      <div className={styles.listsPage}>\r\n        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–∏–ø–æ–≤ */}\r\n        <div className={styles.pageHeader}>\r\n          <h1 className={styles.pageTitle}>–ú–æ–∏ —Å–ø–∏—Å–∫–∏</h1>\r\n          \r\n          <div className={styles.mediaTypeToggle}>\r\n            <button\r\n              className={`${styles.toggleButton} ${mediaType === 'movie' ? styles.active : ''}`}\r\n              onClick={() => handleMediaTypeChange('movie')}\r\n            >\r\n              üé¨ –§–∏–ª—å–º—ã\r\n            </button>\r\n            <button\r\n              className={`${styles.toggleButton} ${mediaType === 'tv' ? styles.active : ''}`}\r\n              onClick={() => handleMediaTypeChange('tv')}\r\n            >\r\n              üì∫ –°–µ—Ä–∏–∞–ª—ã\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫ */}\r\n        {loading && (\r\n          <div className={styles.loadingContainer}>\r\n            <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–æ–≤...</p>\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className={styles.errorMessage}>\r\n            <p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: {error.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}\r\n        {!loading && !error && (\r\n          <>\r\n            {!selectedList ? (\r\n              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä —Å–ø–∏—Å–∫–æ–≤\r\n              <CustomListManager\r\n                lists={customLists}\r\n                mediaType={mediaType}\r\n                onListSelect={handleListSelect}\r\n              />\r\n            ) : (\r\n              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞\r\n              <div className={styles.listContent}>\r\n                <div className={styles.listContentHeader}>\r\n                  <button \r\n                    className={styles.backButton}\r\n                    onClick={handleBackToLists}\r\n                  >\r\n                    ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫–∞–º\r\n                  </button>\r\n                  <h2 className={styles.listContentTitle}>{selectedList.name}</h2>\r\n                  <p className={styles.listContentCount}>\r\n                    {selectedList.items?.length || 0} {' '}\r\n                    {selectedList.items?.length === 1 ? '—ç–ª–µ–º–µ–Ω—Ç' : \r\n                     selectedList.items?.length > 1 && selectedList.items?.length < 5 ? '—ç–ª–µ–º–µ–Ω—Ç–∞' : \r\n                     '—ç–ª–µ–º–µ–Ω—Ç–æ–≤'}\r\n                  </p>\r\n                </div>\r\n\r\n                {selectedList.items && selectedList.items.length > 0 ? (\r\n                  <div className={styles.mediaGrid}>\r\n                    {selectedList.items.map((item) => (\r\n                      <div key={item.tmdbId} className={styles.mediaCardWrapper}>\r\n                        <MediaCard\r\n                          media={item}\r\n                          showProgress={item.mediaType === 'tv'}\r\n                          progress={episodeProgress[item.tmdbId]?.[episodeProgress[item.tmdbId].length - 1]}\r\n                        />\r\n                        <div className={styles.itemActions}>\r\n                          <button\r\n                            className={styles.moveButton}\r\n                            onClick={() => handleOpenMoveDialog(item)}\r\n                            title=\"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –¥—Ä—É–≥–æ–π —Å–ø–∏—Å–æ–∫\"\r\n                          >\r\n                            ‚Üí\r\n                          </button>\r\n                          <button\r\n                            className={styles.deleteButton}\r\n                            onClick={() => handleOpenDeleteDialog(item)}\r\n                            title=\"–£–¥–∞–ª–∏—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞\"\r\n                          >\r\n                            üóëÔ∏è\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className={styles.emptyList}>\r\n                    <p>–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</p>\r\n                    <p className={styles.emptyHint}>\r\n                      –î–æ–±–∞–≤—å—Ç–µ {mediaType === 'movie' ? '—Ñ–∏–ª—å–º—ã' : '—Å–µ—Ä–∏–∞–ª—ã'} —á–µ—Ä–µ–∑{' '}\r\n                      <a href=\"/catalog\" className={styles.searchLink}>–∫–∞—Ç–∞–ª–æ–≥</a>\r\n                      {' '}–∏–ª–∏{' '}\r\n                      <a href=\"/search\" className={styles.searchLink}>–ø–æ–∏—Å–∫</a>\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* –ú–æ–¥–∞–ª–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è */}\r\n      <ConfirmDialog\r\n        isOpen={showMoveDialog}\r\n        title=\"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –¥—Ä—É–≥–æ–π —Å–ø–∏—Å–æ–∫\"\r\n        message={\r\n          <div className={styles.dialogContent}>\r\n            <p>–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å \"{selectedItem?.title}\" –≤:</p>\r\n            <select\r\n              value={targetListId}\r\n              onChange={(e) => setTargetListId(e.target.value)}\r\n              className={styles.listSelect}\r\n            >\r\n              <option value=\"\">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫</option>\r\n              {availableListsForMove.map(list => (\r\n                <option key={list.id} value={list.id}>\r\n                  {list.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            {availableListsForMove.length === 0 && (\r\n              <p className={styles.noListsMessage}>\r\n                –ù–µ—Ç –¥—Ä—É–≥–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è {mediaType === 'movie' ? '—Ñ–∏–ª—å–º–æ–≤' : '—Å–µ—Ä–∏–∞–ª–æ–≤'}\r\n              </p>\r\n            )}\r\n          </div>\r\n        }\r\n        onConfirm={handleMoveItem}\r\n        onCancel={() => {\r\n          setShowMoveDialog(false);\r\n          setTargetListId('');\r\n          setSelectedItem(null);\r\n        }}\r\n        confirmText=\"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å\"\r\n        cancelText=\"–û—Ç–º–µ–Ω–∞\"\r\n        confirmButtonStyle=\"primary\"\r\n        confirmDisabled={!targetListId}\r\n      />\r\n\r\n      {/* –ú–æ–¥–∞–ª–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è */}\r\n      <ConfirmDialog\r\n        isOpen={showDeleteDialog}\r\n        title=\"–£–¥–∞–ª–∏—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞\"\r\n        message={`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å \"${selectedItem?.title}\" –∏–∑ —Å–ø–∏—Å–∫–∞ \"${selectedList?.name}\"?`}\r\n        onConfirm={handleDeleteItem}\r\n        onCancel={() => {\r\n          setShowDeleteDialog(false);\r\n          setSelectedItem(null);\r\n        }}\r\n        confirmText=\"–£–¥–∞–ª–∏—Ç—å\"\r\n        cancelText=\"–û—Ç–º–µ–Ω–∞\"\r\n        confirmButtonStyle=\"danger\"\r\n      />\r\n    </UserPageLayout>\r\n  );\r\n};\r\n\r\nexport default ListsPage;\r\n"],"names":["CustomListManager","lists","mediaType","onListSelect","dispatch","useAppDispatch","confirmDialog","showConfirm","useConfirm","isCreating","setIsCreating","useState","newListName","setNewListName","error","setError","renamingListId","setRenamingListId","renameValue","setRenameValue","filteredLists","list","handleCreateList","e","createList","err","handleDeleteList","listId","listName","deleteList","handleStartRename","currentName","handleCancelRename","handleSaveRename","renameList","handleCancelCreate","jsxs","Fragment","styles","jsx","_a","_b","_c","_d","item","index","ListsPage","useNavigate","showAlert","useAlert","searchParams","setSearchParams","useSearchParams","user","isAuthenticated","useAppSelector","state","customLists","loading","episodeProgress","selectedListId","setSelectedListId","selectedList","showMoveDialog","setShowMoveDialog","showDeleteDialog","setShowDeleteDialog","selectedItem","setSelectedItem","targetListId","setTargetListId","useEffect","fetchLists","handleMediaTypeChange","type","handleListSelect","handleBackToLists","handleOpenMoveDialog","handleOpenDeleteDialog","handleMoveItem","moveToList","handleDeleteItem","removeFromList","availableListsForMove","UserPageLayout","MediaCard","ConfirmDialog"],"mappings":"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"}