import{c as f,r as a,j as t,e as y}from"./index-DPQ5xN5C.js";import{U as j}from"./UserPageLayout-BKV1caGZ.js";import{W as N}from"./WallPost-BCqxorYb.js";import"./useConfirm-ByNQs_z1.js";import"./ConfirmDialog-CGWZbxny.js";import"./useAlert-C1sBKQSI.js";const g="_feedPage_v0x22_3",A="_header_v0x22_17",L="_title_v0x22_29",P="_loading_v0x22_45",B="_error_v0x22_47",S="_retryButton_v0x22_77",I="_emptyState_v0x22_109",W="_emptyIcon_v0x22_121",E="_emptyHint_v0x22_143",F="_findFriendsButton_v0x22_155",k="_postsList_v0x22_191",H="_postWrapper_v0x22_205",U="_postAuthor_v0x22_231",$="_authorLink_v0x22_243",R="_authorAvatar_v0x22_269",w="_authorName_v0x22_285",e={feedPage:g,header:A,title:L,loading:P,error:B,retryButton:S,emptyState:I,emptyIcon:W,emptyHint:E,findFriendsButton:F,postsList:k,postWrapper:H,postAuthor:U,authorLink:$,authorAvatar:R,authorName:w},G=()=>{const{user:n}=f(s=>s.auth),[i,u]=a.useState([]),[_,m]=a.useState(!0),[l,d]=a.useState(null),o=async()=>{var s,c;if(n)try{d(null);const r=await y.get(`/feed/${n.id}`);u(r.data)}catch(r){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð»ÐµÐ½Ñ‚Ñ‹:",r),d(((c=(s=r.response)==null?void 0:s.data)==null?void 0:c.error)||"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð»ÐµÐ½Ñ‚Ñƒ")}finally{m(!1)}};a.useEffect(()=>{o()},[n]),a.useEffect(()=>{const s=setInterval(()=>{o()},3e4);return()=>clearInterval(s)},[n]);const x=()=>{o()};return t.jsx(j,{children:t.jsxs("div",{className:e.feedPage,children:[t.jsx("div",{className:e.header,children:t.jsx("h1",{className:e.title,children:"ðŸ“° Ð›ÐµÐ½Ñ‚Ð° Ð´Ñ€ÑƒÐ·ÐµÐ¹"})}),_&&i.length===0?t.jsx("div",{className:e.loading,children:t.jsx("p",{children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð»ÐµÐ½Ñ‚Ñ‹..."})}):l?t.jsxs("div",{className:e.error,children:[t.jsxs("p",{children:["âŒ ",l]}),t.jsx("button",{className:e.retryButton,onClick:o,children:"ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ½Ð¾Ð²Ð°"})]}):i.length===0?t.jsxs("div",{className:e.emptyState,children:[t.jsx("p",{className:e.emptyIcon,children:"ðŸ“­"}),t.jsx("h2",{children:"Ð›ÐµÐ½Ñ‚Ð° Ð¿ÑƒÑÑ‚Ð°"}),t.jsx("p",{className:e.emptyHint,children:"Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð´Ñ€ÑƒÐ·ÐµÐ¹, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ð¸Ñ… Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ Ð·Ð´ÐµÑÑŒ"}),t.jsx("a",{href:"/friends",className:e.findFriendsButton,children:"ÐÐ°Ð¹Ñ‚Ð¸ Ð´Ñ€ÑƒÐ·ÐµÐ¹"})]}):t.jsx("div",{className:e.postsList,children:i.map(s=>{var r,h,p;const c=(r=s.content)==null?void 0:r.startsWith("ðŸ“¢ ÐžÐ±ÑŠÑÐ²Ð»ÐµÐ½Ð¸Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°:");return t.jsxs("div",{className:e.postWrapper,children:[!c&&t.jsx("div",{className:e.postAuthor,children:t.jsxs("a",{href:`/user/${s.userId}`,className:e.authorLink,children:[((h=s.author)==null?void 0:h.avatarUrl)&&t.jsx("img",{src:`http://localhost:3000${s.author.avatarUrl}`,alt:s.author.displayName,className:e.authorAvatar,onError:v=>{v.target.style.display="none"}}),t.jsx("span",{className:e.authorName,children:((p=s.author)==null?void 0:p.displayName)||"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ"})]})}),t.jsx(N,{post:s,isOwnProfile:!1,onReactionChange:x})]},s.id)})})]})})};export{G as default};
//# sourceMappingURL=FeedPage-B-2lzbgy.js.map
